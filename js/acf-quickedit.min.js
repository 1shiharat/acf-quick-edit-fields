!function(e,i){i.acf_quickedit=qe={form:{},field:{_types:{},add_type:function(e){return qe.field._types[e.type]=qe.field.View.extend(e),qe.field._types[e.type]},factory:function(i,t){var n=e(i).attr("data-field-type"),a=qe.field._types;return field_class=n in a?a[n]:qe.field.View,new field_class({el:i,controller:t})}}},qe.form.View=Backbone.View.extend({initialize:function(){var e=this;this.options=arguments[0],Backbone.View.prototype.initialize.apply(this,arguments),this.fields={},this.$(".inline-edit-col-qed [data-key]").each(function(i,t){var n=qe.field.factory(t,this);e.fields[n.key]=n}),this.loadValues()},loadValues:function(){var i=this;return e.post({url:ajaxurl,data:{action:"get_acf_post_meta",object_id:this.options.object_id,acf_field_keys:Object.keys(this.fields)},success:function(e){_.each(e,function(e,t){i.fields[t].setValue(e)})}}),this},unload:function(e){_.each(this.fields,function(e){e.unload()})}}),qe.form.QuickEdit=qe.form.View.extend({}),qe.form.BulkEdit=qe.form.View.extend({}),qe.field.View=wp.media.View.extend({initialize:function(){Backbone.View.prototype.initialize.apply(this,arguments),this.key=this.$el.attr("data-key"),this.$("input").prop("readonly",!0)},setValue:function(e){return this.$("input").prop("readonly",!1),this.$("input").val(e),this},unload:function(){}})}(jQuery,window);
!function(t,e){var i={type:"file",mediaFrameType:"",events:{"click .select-media":"selectFile","click .remove-media":"removeFile"},initialize:function(){e.field.View.prototype.initialize.apply(this,arguments);var t=this,i=this.$('[type="hidden"]'),a=acf.get("post_id");this.mediaFrameOpts={field:this.key,multiple:!1,post_id:a,library:i.attr("data-library"),mode:"select",type:this.mediaFrameType,select:function(e,i){e&&t.setValue(e.get("id"))}},i.data("mime_types")&&(this.mediaFrameOpts.mime_types=i.data("mime_types"))},selectFile:function(e){e.preventDefault();acf.media.popup(this.mediaFrameOpts);acf.isset(window,"wp","media","view","settings","post")&&t.isNumeric(this.mediaFrameOpts.post_id)&&(wp.media.view.settings.post.id=this.mediaFrameOpts.post_id)},removeFile:function(t){t.preventDefault(),this.setValue("")},setValue:function(t){return this.$('[type="hidden"]').val(t),this}};e.field.add_type(i),e.field.add_type(_.extend(i,{type:"image",mediaFrameType:"image"})),e.field.add_type(i),e.field.add_type({type:"range",events:{'change [type="range"]':"adaptNumber",'mousemove [type="range"]':"adaptNumber",'change [type="number"]':"adaptRange",'mousemove [type="number"]':"adaptRange"},adaptNumber:function(){this.$('[type="number"]').val(this.$('[type="range"]').val())},adaptRange:function(){this.$('[type="range"]').val(this.$('[type="number"]').val())}}),e.field.add_type({type:"date_picker",initialize:function(){var i=this;return e.field.View.prototype.initialize.apply(this,arguments),t("body > #ui-datepicker-div").length>0&&t("body > #ui-datepicker-div").wrap('<div class="acf-ui-datepicker" />'),this.$input=this.$('[type="text"]'),this.$hidden=this.$('[type="hidden"]'),this.datePickerArgs={dateFormat:this.$("[data-date_format]").data("date_format"),altFormat:"yymmdd",altField:this.$hidden,changeYear:!0,yearRange:"-100:+100",changeMonth:!0,showButtonPanel:!0,firstDay:this.$("[data-first_day]").data("first_day")},this.$input.datepicker(this.datePickerArgs).on("blur",function(){t(this).val()||i.$hidden.val("")}),this},setValue:function(e){return this.$input.prop("readonly",!1),this.$input.datepicker("setDate",t.datepicker.parseDate(this.datePickerArgs.altFormat,e)),this}}),e.field.add_type({type:"date_time_picker",initialize:function(){var i=this;return e.field.View.prototype.initialize.apply(this,arguments),t("body > #ui-datepicker-div").length>0&&t("body > #ui-datepicker-div").wrap('<div class="acf-ui-datepicker" />'),this.$input=this.$('[type="text"]'),this.$hidden=this.$('[type="hidden"]'),this.datePickerArgs={altField:this.$hidden,dateFormat:this.$("[data-date_format]").data("date_format"),altFormat:"yy-mm-dd",timeFormat:this.$("[data-time_format]").data("time_format"),altTimeFormat:"HH:mm:ss",altFieldTimeOnly:!1,changeYear:!0,yearRange:"-100:+100",changeMonth:!0,showButtonPanel:!0,firstDay:this.$("[data-first_day]").data("first_day"),controlType:"select",oneLine:!0},this.$input.datetimepicker(this.datePickerArgs).on("blur",function(){t(this).val()||i.$hidden.val("")}),this},setValue:function(e){console.log(e,this.datePickerArgs.altFormat,this.datePickerArgs.altTimeFormat,typeof e);var i=t.datepicker.parseDateTime(this.datePickerArgs.altFormat,this.datePickerArgs.altTimeFormat,e);return this.$input.prop("readonly",!1),this.$hidden.val(i),this.$input.val(t.datepicker.formatDate(this.datePickerArgs.dateFormat,i)+" "+t.datepicker.formatTime(this.datePickerArgs.timeFormat,i)),this}}),e.field.add_type({type:"time_picker",initialize:function(){var i=this;return e.field.View.prototype.initialize.apply(this,arguments),t("body > #ui-datepicker-div").length>0&&t("body > #ui-datepicker-div").wrap('<div class="acf-ui-datepicker" />'),this.$input=this.$('[type="text"]'),this.$hidden=this.$('[type="hidden"]'),this.datePickerArgs={timeFormat:this.$("[data-time_format]").data("time_format"),altTimeFormat:"HH:mm:ss",altField:this.$hidden,altFieldTimeOnly:!1,showButtonPanel:!0,controlType:"select",oneLine:!0},this.$input.timepicker(this.datePickerArgs).on("blur",function(){t(this).val()||i.$hidden.val("")}),this},setValue:function(e){var i=t.datepicker.parseTime(this.datePickerArgs.altTimeFormat,e);return this.$input.prop("readonly",!1),this.$hidden.val(e),this.$input.val(t.datepicker.formatTime(this.datePickerArgs.timeFormat,i)),this}}),e.field.add_type({type:"color_picker",initialize:function(){e.field.View.prototype.initialize.apply(this,arguments),this.$input=this.$('[type="text"]').first().wpColorPicker()},setValue:function(t){this.$input.prop("readonly",!1),this.$input.wpColorPicker("color",t)},unload:function(){t("body").off("click.wpcolorpicker")}}),e.field.add_type({type:"textarea",initialize:function(){e.field.View.prototype.initialize.apply(this,arguments),this.$input=this.$("textarea").prop("readonly",!0),this.$input.on("keydown keyup",function(t){13!=t.which&&27!=t.which||t.stopPropagation()})},setValue:function(t){this.$input.prop("readonly",!1).val(t)}}),e.field.add_type({type:"checkbox",initialize:function(){e.field.View.prototype.initialize.apply(this,arguments),this.$input=this.$('[type="checkbox"]').prop("readonly",!0)},setValue:function(e){var i=this;this.$input.prop("readonly",!1).val(e),t.isArray(e)?t.each(e,function(t,e){i.$('[type="checkbox"][value="'+e+'"]').prop("checked",!0)}):this.$('[type="checkbox"][value="'+e+'"]').prop("checked",!0)}}),e.field.add_type({type:"radio",initialize:function(){var i,a;e.field.View.prototype.initialize.apply(this,arguments),this.$('[type="radio"]').prop("readonly",!0),console.log(this.$("ul.acf-radio-list.other").length),this.$("ul.acf-radio-list.other").length&&(i=this.$('[type="text"]'),this.$('[type="radio"]').on("change",function(e){a=t(this).is('[value="other"]:checked'),i.prop("disabled",!a).prop("readonly",!a)}))},setValue:function(t){this.$('[type="radio"]').prop("readonly",!1),this.$('[type="radio"][value="'+t+'"]').prop("checked",!0)}}),e.field.add_type({type:"select",initialize:function(){e.field.View.prototype.initialize.apply(this,arguments),this.$input=this.$("select").prop("readonly",!0)},setValue:function(t){this.$input.prop("readonly",!1).val(t)}}),e.field.add_type({type:"true_false",initialize:function(){e.field.View.prototype.initialize.apply(this,arguments),this.$('[type="radio"]').prop("readonly",!0)},setValue:function(t){this.$('[type="radio"]').prop("readonly",!1),this.$('[type="radio"][value="'+t+'"]').prop("checked",!0)}})}(jQuery,acf_quickedit);
!function(i,t){if("undefined"!=typeof inlineEditPost){var e=inlineEditPost.edit,n=inlineEditPost.save,d=inlineEditPost.revert;inlineEditPost.edit=function(n){var d,o,r;e.apply(this,arguments),d=0,"object"==typeof n&&(d=parseInt(this.getId(n))),o=i("#edit-"+d),o.is(".quick-edit-row")?r=t.form.QuickEdit:o.is(".bulk-edit-row")&&(r=t.form.BulkEdit),r&&(this.acf_qed_form=new r({el:o.get(0),object_id:d}))},inlineEditPost.revert=function(){return!!this.acf_qed_form&&this.acf_qed_form.unload(),d.apply(this,arguments)},inlineEditPost.save=function(){return!!this.acf_qed_form&&this.acf_qed_form.unload(),n.apply(this,arguments)}}return;var e}(jQuery,window.acf_quickedit);
!function(e){e(".acf-qef-gallery-col").on("mousemove",function(n){var t=(e(this),e(this).find("img"));x=n.offsetX,num=t.length,step=e(this).width()/num,t.each(function(n,t){x>=step*n?e(t).show():e(t).hide()})})}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjZi1xdWlja2VkaXQtYmFzZS5qcyIsImFjZi1xdWlja2VkaXQtZmllbGRzLmpzIiwiYWNmLXF1aWNrZWRpdC5qcyIsInRodW1ibmFpbC1jb2wuanMiXSwibmFtZXMiOlsiJCIsImV4cG9ydHMiLCJhY2ZfcXVpY2tlZGl0IiwicWUiLCJmb3JtIiwiZmllbGQiLCJfdHlwZXMiLCJhZGRfdHlwZSIsImEiLCJ0eXBlIiwiVmlldyIsImV4dGVuZCIsImZhY3RvcnkiLCJlbCIsImNvbnRyb2xsZXIiLCJhdHRyIiwidHlwZXMiLCJmaWVsZF9jbGFzcyIsIkJhY2tib25lIiwiaW5pdGlhbGl6ZSIsInNlbGYiLCJ0aGlzIiwib3B0aW9ucyIsImFyZ3VtZW50cyIsInByb3RvdHlwZSIsImFwcGx5IiwiZmllbGRzIiwiZWFjaCIsImkiLCJrZXkiLCJsb2FkVmFsdWVzIiwicG9zdCIsInVybCIsImFqYXh1cmwiLCJkYXRhIiwiYWN0aW9uIiwib2JqZWN0X2lkIiwiYWNmX2ZpZWxkX2tleXMiLCJPYmplY3QiLCJrZXlzIiwic3VjY2VzcyIsInJlc3BvbnNlIiwiXyIsInZhbCIsInNldFZhbHVlIiwidW5sb2FkIiwiZSIsIlF1aWNrRWRpdCIsIkJ1bGtFZGl0Iiwid3AiLCJtZWRpYSIsIiRlbCIsInByb3AiLCJ2YWx1ZSIsImpRdWVyeSIsIndpbmRvdyIsImZpbGVfdHlwZSIsIm1lZGlhRnJhbWVUeXBlIiwiZXZlbnRzIiwiY2xpY2sgLnNlbGVjdC1tZWRpYSIsImNsaWNrIC5yZW1vdmUtbWVkaWEiLCIkaGlkZGVuIiwicG9zdF9pZCIsImFjZiIsImdldCIsIm1lZGlhRnJhbWVPcHRzIiwibXVsdGlwbGUiLCJsaWJyYXJ5IiwibW9kZSIsInNlbGVjdCIsImF0dGFjaG1lbnQiLCJtaW1lX3R5cGVzIiwic2VsZWN0RmlsZSIsInByZXZlbnREZWZhdWx0IiwicG9wdXAiLCJpc3NldCIsImlzTnVtZXJpYyIsInZpZXciLCJzZXR0aW5ncyIsImlkIiwicmVtb3ZlRmlsZSIsImNoYW5nZSBbdHlwZT1cInJhbmdlXCJdIiwibW91c2Vtb3ZlIFt0eXBlPVwicmFuZ2VcIl0iLCJjaGFuZ2UgW3R5cGU9XCJudW1iZXJcIl0iLCJtb3VzZW1vdmUgW3R5cGU9XCJudW1iZXJcIl0iLCJhZGFwdE51bWJlciIsImFkYXB0UmFuZ2UiLCJsZW5ndGgiLCJ3cmFwIiwiJGlucHV0IiwiZGF0ZVBpY2tlckFyZ3MiLCJkYXRlRm9ybWF0IiwiYWx0Rm9ybWF0IiwiYWx0RmllbGQiLCJjaGFuZ2VZZWFyIiwieWVhclJhbmdlIiwiY2hhbmdlTW9udGgiLCJzaG93QnV0dG9uUGFuZWwiLCJmaXJzdERheSIsImRhdGVwaWNrZXIiLCJvbiIsInBhcnNlRGF0ZSIsInRpbWVGb3JtYXQiLCJhbHRUaW1lRm9ybWF0IiwiYWx0RmllbGRUaW1lT25seSIsImNvbnRyb2xUeXBlIiwib25lTGluZSIsImRhdGV0aW1lcGlja2VyIiwiY29uc29sZSIsImxvZyIsImRhdGUiLCJwYXJzZURhdGVUaW1lIiwiZm9ybWF0RGF0ZSIsImZvcm1hdFRpbWUiLCJ0aW1lcGlja2VyIiwidGltZSIsInBhcnNlVGltZSIsImZpcnN0Iiwid3BDb2xvclBpY2tlciIsIm9mZiIsIndoaWNoIiwic3RvcFByb3BhZ2F0aW9uIiwiaXNBcnJheSIsImlkeCIsIiRvdGhlciIsImlzX290aGVyIiwiaXMiLCJpbmxpbmVFZGl0UG9zdCIsIl93cF9pbmxpbmVfZWRpdF9wb3N0IiwiZWRpdCIsIl93cF9pbmxpbmVfZWRpdF9zYXZlIiwic2F2ZSIsIl93cF9pbmxpbmVfZWRpdF9yZXZlcnQiLCJyZXZlcnQiLCIkdHIiLCJmb3JtX2NsYXNzIiwicGFyc2VJbnQiLCJnZXRJZCIsImFjZl9xZWRfZm9ybSIsIiRpbWciLCJmaW5kIiwieCIsIm9mZnNldFgiLCJudW0iLCJzdGVwIiwid2lkdGgiLCJzaG93IiwiaGlkZSJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBV0EsRUFBR0MsR0FDYkEsRUFBUUMsY0FBZ0JDLElBQ3ZCQyxRQUNBQyxPQUNDQyxVQUNBQyxTQUFTLFNBQVNDLEdBRWpCLE1BREFMLElBQUdFLE1BQU1DLE9BQU9FLEVBQUVDLE1BQVFOLEdBQUdFLE1BQU1LLEtBQUtDLE9BQU9ILEdBQ3hDTCxHQUFHRSxNQUFNQyxPQUFPRSxFQUFFQyxPQUUxQkcsUUFBUSxTQUFTQyxFQUFHQyxHQUNuQixHQUFJTCxHQUFPVCxFQUFFYSxHQUFJRSxLQUFLLG1CQUNyQkMsRUFBUWIsR0FBR0UsTUFBTUMsTUFHbEIsT0FEQVcsYUFBY1IsSUFBUU8sR0FBUUEsRUFBTVAsR0FBUU4sR0FBR0UsTUFBTUssS0FDOUMsR0FBSU8sY0FDVkosR0FBTUEsRUFDTkMsV0FBWUEsT0FLaEJYLEdBQUdDLEtBQUtNLEtBQU9RLFNBQVNSLEtBQUtDLFFBQzVCUSxXQUFXLFdBRVYsR0FBSUMsR0FBT0MsSUFFWEEsTUFBS0MsUUFBVUMsVUFBVSxHQUV6QkwsU0FBU1IsS0FBS2MsVUFBVUwsV0FBV00sTUFBT0osS0FBTUUsV0FFaERGLEtBQUtLLFVBRUxMLEtBQUtyQixFQUFFLG1DQUFtQzJCLEtBQUssU0FBU0MsRUFBRWYsR0FDekQsR0FBSVIsR0FBUUYsR0FBR0UsTUFBTU8sUUFBU0MsRUFBSVEsS0FDbENELEdBQUtNLE9BQVFyQixFQUFNd0IsS0FBUXhCLElBRzVCZ0IsS0FBS1MsY0FHTkEsV0FBWSxXQUNYLEdBQUlWLEdBQU9DLElBZVgsT0FkQXJCLEdBQUUrQixNQUNEQyxJQUFJQyxRQUNKQyxNQUNDQyxPQUFXLG9CQUNYQyxVQUFjZixLQUFLQyxRQUFRYyxVQUMzQkMsZUFBbUJDLE9BQU9DLEtBQUtsQixLQUFLSyxTQUVyQ2MsUUFBUSxTQUFTQyxHQUNoQkMsRUFBRWYsS0FBS2MsRUFBUyxTQUFVRSxFQUFLZCxHQUM5QlQsRUFBS00sT0FBT0csR0FBS2UsU0FBVUQsUUFLdkJ0QixNQUVSd0IsT0FBTyxTQUFTQyxHQUNmSixFQUFFZixLQUFLTixLQUFLSyxPQUFPLFNBQVNyQixHQUMzQkEsRUFBTXdDLGNBSVQxQyxHQUFHQyxLQUFLMkMsVUFBWTVDLEdBQUdDLEtBQUtNLEtBQUtDLFdBSWpDUixHQUFHQyxLQUFLNEMsU0FBVzdDLEdBQUdDLEtBQUtNLEtBQUtDLFdBTWhDUixHQUFHRSxNQUFNSyxLQUFPdUMsR0FBR0MsTUFBTXhDLEtBQUtDLFFBQzdCUSxXQUFXLFdBQ1ZELFNBQVNSLEtBQUtjLFVBQVVMLFdBQVdNLE1BQU9KLEtBQU1FLFdBQ2hERixLQUFLUSxJQUFNUixLQUFLOEIsSUFBSXBDLEtBQUssWUFDekJNLEtBQUtyQixFQUFFLFNBQVNvRCxLQUFNLFlBQVksSUFHbkNSLFNBQVMsU0FBU1MsR0FHakIsTUFGQWhDLE1BQUtyQixFQUFFLFNBQVNvRCxLQUFNLFlBQVksR0FDbEMvQixLQUFLckIsRUFBRSxTQUFTMkMsSUFBSVUsR0FDYmhDLE1BRVJ3QixPQUFPLGdCQUlOUyxPQUFPQztDQzFGVixTQUFXdkQsRUFBR0csR0FDYixHQUFJcUQsSUFDSC9DLEtBQUssT0FDTGdELGVBQWUsR0FDZkMsUUFDQ0Msc0JBQXdCLGFBQ3hCQyxzQkFBd0IsY0FFekJ6QyxXQUFXLFdBRVZoQixFQUFHRSxNQUFNSyxLQUFLYyxVQUFVTCxXQUFXTSxNQUFNSixLQUFLRSxVQUU5QyxJQUFJSCxHQUFPQyxLQUNWd0MsRUFBVXhDLEtBQUtyQixFQUFFLG1CQUNqQjhELEVBQVVDLElBQUlDLElBQUksVUFFbkIzQyxNQUFLNEMsZ0JBQ0o1RCxNQUFTZ0IsS0FBS1EsSUFDZHFDLFVBQVcsRUFDWEosUUFBV0EsRUFDWEssUUFBV04sRUFBUTlDLEtBQUssZ0JBQ3hCcUQsS0FBTyxTQUNQM0QsS0FBUVksS0FBS29DLGVBQ2JZLE9BQVUsU0FBV0MsRUFBWTFDLEdBQ3pCMEMsR0FHUGxELEVBQUt3QixTQUFVMEIsRUFBV04sSUFBSSxTQUczQkgsRUFBUTNCLEtBQUssZ0JBQ2pCYixLQUFLNEMsZUFBZU0sV0FBYVYsRUFBUTNCLEtBQUssZ0JBVWhEc0MsV0FBVyxTQUFTMUIsR0FDbkJBLEVBQUUyQixnQkFFZ0JWLEtBQUliLE1BQU13QixNQUFPckQsS0FBSzRDLGVBR25DRixLQUFJWSxNQUFNcEIsT0FBTyxLQUFLLFFBQVEsT0FBTyxXQUFXLFNBQVd2RCxFQUFFNEUsVUFBV3ZELEtBQUs0QyxlQUFlSCxXQUVoR2IsR0FBR0MsTUFBTTJCLEtBQUtDLFNBQVMvQyxLQUFLZ0QsR0FBSzFELEtBQUs0QyxlQUFlSCxVQUt2RGtCLFdBQVcsU0FBU2xDLEdBQ25CQSxFQUFFMkIsaUJBQ0ZwRCxLQUFLdUIsU0FBUyxLQUVmQSxTQUFTLFNBQVNTLEdBRWpCLE1BREFoQyxNQUFLckIsRUFBRSxtQkFBbUIyQyxJQUFJVSxHQUN2QmhDLE1BT1RsQixHQUFHRSxNQUFNRSxTQUFVaUQsR0FLbkJyRCxFQUFHRSxNQUFNRSxTQUFVbUMsRUFBRS9CLE9BQU82QyxHQUFXL0MsS0FBSyxRQUFRZ0QsZUFBZSxXQUVuRXRELEVBQUdFLE1BQU1FLFNBQVVpRCxHQUtuQnJELEVBQUdFLE1BQU1FLFVBQ1BFLEtBQUssUUFDTGlELFFBQ0N1Qix3QkFBMkIsY0FDM0JDLDJCQUE4QixjQUM5QkMseUJBQTRCLGFBQzVCQyw0QkFBOEIsY0FFL0JDLFlBQVksV0FDWGhFLEtBQUtyQixFQUFFLG1CQUFtQjJDLElBQUt0QixLQUFLckIsRUFBRSxrQkFBa0IyQyxRQUV6RDJDLFdBQVcsV0FDVmpFLEtBQUtyQixFQUFFLGtCQUFrQjJDLElBQUt0QixLQUFLckIsRUFBRSxtQkFBbUIyQyxVQVF6RHhDLEVBQUdFLE1BQU1FLFVBQ1RFLEtBQUssY0FDTlUsV0FBVyxXQUNWLEdBQUlDLEdBQU9DLElBc0JYLE9BckJBbEIsR0FBR0UsTUFBTUssS0FBS2MsVUFBVUwsV0FBV00sTUFBTUosS0FBS0UsV0FDMUN2QixFQUFFLDZCQUE2QnVGLE9BQVMsR0FDM0N2RixFQUFFLDZCQUE2QndGLEtBQUsscUNBRXJDbkUsS0FBS29FLE9BQVVwRSxLQUFLckIsRUFBRyxpQkFDdkJxQixLQUFLd0MsUUFBVXhDLEtBQUtyQixFQUFHLG1CQUN2QnFCLEtBQUtxRSxnQkFDSEMsV0FBY3RFLEtBQUtyQixFQUFFLHNCQUFzQmtDLEtBQUssZUFDaEQwRCxVQUFhLFNBQ2JDLFNBQVl4RSxLQUFLd0MsUUFDakJpQyxZQUFjLEVBQ2RDLFVBQWEsWUFDYkMsYUFBZSxFQUNmQyxpQkFBa0IsRUFDbEJDLFNBQVk3RSxLQUFLckIsRUFBRSxvQkFBb0JrQyxLQUFLLGNBRTlDYixLQUFLb0UsT0FBT1UsV0FBWTlFLEtBQUtxRSxnQkFBaUJVLEdBQUcsT0FBTyxXQUNoRHBHLEVBQUVxQixNQUFNc0IsT0FDZHZCLEVBQUt5QyxRQUFRbEIsSUFBSSxNQUdadEIsTUFFUnVCLFNBQVMsU0FBU1MsR0FHakIsTUFGQWhDLE1BQUtvRSxPQUFPckMsS0FBSyxZQUFXLEdBQzVCL0IsS0FBS29FLE9BQU9VLFdBQVksVUFBV25HLEVBQUVtRyxXQUFXRSxVQUFXaEYsS0FBS3FFLGVBQWVFLFVBQVd2QyxJQUNuRmhDLFFBT1JsQixFQUFHRSxNQUFNRSxVQUNURSxLQUFLLG1CQUNMVSxXQUFXLFdBQ1YsR0FBSUMsR0FBT0MsSUE0QlgsT0EzQkFsQixHQUFHRSxNQUFNSyxLQUFLYyxVQUFVTCxXQUFXTSxNQUFNSixLQUFLRSxXQUMxQ3ZCLEVBQUUsNkJBQTZCdUYsT0FBUyxHQUMzQ3ZGLEVBQUUsNkJBQTZCd0YsS0FBSyxxQ0FFckNuRSxLQUFLb0UsT0FBVXBFLEtBQUtyQixFQUFHLGlCQUN2QnFCLEtBQUt3QyxRQUFVeEMsS0FBS3JCLEVBQUcsbUJBQ3ZCcUIsS0FBS3FFLGdCQUNIRyxTQUFheEUsS0FBS3dDLFFBQ2xCOEIsV0FBZXRFLEtBQUtyQixFQUFFLHNCQUFzQmtDLEtBQUssZUFDakQwRCxVQUFjLFdBQ2RVLFdBQWVqRixLQUFLckIsRUFBRSxzQkFBc0JrQyxLQUFLLGVBQ2pEcUUsY0FBaUIsV0FDakJDLGtCQUFtQixFQUNuQlYsWUFBZSxFQUNmQyxVQUFjLFlBQ2RDLGFBQWdCLEVBQ2hCQyxpQkFBbUIsRUFDbkJDLFNBQWE3RSxLQUFLckIsRUFBRSxvQkFBb0JrQyxLQUFLLGFBQzdDdUUsWUFBZ0IsU0FDaEJDLFNBQWEsR0FHZnJGLEtBQUtvRSxPQUFPa0IsZUFBZ0J0RixLQUFLcUUsZ0JBQWlCVSxHQUFHLE9BQU8sV0FDcERwRyxFQUFFcUIsTUFBTXNCLE9BQ2R2QixFQUFLeUMsUUFBUWxCLElBQUksTUFHWnRCLE1BRVJ1QixTQUFTLFNBQVNTLEdBQ2pCdUQsUUFBUUMsSUFBSXhELEVBQU1oQyxLQUFLcUUsZUFBZUUsVUFBVXZFLEtBQUtxRSxlQUFlYSxvQkFBcUJsRCxHQUN6RixJQUFJeUQsR0FBTzlHLEVBQUVtRyxXQUFXWSxjQUN2QjFGLEtBQUtxRSxlQUFlRSxVQUNwQnZFLEtBQUtxRSxlQUFlYSxjQUNwQmxELEVBYUQsT0FYQWhDLE1BQUtvRSxPQUFPckMsS0FBSyxZQUFXLEdBRTVCL0IsS0FBS3dDLFFBQVFsQixJQUFJbUUsR0FDakJ6RixLQUFLb0UsT0FBTzlDLElBQUszQyxFQUFFbUcsV0FBV2EsV0FBVzNGLEtBQUtxRSxlQUFlQyxXQUFZbUIsR0FBTyxJQUFNOUcsRUFBRW1HLFdBQVdjLFdBQ2xHNUYsS0FBS3FFLGVBQWVZLFdBQ3BCUSxJQU1NekYsUUFPUmxCLEVBQUdFLE1BQU1FLFVBQ1RFLEtBQUssY0FDTFUsV0FBVyxXQUNWLEdBQUlDLEdBQU9DLElBc0JYLE9BckJBbEIsR0FBR0UsTUFBTUssS0FBS2MsVUFBVUwsV0FBV00sTUFBTUosS0FBS0UsV0FDMUN2QixFQUFFLDZCQUE2QnVGLE9BQVMsR0FDM0N2RixFQUFFLDZCQUE2QndGLEtBQUsscUNBRXJDbkUsS0FBS29FLE9BQVVwRSxLQUFLckIsRUFBRyxpQkFDdkJxQixLQUFLd0MsUUFBVXhDLEtBQUtyQixFQUFHLG1CQUN2QnFCLEtBQUtxRSxnQkFDRlksV0FBZWpGLEtBQUtyQixFQUFFLHNCQUFzQmtDLEtBQUssZUFDakRxRSxjQUFpQixXQUNqQlYsU0FBYXhFLEtBQUt3QyxRQUNsQjJDLGtCQUFtQixFQUNuQlAsaUJBQW1CLEVBQ25CUSxZQUFnQixTQUNoQkMsU0FBYSxHQUdmckYsS0FBS29FLE9BQU95QixXQUFZN0YsS0FBS3FFLGdCQUFpQlUsR0FBRyxPQUFPLFdBQ2hEcEcsRUFBRXFCLE1BQU1zQixPQUNkdkIsRUFBS3lDLFFBQVFsQixJQUFJLE1BR2J0QixNQUVQdUIsU0FBUyxTQUFTUyxHQUNsQixHQUFJOEQsR0FBT25ILEVBQUVtRyxXQUFXaUIsVUFBVy9GLEtBQUtxRSxlQUFlYSxjQUFlbEQsRUFJdEUsT0FIQWhDLE1BQUtvRSxPQUFPckMsS0FBSyxZQUFXLEdBQzVCL0IsS0FBS3dDLFFBQVFsQixJQUFJVSxHQUNqQmhDLEtBQUtvRSxPQUFPOUMsSUFBSzNDLEVBQUVtRyxXQUFXYyxXQUFZNUYsS0FBS3FFLGVBQWVZLFdBQVlhLElBQ25FOUYsUUFPUmxCLEVBQUdFLE1BQU1FLFVBQ1RFLEtBQUssZUFDTFUsV0FBVyxXQUNWaEIsRUFBR0UsTUFBTUssS0FBS2MsVUFBVUwsV0FBV00sTUFBTUosS0FBS0UsV0FDOUNGLEtBQUtvRSxPQUFTcEUsS0FBS3JCLEVBQUUsaUJBQWlCcUgsUUFBUUMsaUJBRS9DMUUsU0FBUyxTQUFVUyxHQUNsQmhDLEtBQUtvRSxPQUFPckMsS0FBSyxZQUFXLEdBQzVCL0IsS0FBS29FLE9BQU82QixjQUFlLFFBQVNqRSxJQUVyQ1IsT0FBTyxXQUNON0MsRUFBRyxRQUFTdUgsSUFBSywwQkFTbEJwSCxFQUFHRSxNQUFNRSxVQUNURSxLQUFLLFdBQ0xVLFdBQVcsV0FDVmhCLEVBQUdFLE1BQU1LLEtBQUtjLFVBQVVMLFdBQVdNLE1BQU1KLEtBQUtFLFdBRTlDRixLQUFLb0UsT0FBU3BFLEtBQUtyQixFQUFFLFlBQVlvRCxLQUFNLFlBQVksR0FFbkQvQixLQUFLb0UsT0FBT1csR0FBRyxnQkFBaUIsU0FBU3RELEdBQ3hCLElBQVhBLEVBQUUwRSxPQUEwQixJQUFYMUUsRUFBRTBFLE9BQ3ZCMUUsRUFBRTJFLHFCQUtMN0UsU0FBUyxTQUFVUyxHQUNsQmhDLEtBQUtvRSxPQUFPckMsS0FBTSxZQUFZLEdBQVFULElBQUlVLE1BYTVDbEQsRUFBR0UsTUFBTUUsVUFDUkUsS0FBSyxXQUNMVSxXQUFXLFdBQ1ZoQixFQUFHRSxNQUFNSyxLQUFLYyxVQUFVTCxXQUFXTSxNQUFNSixLQUFLRSxXQUU5Q0YsS0FBS29FLE9BQVNwRSxLQUFLckIsRUFBRSxxQkFBcUJvRCxLQUFNLFlBQVksSUFFN0RSLFNBQVMsU0FBVVMsR0FDbEIsR0FBSWpDLEdBQU9DLElBQ1hBLE1BQUtvRSxPQUFPckMsS0FBTSxZQUFZLEdBQVFULElBQUlVLEdBQ3JDckQsRUFBRTBILFFBQVFyRSxHQUNkckQsRUFBRTJCLEtBQU0wQixFQUFPLFNBQVVzRSxFQUFLaEYsR0FDN0J2QixFQUFLcEIsRUFBRyw0QkFBNEIyQyxFQUFJLE1BQ3RDUyxLQUFNLFdBQVUsS0FHbkIvQixLQUFLckIsRUFBRyw0QkFBNEJxRCxFQUFNLE1BQ3hDRCxLQUFNLFdBQVUsTUFRckJqRCxFQUFHRSxNQUFNRSxVQUNSRSxLQUFLLFFBQ0xVLFdBQVcsV0FDVixHQUFJeUcsR0FBUUMsQ0FDWjFILEdBQUdFLE1BQU1LLEtBQUtjLFVBQVVMLFdBQVdNLE1BQU1KLEtBQUtFLFdBRTlDRixLQUFLckIsRUFBRSxrQkFBa0JvRCxLQUFNLFlBQVksR0FDM0N3RCxRQUFRQyxJQUFJeEYsS0FBS3JCLEVBQUUsMkJBQTJCdUYsUUFDekNsRSxLQUFLckIsRUFBRSwyQkFBMkJ1RixTQUN0Q3FDLEVBQVN2RyxLQUFLckIsRUFBRSxpQkFDaEJxQixLQUFLckIsRUFBRSxrQkFBa0JvRyxHQUFHLFNBQVMsU0FBU3RELEdBRTdDK0UsRUFBVzdILEVBQUVxQixNQUFNeUcsR0FBRywyQkFDdEJGLEVBQ0V4RSxLQUFLLFlBQWN5RSxHQUNuQnpFLEtBQUssWUFBY3lFLE9BS3hCakYsU0FBUyxTQUFVUyxHQUNsQmhDLEtBQUtyQixFQUFFLGtCQUFrQm9ELEtBQU0sWUFBWSxHQUMzQy9CLEtBQUtyQixFQUFFLHlCQUF5QnFELEVBQU0sTUFDcENELEtBQU0sV0FBVyxNQU9yQmpELEVBQUdFLE1BQU1FLFVBQ1JFLEtBQUssU0FDTFUsV0FBVyxXQUNWaEIsRUFBR0UsTUFBTUssS0FBS2MsVUFBVUwsV0FBV00sTUFBTUosS0FBS0UsV0FFOUNGLEtBQUtvRSxPQUFTcEUsS0FBS3JCLEVBQUUsVUFBVW9ELEtBQU0sWUFBWSxJQUVsRFIsU0FBUyxTQUFVUyxHQUNqQmhDLEtBQUtvRSxPQUFPckMsS0FBTSxZQUFZLEdBQVFULElBQUlVLE1BTzVDbEQsRUFBR0UsTUFBTUUsVUFDUkUsS0FBSyxhQUNMVSxXQUFXLFdBQ1ZoQixFQUFHRSxNQUFNSyxLQUFLYyxVQUFVTCxXQUFXTSxNQUFNSixLQUFLRSxXQUU5Q0YsS0FBS3JCLEVBQUUsa0JBQWtCb0QsS0FBTSxZQUFZLElBRTVDUixTQUFTLFNBQVVTLEdBQ25CaEMsS0FBS3JCLEVBQUUsa0JBQWtCb0QsS0FBTSxZQUFZLEdBQzNDL0IsS0FBS3JCLEVBQUUseUJBQXlCcUQsRUFBTSxNQUNwQ0QsS0FBTSxXQUFXLE9BS2xCRSxPQUFRcEQ7Q0MzV1osU0FBVUYsRUFBRUcsR0FJWCxHQUFLLG1CQUF1QjRILGdCQUFpQixDQUU1QyxHQUFJQyxHQUF1QkQsZUFBZUUsS0FDekNDLEVBQXVCSCxlQUFlSSxLQUN0Q0MsRUFBeUJMLGVBQWVNLE1BR3pDTixnQkFBZUUsS0FBTyxTQUFVbEQsR0FDL0IsR0FBSTNDLEdBQVdrRyxFQUFLQyxDQUtwQlAsR0FBcUJ2RyxNQUFPSixLQUFNRSxXQUdsQ2EsRUFBWSxFQUNVLGdCQUFYLEtBQ1ZBLEVBQVlvRyxTQUFVbkgsS0FBS29ILE1BQU8xRCxLQUVuQ3VELEVBQU10SSxFQUFFLFNBQVdvQyxHQUVka0csRUFBSVIsR0FBRyxtQkFDWFMsRUFBYXBJLEVBQUdDLEtBQUsyQyxVQUNWdUYsRUFBSVIsR0FBRyxvQkFDbEJTLEVBQWFwSSxFQUFHQyxLQUFLNEMsVUFFZnVGLElBR1BsSCxLQUFLcUgsYUFBZSxHQUFJSCxJQUN2QjFILEdBQUl5SCxFQUFJdEUsSUFBSSxHQUNaNUIsVUFBV0EsTUFLYjJGLGVBQWVNLE9BQVMsV0FFdkIsUUFER2hILEtBQUtxSCxjQUFnQnJILEtBQUtxSCxhQUFhN0YsU0FDbkN1RixFQUF1QjNHLE1BQU9KLEtBQU1FLFlBRTVDd0csZUFBZUksS0FBTyxXQUVyQixRQURHOUcsS0FBS3FILGNBQWdCckgsS0FBS3FILGFBQWE3RixTQUNuQ3FGLEVBQXFCekcsTUFBT0osS0FBTUUsWUFLM0MsTUFFQSxJQXVPS3lHLElBMkxGMUUsT0FBUUMsT0FBT3JEO0NDM2RuQixTQUFVRixHQUNUQSxFQUFFLHdCQUF3Qm9HLEdBQUcsWUFBWSxTQUFTdEQsR0FDakQsR0FDQzZGLElBRFczSSxFQUFFcUIsTUFDTnJCLEVBQUVxQixNQUFNdUgsS0FBSyxPQUNwQkMsR0FBSy9GLEVBQUVnRyxRQUNQQyxJQUFPSixFQUFLcEQsT0FDWnlELEtBQU9oSixFQUFFcUIsTUFBTTRILFFBQVVGLElBRTFCSixFQUFLaEgsS0FBTSxTQUFTQyxFQUFFZixHQUNqQmdJLEdBQUtHLEtBQUtwSCxFQUNiNUIsRUFBRWEsR0FBSXFJLE9BRU5sSixFQUFFYSxHQUFJc0ksWUFJUDdGIiwiZmlsZSI6ImFjZi1xdWlja2VkaXQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCAkLCBleHBvcnRzICl7XG5cdGV4cG9ydHMuYWNmX3F1aWNrZWRpdCA9IHFlID0ge1xuXHRcdGZvcm06e30sXG5cdFx0ZmllbGQ6IHtcblx0XHRcdF90eXBlczoge30sLy8gZmllbGQgdHlwZXNcblx0XHRcdGFkZF90eXBlOmZ1bmN0aW9uKGEpIHtcblx0XHRcdFx0cWUuZmllbGQuX3R5cGVzW2EudHlwZV0gPSBxZS5maWVsZC5WaWV3LmV4dGVuZChhKTtcblx0XHRcdFx0cmV0dXJuIHFlLmZpZWxkLl90eXBlc1thLnR5cGVdO1xuXHRcdFx0fSxcblx0XHRcdGZhY3Rvcnk6ZnVuY3Rpb24oZWwsY29udHJvbGxlcil7XG5cdFx0XHRcdHZhciB0eXBlID0gJChlbCkuYXR0cignZGF0YS1maWVsZC10eXBlJyksXG5cdFx0XHRcdFx0dHlwZXMgPSBxZS5maWVsZC5fdHlwZXM7XG5cblx0XHRcdFx0ZmllbGRfY2xhc3MgPSB0eXBlIGluIHR5cGVzID8gdHlwZXNbdHlwZV0gOiBxZS5maWVsZC5WaWV3O1xuXHRcdFx0XHRyZXR1cm4gbmV3IGZpZWxkX2NsYXNzKHtcblx0XHRcdFx0XHRlbDpcdFx0XHRlbCxcblx0XHRcdFx0XHRjb250cm9sbGVyOlx0Y29udHJvbGxlcixcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fSxcblx0fTtcblx0cWUuZm9ybS5WaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuXHRcdGluaXRpYWxpemU6ZnVuY3Rpb24oKXtcblxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0XHR0aGlzLm9wdGlvbnMgPSBhcmd1bWVudHNbMF07XG5cblx0XHRcdEJhY2tib25lLlZpZXcucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXG5cdFx0XHR0aGlzLmZpZWxkcyA9IHt9O1xuXG5cdFx0XHR0aGlzLiQoJy5pbmxpbmUtZWRpdC1jb2wtcWVkIFtkYXRhLWtleV0nKS5lYWNoKGZ1bmN0aW9uKGksZWwpe1xuXHRcdFx0XHR2YXIgZmllbGQgPSBxZS5maWVsZC5mYWN0b3J5KCBlbCwgdGhpcyApO1xuXHRcdFx0XHRzZWxmLmZpZWxkc1sgZmllbGQua2V5IF0gPSBmaWVsZDtcblx0XHRcdH0pO1xuXHRcdFx0Ly8gbG9hZCB2YWx1ZXNcblx0XHRcdHRoaXMubG9hZFZhbHVlcygpO1xuXG5cdFx0fSxcblx0XHRsb2FkVmFsdWVzOiBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRcdCQucG9zdCh7XG5cdFx0XHRcdHVybDphamF4dXJsLFxuXHRcdFx0XHRkYXRhOntcblx0XHRcdFx0XHQnYWN0aW9uJyA6ICdnZXRfYWNmX3Bvc3RfbWV0YScsXG5cdFx0XHRcdFx0J29iamVjdF9pZCcgOiB0aGlzLm9wdGlvbnMub2JqZWN0X2lkLFxuXHRcdFx0XHRcdCdhY2ZfZmllbGRfa2V5cycgOiBPYmplY3Qua2V5cyh0aGlzLmZpZWxkcylcblx0XHRcdFx0fSxcblx0XHRcdFx0c3VjY2VzczpmdW5jdGlvbihyZXNwb25zZSl7XG5cdFx0XHRcdFx0Xy5lYWNoKHJlc3BvbnNlLGZ1bmN0aW9uKCB2YWwsIGtleSApe1xuXHRcdFx0XHRcdFx0c2VsZi5maWVsZHNba2V5XS5zZXRWYWx1ZSggdmFsICk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0Ly8gdG9kbzogYmluZCB2YWxpZGF0aW9uXG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9LFxuXHRcdHVubG9hZDpmdW5jdGlvbihlKXtcblx0XHRcdF8uZWFjaCh0aGlzLmZpZWxkcyxmdW5jdGlvbihmaWVsZCl7XG5cdFx0XHRcdGZpZWxkLnVubG9hZCgpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9KTtcblx0cWUuZm9ybS5RdWlja0VkaXQgPSBxZS5mb3JtLlZpZXcuZXh0ZW5kKHtcblxuXHR9KTtcblxuXHRxZS5mb3JtLkJ1bGtFZGl0ID0gcWUuZm9ybS5WaWV3LmV4dGVuZCh7XG5cdFx0Ly8gdG9kbzogZG8gbm90IGNoYW5nZVxuXHR9KTtcblxuXG5cblx0cWUuZmllbGQuVmlldyA9IHdwLm1lZGlhLlZpZXcuZXh0ZW5kKHtcblx0XHRpbml0aWFsaXplOmZ1bmN0aW9uKCl7XG5cdFx0XHRCYWNrYm9uZS5WaWV3LnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdHRoaXMua2V5ID0gdGhpcy4kZWwuYXR0cignZGF0YS1rZXknKTtcblx0XHRcdHRoaXMuJCgnaW5wdXQnKS5wcm9wKCAncmVhZG9ubHknLCB0cnVlICk7XG5cblx0XHR9LFxuXHRcdHNldFZhbHVlOmZ1bmN0aW9uKHZhbHVlKXtcblx0XHRcdHRoaXMuJCgnaW5wdXQnKS5wcm9wKCAncmVhZG9ubHknLCBmYWxzZSApO1xuXHRcdFx0dGhpcy4kKCdpbnB1dCcpLnZhbCh2YWx1ZSk7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9LFxuXHRcdHVubG9hZDpmdW5jdGlvbigpe31cblx0fSk7XG5cblxufSkoalF1ZXJ5LHdpbmRvdyk7XG4iLCIoZnVuY3Rpb24oICQsIHFlICl7XG5cdHZhciBmaWxlX3R5cGUgPSB7XG5cdFx0dHlwZTonZmlsZScsXG5cdFx0bWVkaWFGcmFtZVR5cGU6JycsXG5cdFx0ZXZlbnRzOntcblx0XHRcdCdjbGljayAuc2VsZWN0LW1lZGlhJyA6ICdzZWxlY3RGaWxlJyxcblx0XHRcdCdjbGljayAucmVtb3ZlLW1lZGlhJyA6ICdyZW1vdmVGaWxlJyxcblx0XHR9LFxuXHRcdGluaXRpYWxpemU6ZnVuY3Rpb24oKSB7XG5cblx0XHRcdHFlLmZpZWxkLlZpZXcucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO1xuXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXMsXG5cdFx0XHRcdCRoaWRkZW4gPSB0aGlzLiQoJ1t0eXBlPVwiaGlkZGVuXCJdJyksXG5cdFx0XHRcdHBvc3RfaWQgPSBhY2YuZ2V0KCdwb3N0X2lkJyk7XG5cblx0XHRcdHRoaXMubWVkaWFGcmFtZU9wdHMgPSB7XG5cdFx0XHRcdGZpZWxkXHRcdDogdGhpcy5rZXksXG5cdFx0XHRcdG11bHRpcGxlXHQ6IGZhbHNlLFxuXHRcdFx0XHRwb3N0X2lkXHRcdDogcG9zdF9pZCxcblx0XHRcdFx0bGlicmFyeVx0XHQ6ICRoaWRkZW4uYXR0cignZGF0YS1saWJyYXJ5JyksXG5cdFx0XHRcdG1vZGVcdFx0OidzZWxlY3QnLFxuXHRcdFx0XHR0eXBlXHRcdDogdGhpcy5tZWRpYUZyYW1lVHlwZSxcblx0XHRcdFx0c2VsZWN0XHRcdDogZnVuY3Rpb24gKCBhdHRhY2htZW50LCBpICkge1xuXHRcdFx0XHRcdGlmICggISBhdHRhY2htZW50ICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRzZWxmLnNldFZhbHVlKCBhdHRhY2htZW50LmdldCgnaWQnKSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdFx0aWYgKCAkaGlkZGVuLmRhdGEoJ21pbWVfdHlwZXMnKSApIHtcblx0XHRcdFx0dGhpcy5tZWRpYUZyYW1lT3B0cy5taW1lX3R5cGVzID0gJGhpZGRlbi5kYXRhKCdtaW1lX3R5cGVzJyk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIHRoaXMuJCgnLnNlbGVjdC1tZWRpYScpLm9uKCdjbGljaycsZnVuY3Rpb24oZSl7XG5cdFx0XHQvLyBcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdC8vIFx0c2VsZi5zZWxlY3RGaWxlKCk7XG5cdFx0XHQvLyBcdGNvbnNvbGUubG9nKHRoaXMpO1xuXHRcdFx0Ly8gfSk7XG4vL1x0XHRcdGNvbnNvbGUubG9nKHRoaXMuJCgnLnNlbGVjdC1tZWRpYScpKVxuXHRcdH0sXG5cdFx0c2VsZWN0RmlsZTpmdW5jdGlvbihlKXtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdC8vIENyZWF0ZSBhIG5ldyBtZWRpYSBmcmFtZVxuXHRcdFx0dmFyIG1lZGlhX2ZyYW1lID0gYWNmLm1lZGlhLnBvcHVwKCB0aGlzLm1lZGlhRnJhbWVPcHRzICk7XG5cblx0XHRcdC8vIHNldCBwb3N0IGlkLCBzbyBuZXcgdXBsb2FkcyBhcmUgYXR0YWNoZWQgdG8gZWRpdGVkIHBvc3Rcblx0XHRcdGlmICggYWNmLmlzc2V0KHdpbmRvdywnd3AnLCdtZWRpYScsJ3ZpZXcnLCdzZXR0aW5ncycsJ3Bvc3QnKSAmJiAkLmlzTnVtZXJpYyggdGhpcy5tZWRpYUZyYW1lT3B0cy5wb3N0X2lkICkgKSB7XG5cblx0XHRcdFx0d3AubWVkaWEudmlldy5zZXR0aW5ncy5wb3N0LmlkID0gdGhpcy5tZWRpYUZyYW1lT3B0cy5wb3N0X2lkO1xuXG5cdFx0XHR9XG5cblx0XHR9LFxuXHRcdHJlbW92ZUZpbGU6ZnVuY3Rpb24oZSl7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHR0aGlzLnNldFZhbHVlKCcnKTtcblx0XHR9LFxuXHRcdHNldFZhbHVlOmZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0XHR0aGlzLiQoJ1t0eXBlPVwiaGlkZGVuXCJdJykudmFsKHZhbHVlKTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblx0fTtcblxuXHQvKipcblx0ICpcdGZpZWxkIHR5cGUgZmlsZVxuXHQgKi9cblx0cWUuZmllbGQuYWRkX3R5cGUoIGZpbGVfdHlwZSApO1xuXG5cdC8qKlxuXHQgKlx0ZmllbGQgdHlwZSBpbWFnZVxuXHQgKi9cblx0cWUuZmllbGQuYWRkX3R5cGUoIF8uZXh0ZW5kKGZpbGVfdHlwZSx7dHlwZTonaW1hZ2UnLG1lZGlhRnJhbWVUeXBlOidpbWFnZSd9KSApO1xuXG5cdHFlLmZpZWxkLmFkZF90eXBlKCBmaWxlX3R5cGUgKTtcblxuXHQvKipcblx0ICpcdGZpZWxkIHR5cGUgcmFuZ2Vcblx0ICovXG5cdHFlLmZpZWxkLmFkZF90eXBlKCB7XG5cdFx0IHR5cGU6J3JhbmdlJyxcblx0XHQgZXZlbnRzOntcblx0XHRcdCAnY2hhbmdlIFt0eXBlPVwicmFuZ2VcIl0nXHRcdDogJ2FkYXB0TnVtYmVyJyxcblx0XHRcdCAnbW91c2Vtb3ZlIFt0eXBlPVwicmFuZ2VcIl0nXHRcdDogJ2FkYXB0TnVtYmVyJyxcblx0XHRcdCAnY2hhbmdlIFt0eXBlPVwibnVtYmVyXCJdJ1x0XHQ6ICdhZGFwdFJhbmdlJyxcblx0XHRcdCAnbW91c2Vtb3ZlIFt0eXBlPVwibnVtYmVyXCJdJ1x0OiAnYWRhcHRSYW5nZScsXG5cdFx0IH0sXG5cdFx0IGFkYXB0TnVtYmVyOmZ1bmN0aW9uKCl7XG5cdFx0XHQgdGhpcy4kKCdbdHlwZT1cIm51bWJlclwiXScpLnZhbCggdGhpcy4kKCdbdHlwZT1cInJhbmdlXCJdJykudmFsKCkgKTtcblx0XHQgfSxcblx0XHQgYWRhcHRSYW5nZTpmdW5jdGlvbigpe1xuXHRcdFx0IHRoaXMuJCgnW3R5cGU9XCJyYW5nZVwiXScpLnZhbCggdGhpcy4kKCdbdHlwZT1cIm51bWJlclwiXScpLnZhbCgpICk7XG5cdFx0IH1cblx0IH0gKTtcblxuXG5cdC8qKlxuICBcdCAqXHRmaWVsZCB0eXBlIGRhdGVfcGlja2VyXG4gIFx0ICovXG4gIFx0cWUuZmllbGQuYWRkX3R5cGUoIHtcbiBcdFx0dHlwZTonZGF0ZV9waWNrZXInLFxuXHRcdGluaXRpYWxpemU6ZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdFx0XHRxZS5maWVsZC5WaWV3LnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtcblx0XHRcdGlmKCAkKCdib2R5ID4gI3VpLWRhdGVwaWNrZXItZGl2JykubGVuZ3RoID4gMCApIHtcblx0XHRcdFx0JCgnYm9keSA+ICN1aS1kYXRlcGlja2VyLWRpdicpLndyYXAoJzxkaXYgY2xhc3M9XCJhY2YtdWktZGF0ZXBpY2tlclwiIC8+Jyk7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLiRpbnB1dFx0XHQ9IHRoaXMuJCggJ1t0eXBlPVwidGV4dFwiXScgKTtcblx0XHRcdHRoaXMuJGhpZGRlblx0PSB0aGlzLiQoICdbdHlwZT1cImhpZGRlblwiXScgKTtcblx0XHRcdHRoaXMuZGF0ZVBpY2tlckFyZ3MgPSB7XG5cdFx0XHRcdFx0ZGF0ZUZvcm1hdFx0XHQ6IHRoaXMuJCgnW2RhdGEtZGF0ZV9mb3JtYXRdJykuZGF0YSgnZGF0ZV9mb3JtYXQnKSxcblx0XHRcdFx0XHRhbHRGb3JtYXRcdFx0OiAneXltbWRkJyxcblx0XHRcdFx0XHRhbHRGaWVsZFx0XHQ6IHRoaXMuJGhpZGRlbixcblx0XHRcdFx0XHRjaGFuZ2VZZWFyXHRcdDogdHJ1ZSxcblx0XHRcdFx0XHR5ZWFyUmFuZ2VcdFx0OiBcIi0xMDA6KzEwMFwiLFxuXHRcdFx0XHRcdGNoYW5nZU1vbnRoXHRcdDogdHJ1ZSxcblx0XHRcdFx0XHRzaG93QnV0dG9uUGFuZWxcdDogdHJ1ZSxcblx0XHRcdFx0XHRmaXJzdERheVx0XHQ6IHRoaXMuJCgnW2RhdGEtZmlyc3RfZGF5XScpLmRhdGEoJ2ZpcnN0X2RheScpXG5cdFx0XHRcdH07XG5cdFx0XHR0aGlzLiRpbnB1dC5kYXRlcGlja2VyKCB0aGlzLmRhdGVQaWNrZXJBcmdzICkub24oJ2JsdXInLGZ1bmN0aW9uKCl7XG5cdFx0XHRcdGlmICggISAkKHRoaXMpLnZhbCgpICkge1xuXHRcdFx0XHRcdHNlbGYuJGhpZGRlbi52YWwoJycpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH0sXG5cdFx0c2V0VmFsdWU6ZnVuY3Rpb24odmFsdWUpIHtcblx0XHRcdHRoaXMuJGlucHV0LnByb3AoJ3JlYWRvbmx5JyxmYWxzZSk7XG5cdFx0XHR0aGlzLiRpbnB1dC5kYXRlcGlja2VyKCAnc2V0RGF0ZScsICQuZGF0ZXBpY2tlci5wYXJzZURhdGUoIHRoaXMuZGF0ZVBpY2tlckFyZ3MuYWx0Rm9ybWF0LCB2YWx1ZSApICk7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9XG4gXHR9KTtcblxuXHQvKipcbiBcdCAqXHRmaWVsZCB0eXBlIGRhdGVfdGltZV9waWNrZXJcbiBcdCAqL1xuIFx0cWUuZmllbGQuYWRkX3R5cGUoIHtcblx0XHR0eXBlOidkYXRlX3RpbWVfcGlja2VyJyxcblx0XHRpbml0aWFsaXplOmZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdFx0cWUuZmllbGQuVmlldy5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7XG5cdFx0XHRpZiggJCgnYm9keSA+ICN1aS1kYXRlcGlja2VyLWRpdicpLmxlbmd0aCA+IDAgKSB7XG5cdFx0XHRcdCQoJ2JvZHkgPiAjdWktZGF0ZXBpY2tlci1kaXYnKS53cmFwKCc8ZGl2IGNsYXNzPVwiYWNmLXVpLWRhdGVwaWNrZXJcIiAvPicpO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy4kaW5wdXRcdFx0PSB0aGlzLiQoICdbdHlwZT1cInRleHRcIl0nICk7XG5cdFx0XHR0aGlzLiRoaWRkZW5cdD0gdGhpcy4kKCAnW3R5cGU9XCJoaWRkZW5cIl0nICk7XG5cdFx0XHR0aGlzLmRhdGVQaWNrZXJBcmdzID0ge1xuXHRcdFx0XHRcdGFsdEZpZWxkXHRcdFx0OiB0aGlzLiRoaWRkZW4sXG5cdFx0XHRcdFx0ZGF0ZUZvcm1hdFx0XHRcdDogdGhpcy4kKCdbZGF0YS1kYXRlX2Zvcm1hdF0nKS5kYXRhKCdkYXRlX2Zvcm1hdCcpLFxuXHRcdFx0XHRcdGFsdEZvcm1hdFx0XHRcdDogJ3l5LW1tLWRkJyxcblx0XHRcdFx0XHR0aW1lRm9ybWF0XHRcdFx0OiB0aGlzLiQoJ1tkYXRhLXRpbWVfZm9ybWF0XScpLmRhdGEoJ3RpbWVfZm9ybWF0JyksXG5cdFx0XHRcdFx0YWx0VGltZUZvcm1hdFx0XHQ6ICdISDptbTpzcycsXG5cdFx0XHRcdFx0YWx0RmllbGRUaW1lT25seVx0OiBmYWxzZSxcblx0XHRcdFx0XHRjaGFuZ2VZZWFyXHRcdFx0OiB0cnVlLFxuXHRcdFx0XHRcdHllYXJSYW5nZVx0XHRcdDogXCItMTAwOisxMDBcIixcblx0XHRcdFx0XHRjaGFuZ2VNb250aFx0XHRcdDogdHJ1ZSxcblx0XHRcdFx0XHRzaG93QnV0dG9uUGFuZWxcdFx0OiB0cnVlLFxuXHRcdFx0XHRcdGZpcnN0RGF5XHRcdFx0OiB0aGlzLiQoJ1tkYXRhLWZpcnN0X2RheV0nKS5kYXRhKCdmaXJzdF9kYXknKSxcblx0XHRcdFx0XHRjb250cm9sVHlwZVx0XHRcdDogJ3NlbGVjdCcsXG5cdFx0XHRcdFx0b25lTGluZVx0XHRcdFx0OiB0cnVlXG5cdFx0XHRcdH07XG5cblx0XHRcdHRoaXMuJGlucHV0LmRhdGV0aW1lcGlja2VyKCB0aGlzLmRhdGVQaWNrZXJBcmdzICkub24oJ2JsdXInLGZ1bmN0aW9uKCl7XG5cdFx0XHRcdGlmICggISAkKHRoaXMpLnZhbCgpICkge1xuXHRcdFx0XHRcdHNlbGYuJGhpZGRlbi52YWwoJycpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH0sXG5cdFx0c2V0VmFsdWU6ZnVuY3Rpb24odmFsdWUpIHtcblx0XHRcdGNvbnNvbGUubG9nKHZhbHVlLHRoaXMuZGF0ZVBpY2tlckFyZ3MuYWx0Rm9ybWF0LHRoaXMuZGF0ZVBpY2tlckFyZ3MuYWx0VGltZUZvcm1hdCx0eXBlb2YgdmFsdWUpO1xuXHRcdFx0dmFyIGRhdGUgPSAkLmRhdGVwaWNrZXIucGFyc2VEYXRlVGltZShcblx0XHRcdFx0dGhpcy5kYXRlUGlja2VyQXJncy5hbHRGb3JtYXQsXG5cdFx0XHRcdHRoaXMuZGF0ZVBpY2tlckFyZ3MuYWx0VGltZUZvcm1hdCxcblx0XHRcdFx0dmFsdWVcblx0XHRcdCk7XG5cdFx0XHR0aGlzLiRpbnB1dC5wcm9wKCdyZWFkb25seScsZmFsc2UpO1xuXHRcdFx0Ly8qXG5cdFx0XHR0aGlzLiRoaWRkZW4udmFsKGRhdGUpO1xuXHRcdFx0dGhpcy4kaW5wdXQudmFsKCAkLmRhdGVwaWNrZXIuZm9ybWF0RGF0ZSh0aGlzLmRhdGVQaWNrZXJBcmdzLmRhdGVGb3JtYXQsIGRhdGUpICsnICcgKyAkLmRhdGVwaWNrZXIuZm9ybWF0VGltZShcblx0XHRcdFx0dGhpcy5kYXRlUGlja2VyQXJncy50aW1lRm9ybWF0LFxuXHRcdFx0XHRkYXRlXG5cdFx0XHQpKTtcblx0XHRcdC8qL1xuXHRcdFx0Ly8gd2lsbCBzZXQgZm9ybSBkaXJ0eSBpZiBkb25lIGxpa2UgdGhpc1xuXHRcdFx0dGhpcy4kaW5wdXQuZGF0ZXBpY2tlciggJ3NldERhdGUnLCBkYXRlICk7XG5cdFx0XHQvLyovXG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9XG5cdH0pO1xuXG5cdC8qKlxuIFx0ICpcdGZpZWxkIHR5cGUgdGltZV9waWNrZXJcbiBcdCAqL1xuIFx0cWUuZmllbGQuYWRkX3R5cGUoIHtcblx0XHR0eXBlOid0aW1lX3BpY2tlcicsXG5cdFx0aW5pdGlhbGl6ZTpmdW5jdGlvbigpIHtcblx0XHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRcdHFlLmZpZWxkLlZpZXcucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO1xuXHRcdFx0aWYoICQoJ2JvZHkgPiAjdWktZGF0ZXBpY2tlci1kaXYnKS5sZW5ndGggPiAwICkge1xuXHRcdFx0XHQkKCdib2R5ID4gI3VpLWRhdGVwaWNrZXItZGl2Jykud3JhcCgnPGRpdiBjbGFzcz1cImFjZi11aS1kYXRlcGlja2VyXCIgLz4nKTtcblx0XHRcdH1cblx0XHRcdHRoaXMuJGlucHV0XHRcdD0gdGhpcy4kKCAnW3R5cGU9XCJ0ZXh0XCJdJyApO1xuXHRcdFx0dGhpcy4kaGlkZGVuXHQ9IHRoaXMuJCggJ1t0eXBlPVwiaGlkZGVuXCJdJyApO1xuXHRcdFx0dGhpcy5kYXRlUGlja2VyQXJncyA9IHtcbiBcdFx0XHRcdFx0dGltZUZvcm1hdFx0XHRcdDogdGhpcy4kKCdbZGF0YS10aW1lX2Zvcm1hdF0nKS5kYXRhKCd0aW1lX2Zvcm1hdCcpLFxuIFx0XHRcdFx0XHRhbHRUaW1lRm9ybWF0XHRcdDogJ0hIOm1tOnNzJyxcbiBcdFx0XHRcdFx0YWx0RmllbGRcdFx0XHQ6IHRoaXMuJGhpZGRlbixcbiBcdFx0XHRcdFx0YWx0RmllbGRUaW1lT25seVx0OiBmYWxzZSxcbiBcdFx0XHRcdFx0c2hvd0J1dHRvblBhbmVsXHRcdDogdHJ1ZSxcbiBcdFx0XHRcdFx0Y29udHJvbFR5cGVcdFx0XHQ6ICdzZWxlY3QnLFxuIFx0XHRcdFx0XHRvbmVMaW5lXHRcdFx0XHQ6IHRydWVcbiBcdFx0XHRcdH07XG5cbiBcdFx0XHR0aGlzLiRpbnB1dC50aW1lcGlja2VyKCB0aGlzLmRhdGVQaWNrZXJBcmdzICkub24oJ2JsdXInLGZ1bmN0aW9uKCl7XG4gXHRcdFx0XHRpZiAoICEgJCh0aGlzKS52YWwoKSApIHtcbiBcdFx0XHRcdFx0c2VsZi4kaGlkZGVuLnZhbCgnJyk7XG4gXHRcdFx0XHR9XG4gXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9LFxuIFx0XHRzZXRWYWx1ZTpmdW5jdGlvbih2YWx1ZSkge1xuXHRcdFx0dmFyIHRpbWUgPSAkLmRhdGVwaWNrZXIucGFyc2VUaW1lKCB0aGlzLmRhdGVQaWNrZXJBcmdzLmFsdFRpbWVGb3JtYXQsIHZhbHVlICk7XG5cdFx0XHR0aGlzLiRpbnB1dC5wcm9wKCdyZWFkb25seScsZmFsc2UpO1xuXHRcdFx0dGhpcy4kaGlkZGVuLnZhbCh2YWx1ZSk7XG5cdFx0XHR0aGlzLiRpbnB1dC52YWwoICQuZGF0ZXBpY2tlci5mb3JtYXRUaW1lKCB0aGlzLmRhdGVQaWNrZXJBcmdzLnRpbWVGb3JtYXQsIHRpbWUgKSApXG5cdFx0XHRyZXR1cm4gdGhpcztcbiBcdFx0fVxuXHR9KTtcblxuXHQvKipcbiBcdCAqXHRmaWVsZCB0eXBlIHRpbWVfcGlja2VyXG4gXHQgKi9cbiBcdHFlLmZpZWxkLmFkZF90eXBlKCB7XG5cdFx0dHlwZTonY29sb3JfcGlja2VyJyxcblx0XHRpbml0aWFsaXplOmZ1bmN0aW9uKCkge1xuXHRcdFx0cWUuZmllbGQuVmlldy5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7XG5cdFx0XHR0aGlzLiRpbnB1dCA9IHRoaXMuJCgnW3R5cGU9XCJ0ZXh0XCJdJykuZmlyc3QoKS53cENvbG9yUGlja2VyKCk7XG5cdFx0fSxcblx0XHRzZXRWYWx1ZTpmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHR0aGlzLiRpbnB1dC5wcm9wKCdyZWFkb25seScsZmFsc2UpO1xuXHRcdFx0dGhpcy4kaW5wdXQud3BDb2xvclBpY2tlciggJ2NvbG9yJywgdmFsdWUgKTtcblx0XHR9LFxuXHRcdHVubG9hZDpmdW5jdGlvbigpIHtcblx0XHRcdCQoICdib2R5JyApLm9mZiggJ2NsaWNrLndwY29sb3JwaWNrZXInICk7XG5cdFx0fVxuXHR9KTtcblxuXG5cblx0LyoqXG4gXHQgKlx0ZmllbGQgdHlwZSB0aW1lX3BpY2tlclxuIFx0ICovXG4gXHRxZS5maWVsZC5hZGRfdHlwZSgge1xuXHRcdHR5cGU6J3RleHRhcmVhJyxcblx0XHRpbml0aWFsaXplOmZ1bmN0aW9uKCkge1xuXHRcdFx0cWUuZmllbGQuVmlldy5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7XG5cblx0XHRcdHRoaXMuJGlucHV0ID0gdGhpcy4kKCd0ZXh0YXJlYScpLnByb3AoICdyZWFkb25seScsIHRydWUgKTtcblxuXHRcdFx0dGhpcy4kaW5wdXQub24oJ2tleWRvd24ga2V5dXAnLCBmdW5jdGlvbihlKSB7XG5cdFx0XHRcdGlmICggZS53aGljaCA9PSAxMyB8fCBlLndoaWNoID09IDI3ICkge1xuXHRcdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4vL1x0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0c2V0VmFsdWU6ZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdFx0dGhpcy4kaW5wdXQucHJvcCggJ3JlYWRvbmx5JywgZmFsc2UgKS52YWwodmFsdWUpO1xuXHRcdH1cblx0fSk7XG5cblx0LyoqXG4gXHQgKlx0ZmllbGQgdHlwZSBjaG9pY2VcbiBcdCAqL1xuXHQvLyBUb2RvXG5cblx0LyoqXG4gXHQgKlx0ZmllbGQgdHlwZSBjaGVja2JveFxuIFx0ICovXG5cdC8vIFRvZG9cblx0cWUuZmllbGQuYWRkX3R5cGUoIHtcblx0XHR0eXBlOidjaGVja2JveCcsXG5cdFx0aW5pdGlhbGl6ZTpmdW5jdGlvbigpIHtcblx0XHRcdHFlLmZpZWxkLlZpZXcucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO1xuXG5cdFx0XHR0aGlzLiRpbnB1dCA9IHRoaXMuJCgnW3R5cGU9XCJjaGVja2JveFwiXScpLnByb3AoICdyZWFkb25seScsIHRydWUgKTtcblx0XHR9LFxuXHRcdHNldFZhbHVlOmZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRcdHRoaXMuJGlucHV0LnByb3AoICdyZWFkb25seScsIGZhbHNlICkudmFsKHZhbHVlKTtcblx0XHRcdGlmICggJC5pc0FycmF5KHZhbHVlKSApIHtcblx0XHRcdFx0JC5lYWNoKCB2YWx1ZSwgZnVuY3Rpb24oIGlkeCwgdmFsICkge1xuXHRcdFx0XHRcdHNlbGYuJCggJ1t0eXBlPVwiY2hlY2tib3hcIl1bdmFsdWU9XCInK3ZhbCsnXCJdJyApXG5cdFx0XHRcdFx0XHQucHJvcCggJ2NoZWNrZWQnLHRydWUpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMuJCggJ1t0eXBlPVwiY2hlY2tib3hcIl1bdmFsdWU9XCInK3ZhbHVlKydcIl0nIClcblx0XHRcdFx0XHQucHJvcCggJ2NoZWNrZWQnLHRydWUpO1xuXHRcdFx0fVxuIFx0XHR9XG5cdH0pO1xuXG5cdC8qKlxuIFx0ICpcdGZpZWxkIHR5cGUgcmFkaW9cbiBcdCAqL1xuXHRxZS5maWVsZC5hZGRfdHlwZSgge1xuXHRcdHR5cGU6J3JhZGlvJyxcblx0XHRpbml0aWFsaXplOmZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyICRvdGhlciwgaXNfb3RoZXI7XG5cdFx0XHRxZS5maWVsZC5WaWV3LnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtcblxuXHRcdFx0dGhpcy4kKCdbdHlwZT1cInJhZGlvXCJdJykucHJvcCggJ3JlYWRvbmx5JywgdHJ1ZSApO1xuXHRcdFx0Y29uc29sZS5sb2codGhpcy4kKCd1bC5hY2YtcmFkaW8tbGlzdC5vdGhlcicpLmxlbmd0aCk7XG5cdFx0XHRpZiAoIHRoaXMuJCgndWwuYWNmLXJhZGlvLWxpc3Qub3RoZXInKS5sZW5ndGggKSB7XG5cdFx0XHRcdCRvdGhlciA9IHRoaXMuJCgnW3R5cGU9XCJ0ZXh0XCJdJyk7XG5cdFx0XHRcdHRoaXMuJCgnW3R5cGU9XCJyYWRpb1wiXScpLm9uKCdjaGFuZ2UnLGZ1bmN0aW9uKGUpe1xuXHRcdFx0XHRcdC8vY29uc29sZS5sb2codGhpcywkKHRoaXMpLmlzKCc6Y2hlY2tlZCcpKVxuXHRcdFx0XHRcdGlzX290aGVyID0gJCh0aGlzKS5pcygnW3ZhbHVlPVwib3RoZXJcIl06Y2hlY2tlZCcpO1xuXHRcdFx0XHRcdCRvdGhlclxuXHRcdFx0XHRcdFx0LnByb3AoJ2Rpc2FibGVkJywgISBpc19vdGhlciApXG5cdFx0XHRcdFx0XHQucHJvcCgncmVhZG9ubHknLCAhIGlzX290aGVyICk7XG5cblx0XHRcdFx0fSlcblx0XHRcdH1cblx0XHR9LFxuXHRcdHNldFZhbHVlOmZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdHRoaXMuJCgnW3R5cGU9XCJyYWRpb1wiXScpLnByb3AoICdyZWFkb25seScsIGZhbHNlICk7XG5cdFx0XHR0aGlzLiQoJ1t0eXBlPVwicmFkaW9cIl1bdmFsdWU9XCInK3ZhbHVlKydcIl0nIClcblx0XHRcdFx0LnByb3AoICdjaGVja2VkJywgdHJ1ZSApO1xuIFx0XHR9XG5cdH0pO1xuXG5cdC8qKlxuIFx0ICpcdGZpZWxkIHR5cGUgc2VsZWN0XG4gXHQgKi9cblx0cWUuZmllbGQuYWRkX3R5cGUoIHtcblx0XHR0eXBlOidzZWxlY3QnLFxuXHRcdGluaXRpYWxpemU6ZnVuY3Rpb24oKSB7XG5cdFx0XHRxZS5maWVsZC5WaWV3LnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtcblxuXHRcdFx0dGhpcy4kaW5wdXQgPSB0aGlzLiQoJ3NlbGVjdCcpLnByb3AoICdyZWFkb25seScsIHRydWUgKTtcblx0XHR9LFxuXHRcdHNldFZhbHVlOmZ1bmN0aW9uKCB2YWx1ZSApIHtcbiBcdFx0XHR0aGlzLiRpbnB1dC5wcm9wKCAncmVhZG9ubHknLCBmYWxzZSApLnZhbCh2YWx1ZSk7XG4gXHRcdH1cblx0fSk7XG5cblx0LyoqXG4gXHQgKlx0ZmllbGQgdHlwZSB0cnVlX2ZhbHNlXG4gXHQgKi9cblx0IHFlLmZpZWxkLmFkZF90eXBlKCB7XG4gXHRcdHR5cGU6J3RydWVfZmFsc2UnLFxuIFx0XHRpbml0aWFsaXplOmZ1bmN0aW9uKCkge1xuIFx0XHRcdHFlLmZpZWxkLlZpZXcucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO1xuXG4gXHRcdFx0dGhpcy4kKCdbdHlwZT1cInJhZGlvXCJdJykucHJvcCggJ3JlYWRvbmx5JywgdHJ1ZSApO1xuIFx0XHR9LFxuIFx0XHRzZXRWYWx1ZTpmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHR0aGlzLiQoJ1t0eXBlPVwicmFkaW9cIl0nKS5wcm9wKCAncmVhZG9ubHknLCBmYWxzZSApO1xuXHRcdFx0dGhpcy4kKCdbdHlwZT1cInJhZGlvXCJdW3ZhbHVlPVwiJyt2YWx1ZSsnXCJdJyApXG5cdFx0XHRcdC5wcm9wKCAnY2hlY2tlZCcsIHRydWUgKTtcbiAgXHRcdH1cbiBcdH0pO1xuXHQvLyBUb2RvXG5cbn0pKCBqUXVlcnksIGFjZl9xdWlja2VkaXQgKTtcblxuXG4vKlxucmFuZ2VcbnNlbGVjdFxuY2hlY2tib3hcbnJhZGlvXG50cnVlX2ZhbHNlXG5pbWFnZVxuZmlsZVxuZGF0ZV9waWNrZXJcbmRhdGVfdGltZV9waWNrZXJcbnRpbWVfcGlja2VyXG5jb2xvcl9waWNrZXJcblxuKi9cbiIsIi8vdmFyIGFjZl9xdWlja2VkaXQgPSB7fTtcblxuXG4oZnVuY3Rpb24oJCxxZSkge1xuXG5cblxuXHRpZiAoICd1bmRlZmluZWQnICE9PSB0eXBlb2YgaW5saW5lRWRpdFBvc3QgKSB7XG5cdFx0Ly8gd2UgY3JlYXRlIGEgY29weSBvZiB0aGUgV1AgaW5saW5lIGVkaXQgcG9zdCBmdW5jdGlvblxuXHRcdHZhciBfd3BfaW5saW5lX2VkaXRfcG9zdCA9IGlubGluZUVkaXRQb3N0LmVkaXQsXG5cdFx0XHRfd3BfaW5saW5lX2VkaXRfc2F2ZSA9IGlubGluZUVkaXRQb3N0LnNhdmUsXG5cdFx0XHRfd3BfaW5saW5lX2VkaXRfcmV2ZXJ0ID0gaW5saW5lRWRpdFBvc3QucmV2ZXJ0LFxuXHRcdFx0dW5sb2FkX2NiO1xuXHRcdC8vIGFuZCB0aGVuIHdlIG92ZXJ3cml0ZSB0aGUgZnVuY3Rpb24gd2l0aCBvdXIgb3duIGNvZGVcblx0XHRpbmxpbmVFZGl0UG9zdC5lZGl0ID0gZnVuY3Rpb24oIGlkICkge1xuXHRcdFx0dmFyIG9iamVjdF9pZCwgJHRyLCBmb3JtX2NsYXNzO1xuXG5cblx0XHRcdC8vIFwiY2FsbFwiIHRoZSBvcmlnaW5hbCBXUCBlZGl0IGZ1bmN0aW9uXG5cdFx0XHQvLyB3ZSBkb24ndCB3YW50IHRvIGxlYXZlIFdvcmRQcmVzcyBoYW5naW5nXG5cdFx0XHRfd3BfaW5saW5lX2VkaXRfcG9zdC5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cblx0XHRcdC8vIGdldCB0aGUgcG9zdCBJRFxuXHRcdFx0b2JqZWN0X2lkID0gMDtcblx0XHRcdGlmICggdHlwZW9mKCBpZCApID09PSAnb2JqZWN0JyApIHtcblx0XHRcdFx0b2JqZWN0X2lkID0gcGFyc2VJbnQoIHRoaXMuZ2V0SWQoIGlkICkgKTtcblx0XHRcdH1cblx0XHRcdCR0ciA9ICQoJyNlZGl0LScgKyBvYmplY3RfaWQgKTtcbi8vXHRcdFx0Z2V0X2FjZl9wb3N0X2RhdGEoIG9iamVjdF9pZCAsICQoJyNlZGl0LScgKyBvYmplY3RfaWQgKSApO1xuXHRcdFx0aWYgKCAkdHIuaXMoJy5xdWljay1lZGl0LXJvdycpICkge1xuXHRcdFx0XHRmb3JtX2NsYXNzID0gcWUuZm9ybS5RdWlja0VkaXQ7XG5cdFx0XHR9IGVsc2UgaWYgKCAkdHIuaXMoJy5idWxrLWVkaXQtcm93JykgKSB7XG5cdFx0XHRcdGZvcm1fY2xhc3MgPSBxZS5mb3JtLkJ1bGtFZGl0O1xuXHRcdFx0fVxuXHRcdFx0aWYgKCAhIGZvcm1fY2xhc3MgKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHRoaXMuYWNmX3FlZF9mb3JtID0gbmV3IGZvcm1fY2xhc3Moe1xuXHRcdFx0XHRlbDogJHRyLmdldCgwKSxcblx0XHRcdFx0b2JqZWN0X2lkOiBvYmplY3RfaWRcblx0XHRcdH0pO1xuXG4vL1x0XHRcdGJpbmRWYWxpZGF0aW9uKCAkdHIuZmluZCgnYnV0dG9uLnNhdmUnKSwgb2JqZWN0X2lkICk7XG5cdFx0fTtcblx0XHRpbmxpbmVFZGl0UG9zdC5yZXZlcnQgPSBmdW5jdGlvbigpIHtcblx0XHRcdCEhIHRoaXMuYWNmX3FlZF9mb3JtICYmIHRoaXMuYWNmX3FlZF9mb3JtLnVubG9hZCgpO1xuXHRcdFx0cmV0dXJuIF93cF9pbmxpbmVfZWRpdF9yZXZlcnQuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdH1cblx0XHRpbmxpbmVFZGl0UG9zdC5zYXZlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHQhISB0aGlzLmFjZl9xZWRfZm9ybSAmJiB0aGlzLmFjZl9xZWRfZm9ybS51bmxvYWQoKTtcblx0XHRcdHJldHVybiBfd3BfaW5saW5lX2VkaXRfc2F2ZS5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0fVxuXHR9XG5cdC8vIHRvZG86IGlubGluZUVkaXRUYXhcblxuXHRyZXR1cm47XG5cblx0dmFyIG1lZGlhX2ZyYW1lO1xuXG5cdGZ1bmN0aW9uIGdldF9hY2ZfcG9zdF9kYXRhKCBwb3N0X2lkICwgJHBhcmVudCApIHtcblx0XHQvL1xuXHRcdC8vIExvYWQgRmllbGQgVmFsdWVzXG5cdFx0Ly9cblx0XHR2YXIgcmVxX2RhdGEgPSB7XG5cdFx0XHQnYWN0aW9uJyA6ICdnZXRfYWNmX3Bvc3RfbWV0YScsXG5cdFx0XHQncG9zdF9pZCcgOiBwb3N0X2lkLFxuXHRcdFx0J2FjZl9maWVsZF9rZXlzJyA6IFtdXG5cdFx0fTtcblx0XHQvLyAuLi4gZ2F0aGVyIGZpZWxkcyAuLi5cblx0XHQkcGFyZW50LmZpbmQoJ1tkYXRhLWFjZi1maWVsZC1rZXldJykuZWFjaChmdW5jdGlvbigpe1xuXG5cdFx0XHRyZXFfZGF0YS5hY2ZfZmllbGRfa2V5cy5wdXNoKCAkKHRoaXMpLmF0dHIoJ2RhdGEtYWNmLWZpZWxkLWtleScpICk7XG5cblx0XHRcdCQodGhpcykucHJvcCggJ3JlYWRvbmx5JywgdHJ1ZSApO1xuXG5cdFx0XHRpZiAoICEgJCh0aGlzKS5pcygnW2RhdGEtaXMtZG8tbm90LWNoYW5nZT1cInRydWVcIl0nICkgKSB7XG5cdFx0XHRcdGlmICggJCh0aGlzKS5pcygnW3R5cGU9XCJyYWRpb1wiXSxbdHlwZT1cImNoZWNrYm94XCJdJykgKSB7XG5cdFx0XHRcdFx0JCh0aGlzKS5wcm9wKCAnY2hlY2tlZCcsIGZhbHNlICk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoICQodGhpcykucGFyZW50KCkuaXMoJy5hY2YtcXVpY2stZWRpdC1kYXRlX3BpY2tlciwgLmFjZi1xdWljay1lZGl0LXRpbWVfcGlja2VyLCAuYWNmLXF1aWNrLWVkaXQtZGF0ZV90aW1lX3BpY2tlcicgKSApIHtcblx0XHRcdFx0XHQkKHRoaXMpLm5leHQoJ1t0eXBlPVwidGV4dFwiXScpLnByb3AoICdyZWFkb25seScsIHRydWUgKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkKHRoaXMpLnZhbCgnJyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIC4uLiBzZW5kIGEgcmVxdWVzdCAuLi5cblx0XHQkLnBvc3QoIGFqYXh1cmwsIHJlcV9kYXRhLCBmdW5jdGlvbiggcmVzdWx0ICkge1xuXHRcdFx0dmFyIGksIGtleSwgdmFsdWUsICR0ciwgJGZpZWxkLFxuXHRcdFx0XHRzZWxlY3RlZDtcblxuXHRcdFx0JCh3aW5kb3cpLm9mZignYmVmb3JldW5sb2FkJyk7XG5cblx0XHRcdHZhciBrZXlzID0gW107XG5cdFx0XHQvLyBvbmx5IGtlZXAga2V5cyB0aGF0IGhhdmUgZmllbGRzXG5cdFx0XHQkcGFyZW50LmZpbmQoJ1tkYXRhLWFjZi1maWVsZC1rZXldJykuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIGtleTtcblx0XHRcdFx0ISR0ciAmJiAoJHRyID0gJCh0aGlzKS5jbG9zZXN0KCd0ci5pbmxpbmUtZWRpdC1wb3N0JykpO1xuXHRcdFx0XHRrZXkgPSAkKHRoaXMpLmRhdGEoJ2FjZi1maWVsZC1rZXknKTtcblx0XHRcdFx0aWYgKCBrZXlzLmluZGV4T2YoIGtleSApID09PSAtMSApIHtcblx0XHRcdFx0XHRrZXlzLnB1c2goa2V5KTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdGZvciAoIGk9MDsgaTxrZXlzLmxlbmd0aDsgaSsrKSB7XG5cblx0XHRcdFx0a2V5ID0ga2V5c1tpXSwgdmFsdWUgPSByZXN1bHRbIGtleSBdO1xuXG5cdFx0XHRcdCRmaWVsZCA9ICQoJ1tkYXRhLWFjZi1maWVsZC1rZXk9XCInK2tleSsnXCJdOnZpc2libGUnKTtcblxuXHRcdFx0XHQvLyBjb252ZXJ0IGJvb2wgdG8gaW50XG5cdFx0XHRcdGlmICh0eXBlb2YodmFsdWUpID09PSAnYm9vbGVhbicpIHtcblx0XHRcdFx0XHR2YWx1ZSAqPSAxO1xuXHRcdFx0XHR9XG5cblxuXHRcdFx0XHRpZiAoICRmaWVsZC5pcyggJy5hY2YtY2hlY2tib3gtbGlzdCwgLmFjZi1yYWRpby1saXN0JyApICkge1xuXHRcdFx0XHRcdHNlbGVjdGVkID0gMDtcblx0XHRcdFx0XHRpZiAoICQuaXNBcnJheSggdmFsdWUgKSApIHtcblx0XHRcdFx0XHRcdCQuZWFjaCggdmFsdWUsIGZ1bmN0aW9uKCBpZHgsIHZhbCApIHtcblx0XHRcdFx0XHRcdFx0c2VsZWN0ZWQgKz0gJGZpZWxkLmZpbmQoICdbdmFsdWU9XCInK3ZhbCsnXCJdJyApLnByb3AoICdjaGVja2VkJyx0cnVlKS5sZW5ndGg7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0c2VsZWN0ZWQgKz0gJGZpZWxkLmZpbmQoICdbdmFsdWU9XCInK3ZhbHVlKydcIl0nICkucHJvcCggJ2NoZWNrZWQnLHRydWUpLmxlbmd0aDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKCAkZmllbGQuaXMoJy5vdGhlcicpICYmICEgc2VsZWN0ZWQgKSB7XG5cdFx0XHRcdFx0XHRpZiAoICEhIHZhbHVlICkge1xuXHRcdFx0XHRcdFx0XHQkZmllbGQuZmluZCgnW3ZhbHVlPVwib3RoZXJcIl0nKS5wcm9wKCAnY2hlY2tlZCcsIHRydWUgKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdCRmaWVsZC5maW5kKCdbdHlwZT1cInRleHRcIl0nKS52YWwoJycpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9IGVsc2UgaWYgKCAhICRmaWVsZC5pcyggJ1t0eXBlPVwicmFkaW9cIl0sW3R5cGU9XCJjaGVja2JveFwiXScgKSApIHtcblx0XHRcdFx0XHQkZmllbGQudmFsKCB2YWx1ZSApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCAhICRmaWVsZC5pcyggJ1t0eXBlPVwicGFzc3dvcmRcIl0nICkgKSB7XG5cdFx0XHRcdFx0JGZpZWxkLnByb3AoICdyZWFkb25seScsIGZhbHNlICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBpZiAoICRmaWVsZC5pcyhcInRleHRhcmVhXCIpICkge1xuXHRcdFx0XHQvLyBcdCRmaWVsZC5vbigna2V5ZG93biBrZXl1cCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0XHRcdC8vIFx0XHRpZiAoIGV2ZW50LndoaWNoID09IDEzICkge1xuXHRcdFx0XHQvLyBcdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0Ly8gXHRcdH1cblx0XHRcdFx0Ly8gXHR9KTtcblx0XHRcdFx0Ly8gfVxuXG5cdFx0XHRcdGlmICggJGZpZWxkLmlzKFwic2VsZWN0W211bHRpcGxlXS51aVwiKSApIHtcblx0XHRcdFx0XHR2YXIgJG9wdCA9ICRmaWVsZC5jaGlsZHJlbigpO1xuXG5cdFx0XHRcdFx0JG9wdC5zb3J0KGZ1bmN0aW9uKGEsYikge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHZhbHVlLmluZGV4T2YoICQoYSkuYXR0cigndmFsdWUnKSApIC0gdmFsdWUuaW5kZXhPZiggJChiKS5hdHRyKCd2YWx1ZScpICk7XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQkb3B0LmRldGFjaCgpLmFwcGVuZFRvKCAkZmllbGQgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCAkZmllbGQucGFyZW50KCkuaXMoJy5hY2YtcXVpY2stZWRpdC1kYXRlX3BpY2tlciwgLmFjZi1xdWljay1lZGl0LXRpbWVfcGlja2VyLCAuYWNmLXF1aWNrLWVkaXQtZGF0ZV90aW1lX3BpY2tlcicgKSApIHtcblx0XHRcdFx0XHQkZmllbGQubmV4dCgnW3R5cGU9XCJ0ZXh0XCJdJykucHJvcCggJ3JlYWRvbmx5JywgZmFsc2UgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdC8vIGluaXQgY29sb3JwaWNrZXJcblx0XHRcdC8vICRwYXJlbnQuZmluZCgnaW5wdXQuYWNmLXF1aWNrLWVkaXQtY29sb3JfcGlja2VyJykuZWFjaCggZnVuY3Rpb24oIGksIGVsICkge1xuXHRcdFx0Ly8gXHQkKGVsKS53cENvbG9yUGlja2VyKCk7XG5cdFx0XHQvLyB9KVxuXG5cdFx0XHQvLyBpbml0IGRhdGVwaWNrZXJcblx0XHRcdC8vICRwYXJlbnQuZmluZCgnLmFjZi1xdWljay1lZGl0LWRhdGVfcGlja2VyJykuZWFjaCggZnVuY3Rpb24oIGksIGVsICkge1xuICAgICAgICAgICAgLy9cblx0XHRcdC8vIFx0YWNmX3F1aWNrZWRpdC5kYXRlcGlja2VyLmluaXQoICQoZWwpICk7XG4gICAgICAgICAgICAvL1xuXHRcdFx0Ly8gfSk7XG5cblx0XHRcdC8vIGluaXQgdGltZXBpY2tlclxuXHRcdFx0Ly8gJHBhcmVudC5maW5kKCcuYWNmLXF1aWNrLWVkaXQtdGltZV9waWNrZXInKS5lYWNoKCBmdW5jdGlvbiggaSwgZWwgKSB7XG4gICAgICAgICAgICAvL1xuXHRcdFx0Ly8gXHRhY2ZfcXVpY2tlZGl0LnRpbWVwaWNrZXIuaW5pdCggJChlbCkgKTtcbiAgICAgICAgICAgIC8vXG5cdFx0XHQvLyB9KTtcblxuXHRcdFx0Ly8gaW5pdCBkYXRldGltcGlja2VyXG5cdFx0XHQvLyAkcGFyZW50LmZpbmQoJy5hY2YtcXVpY2stZWRpdC1kYXRlX3RpbWVfcGlja2VyJykuZWFjaCggZnVuY3Rpb24oIGksIGVsICkge1xuICAgICAgICAgICAgLy9cblx0XHRcdC8vIFx0YWNmX3F1aWNrZWRpdC5kYXRldGltZXBpY2tlci5pbml0KCAkKGVsKSApO1xuICAgICAgICAgICAgLy9cblx0XHRcdC8vIH0pO1xuXG5cdFx0XHQvLyBpZiggJCgnYm9keSA+ICN1aS1kYXRlcGlja2VyLWRpdicpLmxlbmd0aCA+IDAgKSB7XG5cdFx0XHQvLyBcdCQoJ2JvZHkgPiAjdWktZGF0ZXBpY2tlci1kaXYnKS53cmFwKCc8ZGl2IGNsYXNzPVwiYWNmLXVpLWRhdGVwaWNrZXJcIiAvPicpO1xuXHRcdFx0Ly8gfVxuXG5cdFx0XHQkKCdbZGF0YS1pcy1kby1ub3QtY2hhbmdlPVwidHJ1ZVwiXScpLnRyaWdnZXIoJ2NoYW5nZScpO1xuXHRcdH0pO1xuXHR9XG5cblx0Ly8gYWNmX3F1aWNrZWRpdC5kYXRlcGlja2VyID0ge1xuXHQvLyBcdGluaXQ6IGZ1bmN0aW9uKCAkd3JhcCApIHtcblx0Ly8gXHRcdHZhciAkaGlkZGVuXHRcdD0gJHdyYXAuZmluZCggJ1t0eXBlPVwiaGlkZGVuXCJdJyApLFxuXHQvLyBcdFx0XHQkaW5wdXRcdFx0PSAkd3JhcC5maW5kKCAnW3R5cGU9XCJ0ZXh0XCJdJyApLFxuXHQvLyBcdFx0XHRhbHRGb3JtYXRcdD0gJ3l5bW1kZCdcblx0Ly8gXHRcdFx0YXJnc1x0XHQ9IHtcblx0Ly8gXHRcdFx0XHRkYXRlRm9ybWF0XHRcdDogJHdyYXAuZGF0YSgnZGF0ZV9mb3JtYXQnKSxcblx0Ly8gXHRcdFx0XHRhbHRGb3JtYXRcdFx0OiBhbHRGb3JtYXQsXG5cdC8vIFx0XHRcdFx0YWx0RmllbGRcdFx0OiAkaGlkZGVuLFxuXHQvLyBcdFx0XHRcdGNoYW5nZVllYXJcdFx0OiB0cnVlLFxuXHQvLyBcdFx0XHRcdHllYXJSYW5nZVx0XHQ6IFwiLTEwMDorMTAwXCIsXG5cdC8vIFx0XHRcdFx0Y2hhbmdlTW9udGhcdFx0OiB0cnVlLFxuXHQvLyBcdFx0XHRcdHNob3dCdXR0b25QYW5lbFx0OiB0cnVlLFxuXHQvLyBcdFx0XHRcdGZpcnN0RGF5XHRcdDogJHdyYXAuZGF0YSgnZmlyc3RfZGF5Jylcblx0Ly8gXHRcdFx0fSxcblx0Ly8gXHRcdFx0ZGF0ZVx0XHQ9ICQuZGF0ZXBpY2tlci5wYXJzZURhdGUoIGFsdEZvcm1hdCwgJGhpZGRlbi52YWwoKSAgKTtcbiAgICAvL1xuXHQvLyBcdFx0JGlucHV0LmRhdGVwaWNrZXIoIGFyZ3MgKS5kYXRlcGlja2VyKCAnc2V0RGF0ZScsIGRhdGUgKS5vbignYmx1cicsZnVuY3Rpb24oKXtcblx0Ly8gXHRcdFx0aWYgKCAhICQodGhpcykudmFsKCkgKSB7XG5cdC8vIFx0XHRcdFx0JGhpZGRlbi52YWwoJycpO1xuXHQvLyBcdFx0XHR9XG5cdC8vIFx0XHR9KTtcblx0Ly8gXHR9LFxuXHQvLyB9O1xuICAgIC8vXG5cdC8vIGFjZl9xdWlja2VkaXQudGltZXBpY2tlciA9IHtcblx0Ly8gXHRpbml0OiBmdW5jdGlvbiggJHdyYXAgKSB7XG5cdC8vIFx0XHR2YXIgJGhpZGRlblx0XHRcdD0gJHdyYXAuZmluZCggJ1t0eXBlPVwiaGlkZGVuXCJdJyApLFxuXHQvLyBcdFx0XHQkaW5wdXRcdFx0XHQ9ICR3cmFwLmZpbmQoICdbdHlwZT1cInRleHRcIl0nICksXG5cdC8vIFx0XHRcdGFsdFRpbWVGb3JtYXRcdD0gJ0hIOm1tOnNzJyxcblx0Ly8gXHRcdFx0YXJnc1x0XHRcdD0ge1xuXHQvLyBcdFx0XHRcdHRpbWVGb3JtYXRcdFx0XHQ6ICR3cmFwLmRhdGEoJ3RpbWVfZm9ybWF0JyksXG5cdC8vIFx0XHRcdFx0YWx0VGltZUZvcm1hdFx0XHQ6IGFsdFRpbWVGb3JtYXQsXG5cdC8vIFx0XHRcdFx0YWx0RmllbGRcdFx0XHQ6ICRoaWRkZW4sXG5cdC8vIFx0XHRcdFx0YWx0RmllbGRUaW1lT25seVx0OiBmYWxzZSxcblx0Ly8gXHRcdFx0XHRzaG93QnV0dG9uUGFuZWxcdFx0OiB0cnVlLFxuXHQvLyBcdFx0XHRcdGNvbnRyb2xUeXBlXHRcdFx0OiAnc2VsZWN0Jyxcblx0Ly8gXHRcdFx0XHRvbmVMaW5lXHRcdFx0XHQ6IHRydWVcblx0Ly8gXHRcdFx0fSxcblx0Ly8gXHRcdFx0dGltZSBcdFx0XHQ9ICQuZGF0ZXBpY2tlci5wYXJzZVRpbWUoIGFsdFRpbWVGb3JtYXQsICRoaWRkZW4udmFsKCkgKTtcbiAgICAvL1xuXHQvLyBcdFx0JGlucHV0LnRpbWVwaWNrZXIoIGFyZ3MgKS5vbignYmx1cicsZnVuY3Rpb24oKXtcblx0Ly8gXHRcdFx0aWYgKCAhICQodGhpcykudmFsKCkgKSB7XG5cdC8vIFx0XHRcdFx0JGhpZGRlbi52YWwoJycpO1xuXHQvLyBcdFx0XHR9XG5cdC8vIFx0XHR9KTtcblx0Ly8gXHRcdGlmICggJGhpZGRlbi52YWwoKSApIHtcblx0Ly8gXHRcdFx0JGlucHV0LnZhbCggJC5kYXRlcGlja2VyLmZvcm1hdFRpbWUoICR3cmFwLmRhdGEoJ3RpbWVfZm9ybWF0JyksIHRpbWUgKSApXG5cdC8vIFx0XHR9XG5cdC8vIFx0fSxcbiAgICAvL1xuXHQvLyB9O1xuICAgIC8vXG4gICAgLy9cblx0Ly8gYWNmX3F1aWNrZWRpdC5kYXRldGltZXBpY2tlciA9IHtcblx0Ly8gXHRpbml0OiBmdW5jdGlvbiggJHdyYXAgKSB7XG5cdC8vIFx0XHR2YXIgJGhpZGRlblx0XHRcdD0gJHdyYXAuZmluZCggJ1t0eXBlPVwiaGlkZGVuXCJdJyApLFxuXHQvLyBcdFx0XHQkaW5wdXRcdFx0XHQ9ICR3cmFwLmZpbmQoICdbdHlwZT1cInRleHRcIl0nICksXG5cdC8vIFx0XHRcdGFsdEZvcm1hdFx0XHQ9ICd5eS1tbS1kZCdcblx0Ly8gXHRcdFx0YWx0VGltZUZvcm1hdFx0PSAnSEg6bW06c3MnLFxuXHQvLyBcdFx0XHRhcmdzXHRcdFx0PSB7XG5cdC8vIFx0XHRcdFx0YWx0RmllbGRcdFx0XHQ6ICRoaWRkZW4sXG5cdC8vIFx0XHRcdFx0ZGF0ZUZvcm1hdFx0XHRcdDogJHdyYXAuZGF0YSgnZGF0ZV9mb3JtYXQnKSxcblx0Ly8gXHRcdFx0XHRhbHRGb3JtYXRcdFx0XHQ6IGFsdEZvcm1hdCxcblx0Ly8gXHRcdFx0XHR0aW1lRm9ybWF0XHRcdFx0OiAkd3JhcC5kYXRhKCd0aW1lX2Zvcm1hdCcpLFxuXHQvLyBcdFx0XHRcdGFsdFRpbWVGb3JtYXRcdFx0OiBhbHRUaW1lRm9ybWF0LFxuXHQvLyBcdFx0XHRcdGFsdEZpZWxkVGltZU9ubHlcdDogZmFsc2UsXG5cdC8vIFx0XHRcdFx0Y2hhbmdlWWVhclx0XHRcdDogdHJ1ZSxcblx0Ly8gXHRcdFx0XHR5ZWFyUmFuZ2VcdFx0XHQ6IFwiLTEwMDorMTAwXCIsXG5cdC8vIFx0XHRcdFx0Y2hhbmdlTW9udGhcdFx0XHQ6IHRydWUsXG5cdC8vIFx0XHRcdFx0c2hvd0J1dHRvblBhbmVsXHRcdDogdHJ1ZSxcblx0Ly8gXHRcdFx0XHRmaXJzdERheVx0XHRcdDogJHdyYXAuZGF0YSgnZmlyc3RfZGF5JyksXG5cdC8vIFx0XHRcdFx0Y29udHJvbFR5cGVcdFx0XHQ6ICdzZWxlY3QnLFxuXHQvLyBcdFx0XHRcdG9uZUxpbmVcdFx0XHRcdDogdHJ1ZVxuXHQvLyBcdFx0XHR9LFxuXHQvLyBcdFx0XHRkYXRldGltZSBcdFx0XHQ9ICQuZGF0ZXBpY2tlci5wYXJzZURhdGVUaW1lKCBhbHRGb3JtYXQsIGFsdFRpbWVGb3JtYXQsICRoaWRkZW4udmFsKCkgKTtcbiAgICAvL1xuXHQvLyBcdFx0JGlucHV0LmRhdGV0aW1lcGlja2VyKCBhcmdzICkuZGF0ZXBpY2tlciggJ3NldERhdGUnLCBkYXRldGltZSApLm9uKCdibHVyJyxmdW5jdGlvbigpe1xuXHQvLyBcdFx0XHRpZiAoICEgJCh0aGlzKS52YWwoKSApIHtcblx0Ly8gXHRcdFx0XHQkaGlkZGVuLnZhbCgnJyk7XG5cdC8vIFx0XHRcdH1cblx0Ly8gXHRcdH0pO1xuXHQvLyBcdH0sXG4gICAgLy9cblx0Ly8gfTtcblxuXG5cdGlmICggJ3VuZGVmaW5lZCcgIT09IHR5cGVvZiBpbmxpbmVFZGl0UG9zdCApIHtcblx0XHQvLyB3ZSBjcmVhdGUgYSBjb3B5IG9mIHRoZSBXUCBpbmxpbmUgZWRpdCBwb3N0IGZ1bmN0aW9uXG5cdFx0dmFyIF93cF9pbmxpbmVfZWRpdF9wb3N0ID0gaW5saW5lRWRpdFBvc3QuZWRpdCxcblx0XHRcdHVubG9hZF9jYjtcblx0XHQvLyBhbmQgdGhlbiB3ZSBvdmVyd3JpdGUgdGhlIGZ1bmN0aW9uIHdpdGggb3VyIG93biBjb2RlXG5cdFx0aW5saW5lRWRpdFBvc3QuZWRpdCA9IGZ1bmN0aW9uKCBpZCApIHtcblx0XHRcdHZhciBvYmplY3RfaWQsICR0cjtcblxuXG5cdFx0XHQvLyBcImNhbGxcIiB0aGUgb3JpZ2luYWwgV1AgZWRpdCBmdW5jdGlvblxuXHRcdFx0Ly8gd2UgZG9uJ3Qgd2FudCB0byBsZWF2ZSBXb3JkUHJlc3MgaGFuZ2luZ1xuXHRcdFx0X3dwX2lubGluZV9lZGl0X3Bvc3QuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXG5cdFx0XHQvLyBnZXQgdGhlIHBvc3QgSURcblx0XHRcdG9iamVjdF9pZCA9IDA7XG5cdFx0XHRpZiAoIHR5cGVvZiggaWQgKSA9PT0gJ29iamVjdCcgKSB7XG5cdFx0XHRcdG9iamVjdF9pZCA9IHBhcnNlSW50KCB0aGlzLmdldElkKCBpZCApICk7XG5cdFx0XHR9XG5cdFx0XHQkdHIgPSAkKCcjZWRpdC0nICsgb2JqZWN0X2lkICk7XG5cdFx0XHRnZXRfYWNmX3Bvc3RfZGF0YSggb2JqZWN0X2lkICwgJCgnI2VkaXQtJyArIG9iamVjdF9pZCApICk7XG5cblx0XHRcdGJpbmRWYWxpZGF0aW9uKCAkdHIuZmluZCgnYnV0dG9uLnNhdmUnKSwgb2JqZWN0X2lkICk7XG5cdFx0fTtcblx0fVxuXG5cdGlmICggJ3VuZGVmaW5lZCcgIT09IHR5cGVvZiBpbmxpbmVFZGl0VGF4ICkge1xuXG5cdFx0dmFyIF93cF9pbmxpbmVfZWRpdF90YXggPSBpbmxpbmVFZGl0VGF4LmVkaXQ7XG5cblx0XHRpbmxpbmVFZGl0VGF4LmVkaXQgPSBmdW5jdGlvbiggaWQgKSB7XG5cdFx0XHR2YXIgb2JqZWN0X2lkLCAkdHIsXG5cdFx0XHRcdHRheCA9ICQoJ2lucHV0W25hbWU9XCJ0YXhvbm9teVwiXScpLnZhbCgpO1xuXG5cdFx0XHRfd3BfaW5saW5lX2VkaXRfdGF4LmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblxuXHRcdFx0Ly8gZ2V0IHRoZSBwb3N0IElEXG5cdFx0XHRvYmplY3RfaWQgPSAwO1xuXHRcdFx0aWYgKCB0eXBlb2YoIGlkICkgPT09ICdvYmplY3QnICkge1xuXHRcdFx0XHRvYmplY3RfaWQgPSBwYXJzZUludCggdGhpcy5nZXRJZCggaWQgKSApO1xuXHRcdFx0fVxuXHRcdFx0JHRyID0gJCgnI2VkaXQtJyArIG9iamVjdF9pZCApO1xuXHRcdFx0Z2V0X2FjZl9wb3N0X2RhdGEoIHRheCArICdfJyArIG9iamVjdF9pZCAsICR0ciApO1xuXG5cdFx0XHRiaW5kVmFsaWRhdGlvbiggJHRyLmZpbmQoJ2J1dHRvbi5zYXZlJyksIG9iamVjdF9pZCApO1xuXHRcdH07XG5cdH1cblxuXHRhY2YudmFsaWRhdGlvbi5lcnJvcl9jbGFzcyA9ICdmb3JtLWludmFsaWQnO1xuXG5cdGZ1bmN0aW9uIGJpbmRWYWxpZGF0aW9uKCAkYnV0dG9uLCBvYmplY3RfaWQgKSB7XG5cdFx0dmFyICRmb3JtID0gJGJ1dHRvbi5jbG9zZXN0KCdmb3JtJyk7XG5cbi8vIFx0XHRhY2YudXBkYXRlKCdhamF4dXJsJywgYWpheHVybCApO1xuLy8gXHRcdGFjZi51cGRhdGUoJ25vbmNlJywgJGZvcm0uZmluZCgnW25hbWU9XCJub25jZVwiXScpLnZhbCgpICk7XG4gXHRcdGFjZi51cGRhdGUoJ3Bvc3RfaWQnLCBvYmplY3RfaWQgKTtcblxuXHRcdCRidXR0b24uY2xpY2soIGZ1bmN0aW9uKGUpIHtcblxuXHRcdFx0Ly8gYmFpbCBlYXJseSBpZiBub3QgYWN0aXZlXG5cdFx0XHRpZiggIWFjZi52YWxpZGF0aW9uLmFjdGl2ZSApIHtcblxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblxuXHRcdFx0fVxuXG5cdFx0XHQvLyBpZ25vcmUgdmFsaWRhdGlvbiAob25seSBpZ25vcmUgb25jZSlcblx0XHRcdGlmKCBhY2YudmFsaWRhdGlvbi5pZ25vcmUgKSB7XG5cdFx0XHRcdGFjZi52YWxpZGF0aW9uLmlnbm9yZSA9IDA7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBzdG9wIFdQIEpTIHZhbGlkYXRpb25cblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuXG5cblx0XHRcdC8vIHN0b3JlIHN1Ym1pdCB0cmlnZ2VyIHNvIGl0IHdpbGwgYmUgY2xpY2tlZCBpZiB2YWxpZGF0aW9uIGlzIHBhc3NlZFxuXHRcdFx0YWNmLnZhbGlkYXRpb24uJHRyaWdnZXIgPSAkKHRoaXMpO1xuXG5cdFx0XHQvLyBydW4gdmFsaWRhdGlvblxuXHRcdFx0YWNmLnZhbGlkYXRpb24uZmV0Y2goICRmb3JtICk7XG5cblx0XHRcdC8vIHN0b3AgYWxsIG90aGVyIGNsaWNrIGV2ZW50cyBvbiB0aGlzIGlucHV0XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fSk7XG5cblx0XHQkYnV0dG9uLmRhdGEoJ2V2ZW50cycpLmNsaWNrLnJldmVyc2UoKTtcblx0fVxuXG5cdCQoZG9jdW1lbnQpLm9uKCAnY2xpY2snICwgJy5idWxrYWN0aW9ucyAuYnV0dG9uLmFjdGlvbicgLCBmdW5jdGlvbiggZSApIHtcblx0XHR2YXIgcG9zdF9pZHMgPSBbXTtcblxuXHRcdCQoICcjYnVsay1lZGl0ICNidWxrLXRpdGxlcycgKS5jaGlsZHJlbigpLmVhY2goIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRwb3N0X2lkcy5wdXNoKCAkKCB0aGlzICkuYXR0ciggJ2lkJyApLnJlcGxhY2UoIC9eKHR0bGUpL2ksICcnICkgKTtcblxuXHRcdH0pO1xuXG5cdFx0Z2V0X2FjZl9wb3N0X2RhdGEoIHBvc3RfaWRzICwgJCggJyNidWxrLWVkaXQnICkgKTtcblxuXHR9KVxuXHQub24oJ2NoYW5nZScsICcuYWNmLXJhZGlvLWxpc3Qub3RoZXIgaW5wdXRbdHlwZT1cInJhZGlvXCJdJywgZnVuY3Rpb24oZSkge1xuXG5cdFx0dmFyICR0aGlzID0gJCh0aGlzKSxcblx0XHRcdCRsaXN0ID0gJHRoaXMuY2xvc2VzdCgnLmFjZi1yYWRpby1saXN0JyksXG5cdFx0XHRpc19vdGhlciA9ICR0aGlzLnZhbCgpID09ICdvdGhlcicsXG5cdFx0XHQkb3RoZXIgPSAkbGlzdC5maW5kKCdbdHlwZT1cInRleHRcIl0nKS5wcm9wKCdkaXNhYmxlZCcsICEgaXNfb3RoZXIgKTtcblxuXHRcdCEhIGlzX290aGVyICYmICRvdGhlci5mb2N1cygpO1xuXG5cdH0pXG5cdC8vIC5vbignY2hhbmdlIG1vdXNlbW92ZScsICcuYWNmLXJhbmdlLXdyYXAgaW5wdXRbdHlwZT1cInJhbmdlXCJdJywgZnVuY3Rpb24oZSkge1xuICAgIC8vXG5cdC8vIFx0JCh0aGlzKS5uZXh0KCdbdHlwZT1cIm51bWJlclwiXScpLnZhbCggJCh0aGlzKS52YWwoKSApO1xuICAgIC8vXG5cdC8vIH0pXG5cdC8vIC5vbignY2hhbmdlIGtleXVwJywgJy5hY2YtcmFuZ2Utd3JhcCBpbnB1dFt0eXBlPVwibnVtYmVyXCJdJywgZnVuY3Rpb24oZSkge1xuICAgIC8vXG5cdC8vIFx0JCh0aGlzKS5wcmV2KCdbdHlwZT1cInJhbmdlXCJdJykudmFsKCAkKHRoaXMpLnZhbCgpICk7XG4gICAgLy9cblx0Ly8gfSlcblx0Lm9uKCAnY2hhbmdlJywgJ1tkYXRhLWlzLWRvLW5vdC1jaGFuZ2U9XCJ0cnVlXCJdJywgZnVuY3Rpb24oKXtcblx0XHR2YXIgJHNlbGYgPSAkKHRoaXMpLFxuXHRcdFx0bmFtZSA9ICRzZWxmLmF0dHIoJ25hbWUnKSxcblx0XHRcdCRsaXN0ID0gJHNlbGYuY2xvc2VzdCgnLmFjZi1jaGVja2JveC1saXN0JyksXG5cdFx0XHQkaXRlbXM7XG5cdFx0aWYgKCAkbGlzdC5sZW5ndGggKSB7XG5cdFx0XHQkaXRlbXMgPSAkbGlzdC5maW5kKCdbdHlwZT1cImNoZWNrYm94XCJdOm5vdChbZGF0YS1pcy1kby1ub3QtY2hhbmdlXSknKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JGl0ZW1zID0gJHNlbGYuY2xvc2VzdCgnLmFjZi1maWVsZCcpLmZpbmQoJ2lucHV0LHNlbGVjdCxbbmFtZT1cIicrbmFtZSsnXCJdJykubm90KHRoaXMpXG5cdFx0fVxuXG5cdFx0JGl0ZW1zLnByb3AoICdkaXNhYmxlZCcsICRzZWxmLnByb3AoJ2NoZWNrZWQnKSApO1xuXHR9KVxuXHQvLyAub24oICdjbGljaycsICcuaW5saW5lLWVkaXQtY29sIC5zZWxlY3QtbWVkaWEnLCBmdW5jdGlvbihlKSB7XG5cdC8vIFx0dmFyIHNlbGYgPSB0aGlzLFxuXHQvLyBcdFx0JGhpZGRlbiA9ICQoc2VsZikucGFyZW50KCcuYWNmLWlucHV0LXdyYXAnKS5maW5kKCdbdHlwZT1cImhpZGRlblwiXScpLFxuXHQvLyBcdFx0JGZpZWxkID0gJCh0aGlzKS5jbG9zZXN0KCcuYWNmLWZpZWxkJyksXG5cdC8vIFx0XHRwb3N0X2lkID0gYWNmLmdldCgncG9zdF9pZCcpLFxuXHQvLyBcdFx0bWVkaWFGcmFtZU9wdHM7XG4gICAgLy9cblx0Ly8gXHRtZWRpYUZyYW1lT3B0cyA9IHtcblx0Ly8gXHRcdGZpZWxkXHRcdDogJGhpZGRlbi5hdHRyKCdkYXRhLWFjZi1maWVsZC1rZXknKSxcblx0Ly8gXHRcdG11bHRpcGxlXHQ6IGZhbHNlLFxuXHQvLyBcdFx0cG9zdF9pZFx0XHQ6IHBvc3RfaWQsXG5cdC8vIFx0XHRsaWJyYXJ5XHRcdDogJGhpZGRlbi5hdHRyKCdkYXRhLWxpYnJhcnknKSxcblx0Ly8gXHRcdG1vZGVcdFx0OidzZWxlY3QnLFxuXHQvLyBcdFx0c2VsZWN0XHRcdDogZnVuY3Rpb24gKCBhdHRhY2htZW50LCBpICkge1xuXHQvLyBcdFx0XHRpZiAoICEgYXR0YWNobWVudCApIHtcblx0Ly8gXHRcdFx0XHRyZXR1cm47XG5cdC8vIFx0XHRcdH1cblx0Ly8gXHRcdFx0dmFyICRoaWRkZW4gPSAkKHNlbGYpLnBhcmVudCgnLmFjZi1pbnB1dC13cmFwJykuZmluZCgnW3R5cGU9XCJoaWRkZW5cIl0nKSxcblx0Ly8gXHRcdFx0XHRtZWRpYV9pZCA9IGF0dGFjaG1lbnQuZ2V0KCdpZCcpO1xuICAgIC8vXG5cdC8vIFx0XHRcdCRoaWRkZW4udmFsKCBtZWRpYV9pZCApO1xuXHQvLyBcdFx0fVxuXHQvLyBcdH07XG4gICAgLy9cbiAgICAvL1xuXHQvLyBcdGUucHJldmVudERlZmF1bHQoKTtcbiAgICAvL1xuICAgIC8vXG5cdC8vIFx0aWYgKCAkaGlkZGVuLmRhdGEoJ21pbWVfdHlwZXMnKSApIHtcblx0Ly8gXHRcdG1lZGlhRnJhbWVPcHRzLm1pbWVfdHlwZXMgPSAkaGlkZGVuLmRhdGEoJ21pbWVfdHlwZXMnKTtcblx0Ly8gXHR9XG5cdC8vIFx0aWYgKCAkZmllbGQuaXMoJ1tkYXRhLWZpZWxkLXR5cGU9XCJpbWFnZVwiXScpICkge1xuXHQvLyBcdFx0bWVkaWFGcmFtZU9wdHMudHlwZSA9ICdpbWFnZSc7XG5cdC8vIFx0fSBlbHNlIHtcblx0Ly8gXHRcdG1lZGlhRnJhbWVPcHRzLnR5cGUgPSAnJztcblx0Ly8gXHR9XG4gICAgLy9cblx0Ly8gXHQvLyBDcmVhdGUgYSBuZXcgbWVkaWEgZnJhbWVcblx0Ly8gXHRtZWRpYV9mcmFtZSA9IGFjZi5tZWRpYS5wb3B1cCggbWVkaWFGcmFtZU9wdHMgKTtcbiAgICAvL1xuICAgIC8vXG5cdC8vIFx0Ly8gc2V0IHBvc3QgaWQsIHNvIG5ldyB1cGxvYWRzIGFyZSBhdHRhY2hlZCB0byBlZGl0ZWQgcG9zdFxuXHQvLyBcdGlmICggYWNmLmlzc2V0KHdpbmRvdywnd3AnLCdtZWRpYScsJ3ZpZXcnLCdzZXR0aW5ncycsJ3Bvc3QnKSAmJiAkLmlzTnVtZXJpYyhwb3N0X2lkKSApIHtcbiAgICAvL1xuXHQvLyBcdFx0d3AubWVkaWEudmlldy5zZXR0aW5ncy5wb3N0LmlkID0gcG9zdF9pZDtcbiAgICAvL1xuXHQvLyBcdH1cbiAgICAvL1xuXHQvLyB9KVxuXHQvLyAub24oICdjbGljaycsICcuaW5saW5lLWVkaXQtY29sIC5yZW1vdmUtbWVkaWEnLCBmdW5jdGlvbihlKSB7XG5cdC8vIFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHQvLyBcdHZhciAkaGlkZGVuID0gJCh0aGlzKS5wYXJlbnQoKS5maW5kKCdbdHlwZT1cImhpZGRlblwiXScpO1xuXHQvLyBcdCRoaWRkZW4udmFsKCcnKTtcblx0Ly8gfSk7XG59KSggalF1ZXJ5LCB3aW5kb3cuYWNmX3F1aWNrZWRpdCApO1xuIiwiKGZ1bmN0aW9uKCQpIHtcblx0JCgnLmFjZi1xZWYtZ2FsbGVyeS1jb2wnKS5vbignbW91c2Vtb3ZlJyxmdW5jdGlvbihlKXtcblx0XHR2YXIgJHRoaXNcdD0gJCh0aGlzKSxcblx0XHRcdCRpbWdcdD0gJCh0aGlzKS5maW5kKCdpbWcnKVxuXHRcdFx0eFx0XHQ9IGUub2Zmc2V0WCxcblx0XHRcdG51bVx0XHQ9ICRpbWcubGVuZ3RoLFxuXHRcdFx0c3RlcFx0PSAkKHRoaXMpLndpZHRoKCkgLyBudW07XG5cblx0XHQkaW1nLmVhY2goIGZ1bmN0aW9uKGksZWwpIHtcblx0XHRcdGlmICh4ID49IHN0ZXAqaSkge1xuXHRcdFx0XHQkKGVsKS5zaG93KCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQkKGVsKS5oaWRlKCk7XG5cdFx0XHR9XG5cdFx0fSApO1xuXHR9KTtcbn0pKGpRdWVyeSk7Il19
