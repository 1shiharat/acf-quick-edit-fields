!function(e,i){i.acf_quickedit=qe={form:{},field:{_types:{},add_type:function(e){return qe.field._types[e.type]=qe.field.View.extend(e),qe.field._types[e.type]},factory:function(i,t){var a=e(i).attr("data-field-type"),n=qe.field._types;return field_class=a in n?n[a]:qe.field.View,new field_class({el:i,controller:t})}}},qe.form.View=Backbone.View.extend({initialize:function(){var e=this;this.options=arguments[0],Backbone.View.prototype.initialize.apply(this,arguments),this.fields={},this.$(".inline-edit-col-qed [data-key]").each(function(i,t){var a=qe.field.factory(t,this);e.fields[a.key]=a}),this.loadValues()},loadValues:function(){var i=this;return e.post({url:ajaxurl,data:{action:"get_acf_post_meta",object_id:this.options.object_id,acf_field_keys:Object.keys(this.fields)},success:function(e){i.loadedValues(e)}}),this},loadedValues:function(e){var i=this;_.each(e,function(e,t){i.fields[t].setValue(e)}),this.initValidation()},unload:function(e){_.each(this.fields,function(e){e.unload()})},validationComplete:function(e,i){console.log(e);var t=this;return e.valid||_.each(e.errors,function(e){var i=e.input.replace(/^acf\[([0-9a-z_]+)\]$/g,"$1");i in t.fields&&t.fields[i].setError(e.message)}),e},initValidation:function(){var i=this.$el.closest("form"),t=i.find("button.save");acf.update("post_id",this.options.object_id),acf.add_filter("validation_complete",this.validationComplete,10,this),t.click(function(t){return!acf.validation.active||(acf.validation.ignore?(acf.validation.ignore=0,!0):(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),acf.validation.$trigger=e(this),acf.validation.fetch(i),!1))}),e._data(t[0],"events").click.reverse()}}),qe.form.QuickEdit=qe.form.View.extend({}),qe.form.BulkEdit=qe.form.View.extend({}),qe.field.View=wp.media.View.extend({initialize:function(){var e=this;Backbone.View.prototype.initialize.apply(this,arguments),this.key=this.$el.attr("data-key"),this.$input||(this.$input=this.$("input")),this.$input.prop("readonly",!0),this.$("*").on("change",function(){e.resetError()})},setValue:function(e){return this.$input.prop("readonly",!1),this.$input.val(e),this},setError:function(e){return this.$el.attr("data-error-message",e),this},resetError:function(){return this.$el.removeAttr("data-error-message"),this},unload:function(){}})}(jQuery,window);
!function(t,e){var i={type:"file",mediaFrameType:"",events:{"click .select-media":"selectFile","click .remove-media":"removeFile"},initialize:function(){e.field.View.prototype.initialize.apply(this,arguments);var t=this,i=this.$('[type="hidden"]'),a=acf.get("post_id");this.mediaFrameOpts={field:this.key,multiple:!1,post_id:a,library:i.attr("data-library"),mode:"select",type:this.mediaFrameType,select:function(e,i){e&&t.setValue(e.get("id"))}},i.data("mime_types")&&(this.mediaFrameOpts.mime_types=i.data("mime_types"))},selectFile:function(e){e.preventDefault();acf.media.popup(this.mediaFrameOpts);acf.isset(window,"wp","media","view","settings","post")&&t.isNumeric(this.mediaFrameOpts.post_id)&&(wp.media.view.settings.post.id=this.mediaFrameOpts.post_id)},removeFile:function(t){t.preventDefault(),this.setValue("")},setValue:function(t){return this.$('[type="hidden"]').val(t),this}};e.field.add_type(i),e.field.add_type(_.extend(i,{type:"image",mediaFrameType:"image"})),e.field.add_type(i),e.field.add_type({type:"range",events:{'change [type="range"]':"adaptNumber",'mousemove [type="range"]':"adaptNumber",'change [type="number"]':"adaptRange",'mousemove [type="number"]':"adaptRange"},adaptNumber:function(){this.$('[type="number"]').val(this.$('[type="range"]').val())},adaptRange:function(){this.$('[type="range"]').val(this.$('[type="number"]').val())}}),e.field.add_type({type:"date_picker",initialize:function(){var i=this;return this.$input=this.$('[type="text"]'),this.$hidden=this.$('[type="hidden"]'),e.field.View.prototype.initialize.apply(this,arguments),t("body > #ui-datepicker-div").length>0&&t("body > #ui-datepicker-div").wrap('<div class="acf-ui-datepicker" />'),this.datePickerArgs={dateFormat:this.$("[data-date_format]").data("date_format"),altFormat:"yymmdd",altField:this.$hidden,changeYear:!0,yearRange:"-100:+100",changeMonth:!0,showButtonPanel:!0,firstDay:this.$("[data-first_day]").data("first_day")},this.$input.datepicker(this.datePickerArgs).on("blur",function(){t(this).val()||i.$hidden.val("")}),this},setValue:function(e){var i;this.$input.prop("readonly",!1);try{i=t.datepicker.parseDate(this.datePickerArgs.altFormat,e)}catch(t){return this}return this.$input.datepicker("setDate",i),this}}),e.field.add_type({type:"date_time_picker",initialize:function(){var i=this;return this.$input=this.$('[type="text"]'),this.$hidden=this.$('[type="hidden"]'),e.field.View.prototype.initialize.apply(this,arguments),t("body > #ui-datepicker-div").length>0&&t("body > #ui-datepicker-div").wrap('<div class="acf-ui-datepicker" />'),this.datePickerArgs={altField:this.$hidden,dateFormat:this.$("[data-date_format]").data("date_format"),altFormat:"yy-mm-dd",timeFormat:this.$("[data-time_format]").data("time_format"),altTimeFormat:"HH:mm:ss",altFieldTimeOnly:!1,changeYear:!0,yearRange:"-100:+100",changeMonth:!0,showButtonPanel:!0,firstDay:this.$("[data-first_day]").data("first_day"),controlType:"select",oneLine:!0},this.$input.datetimepicker(this.datePickerArgs).on("blur",function(){t(this).val()||i.$hidden.val("")}),this},setValue:function(e){var i;this.$input.prop("readonly",!1);try{i=t.datepicker.parseDateTime(this.datePickerArgs.altFormat,this.datePickerArgs.altTimeFormat,e)}catch(t){return this}if(i)return this.$hidden.val(i),this.$input.val(t.datepicker.formatDate(this.datePickerArgs.dateFormat,i)+" "+t.datepicker.formatTime(this.datePickerArgs.timeFormat,i)),this}}),e.field.add_type({type:"time_picker",initialize:function(){var i=this;return this.$input=this.$('[type="text"]'),this.$hidden=this.$('[type="hidden"]'),e.field.View.prototype.initialize.apply(this,arguments),t("body > #ui-datepicker-div").length>0&&t("body > #ui-datepicker-div").wrap('<div class="acf-ui-datepicker" />'),this.datePickerArgs={timeFormat:this.$("[data-time_format]").data("time_format"),altTimeFormat:"HH:mm:ss",altField:this.$hidden,altFieldTimeOnly:!1,showButtonPanel:!0,controlType:"select",oneLine:!0},this.$input.timepicker(this.datePickerArgs).on("blur",function(){t(this).val()||i.$hidden.val("")}),this},setValue:function(e){var i;this.$input.prop("readonly",!1);try{i=t.datepicker.parseTime(this.datePickerArgs.altTimeFormat,e)}catch(t){return this}if(i)return this.$hidden.val(e),this.$input.val(t.datepicker.formatTime(this.datePickerArgs.timeFormat,i)),this}}),e.field.add_type({type:"color_picker",initialize:function(){this.$input=this.$('[type="text"]').first().wpColorPicker(),e.field.View.prototype.initialize.apply(this,arguments)},setValue:function(t){this.$input.prop("readonly",!1),this.$input.wpColorPicker("color",t)},unload:function(){t("body").off("click.wpcolorpicker")}}),e.field.add_type({type:"textarea",initialize:function(){this.$input=this.$("textarea").prop("readonly",!0),e.field.View.prototype.initialize.apply(this,arguments),this.$input.on("keydown keyup",function(t){13!=t.which&&27!=t.which||t.stopPropagation()})},setValue:function(t){this.$input.prop("readonly",!1).val(t)}}),e.field.add_type({type:"checkbox",events:{"click .add-choice":"addChoice",'change [type="checkbox"].custom':"removeChoice"},initialize:function(){this.$input=this.$('[type="checkbox"]').prop("readonly",!0),e.field.View.prototype.initialize.apply(this,arguments)},setValue:function(e){var i=this;this.$input.prop("readonly",!1).val(e),t.isArray(e)?t.each(e,function(t,e){i.$('[type="checkbox"][value="'+e+'"]').prop("checked",!0)}):this.$('[type="checkbox"][value="'+e+'"]').prop("checked",!0)},addChoice:function(t){t.preventDefault();var e=wp.template("acf-qef-custom-choice-"+this.$el.attr("data-key"));this.$("ul").append(e())},removeChoice:function(e){t(e.target).closest("li").remove()}}),e.field.add_type({type:"radio",initialize:function(){var i,a;this.$input=this.$('[type="radio"]'),e.field.View.prototype.initialize.apply(this,arguments),this.$('[type="radio"]').prop("readonly",!0),this.$("ul.acf-radio-list.other").length&&(i=this.$('[type="text"]'),this.$('[type="radio"]').on("change",function(e){a=t(this).is('[value="other"]:checked'),i.prop("disabled",!a).prop("readonly",!a)}))},setValue:function(t){this.$input.prop("readonly",!1),this.$('[type="radio"][value="'+t+'"]').prop("checked",!0)}}),e.field.add_type({type:"select",initialize:function(){e.field.View.prototype.initialize.apply(this,arguments),this.$input=this.$("select").prop("readonly",!0)},setValue:function(t){this.$input.prop("readonly",!1).val(t)}}),e.field.add_type({type:"true_false",initialize:function(){e.field.View.prototype.initialize.apply(this,arguments),this.$('[type="radio"]').prop("readonly",!0)},setValue:function(t){this.$('[type="radio"]').prop("readonly",!1),this.$('[type="radio"][value="'+t+'"]').prop("checked",!0)}})}(jQuery,acf_quickedit);
!function(i,t){if("undefined"!=typeof inlineEditPost){var e=inlineEditPost.edit,n=inlineEditPost.save,d=inlineEditPost.revert;inlineEditPost.edit=function(n){var d,o,a;e.apply(this,arguments),d=0,"object"==typeof n&&(d=parseInt(this.getId(n))),o=i("#edit-"+d),o.is(".quick-edit-row")?a=t.form.QuickEdit:o.is(".bulk-edit-row")&&(a=t.form.BulkEdit),a&&(this.acf_qed_form=new a({el:o.get(0),object_id:d}))},inlineEditPost.revert=function(){return!!this.acf_qed_form&&this.acf_qed_form.unload(),d.apply(this,arguments)},inlineEditPost.save=function(){return!!this.acf_qed_form&&this.acf_qed_form.unload(),n.apply(this,arguments)}}if("undefined"!=typeof inlineEditTax){var o=inlineEditTax.edit,n=inlineEditTax.save,d=inlineEditTax.revert;inlineEditTax.edit=function(e){var n,d,a=i('input[name="taxonomy"]').val();o.apply(this,arguments),n=0,"object"==typeof e&&(n=parseInt(this.getId(e))),d=i("#edit-"+n),this.acf_qed_form=new t.form.QuickEdit({el:d.get(0),object_id:a+"_"+n})},inlineEditTax.revert=function(){return!!this.acf_qed_form&&this.acf_qed_form.unload(),d.apply(this,arguments)},inlineEditTax.save=function(){return!!this.acf_qed_form&&this.acf_qed_form.unload(),n.apply(this,arguments)}}return}(jQuery,window.acf_quickedit);
!function(e){e(".acf-qef-gallery-col").on("mousemove",function(n){var t=(e(this),e(this).find("img"));x=n.offsetX,num=t.length,step=e(this).width()/num,t.each(function(n,t){x>=step*n?e(t).show():e(t).hide()})})}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjZi1xdWlja2VkaXQtYmFzZS5qcyIsImFjZi1xdWlja2VkaXQtZmllbGRzLmpzIiwiYWNmLXF1aWNrZWRpdC5qcyIsInRodW1ibmFpbC1jb2wuanMiXSwibmFtZXMiOlsiJCIsImV4cG9ydHMiLCJhY2ZfcXVpY2tlZGl0IiwicWUiLCJmb3JtIiwiZmllbGQiLCJfdHlwZXMiLCJhZGRfdHlwZSIsImEiLCJ0eXBlIiwiVmlldyIsImV4dGVuZCIsImZhY3RvcnkiLCJlbCIsImNvbnRyb2xsZXIiLCJhdHRyIiwidHlwZXMiLCJmaWVsZF9jbGFzcyIsIkJhY2tib25lIiwiaW5pdGlhbGl6ZSIsInNlbGYiLCJ0aGlzIiwib3B0aW9ucyIsImFyZ3VtZW50cyIsInByb3RvdHlwZSIsImFwcGx5IiwiZmllbGRzIiwiZWFjaCIsImkiLCJrZXkiLCJsb2FkVmFsdWVzIiwicG9zdCIsInVybCIsImFqYXh1cmwiLCJkYXRhIiwiYWN0aW9uIiwib2JqZWN0X2lkIiwiYWNmX2ZpZWxkX2tleXMiLCJPYmplY3QiLCJrZXlzIiwic3VjY2VzcyIsInJlc3BvbnNlIiwibG9hZGVkVmFsdWVzIiwidmFsdWVzIiwiXyIsInZhbCIsInNldFZhbHVlIiwiaW5pdFZhbGlkYXRpb24iLCJ1bmxvYWQiLCJlIiwidmFsaWRhdGlvbkNvbXBsZXRlIiwianNvbiIsIiRmb3JtIiwiY29uc29sZSIsImxvZyIsInZhbGlkIiwiZXJyb3JzIiwiZXJyIiwiaW5wdXQiLCJyZXBsYWNlIiwic2V0RXJyb3IiLCJtZXNzYWdlIiwiJGVsIiwiY2xvc2VzdCIsIiRidXR0b24iLCJmaW5kIiwiYWNmIiwidXBkYXRlIiwiYWRkX2ZpbHRlciIsImNsaWNrIiwidmFsaWRhdGlvbiIsImFjdGl2ZSIsImlnbm9yZSIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwic3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uIiwiJHRyaWdnZXIiLCJmZXRjaCIsIl9kYXRhIiwicmV2ZXJzZSIsIlF1aWNrRWRpdCIsIkJ1bGtFZGl0Iiwid3AiLCJtZWRpYSIsIiRpbnB1dCIsInByb3AiLCJvbiIsInJlc2V0RXJyb3IiLCJ2YWx1ZSIsInJlbW92ZUF0dHIiLCJqUXVlcnkiLCJ3aW5kb3ciLCJmaWxlX3R5cGUiLCJtZWRpYUZyYW1lVHlwZSIsImV2ZW50cyIsImNsaWNrIC5zZWxlY3QtbWVkaWEiLCJjbGljayAucmVtb3ZlLW1lZGlhIiwiJGhpZGRlbiIsInBvc3RfaWQiLCJnZXQiLCJtZWRpYUZyYW1lT3B0cyIsIm11bHRpcGxlIiwibGlicmFyeSIsIm1vZGUiLCJzZWxlY3QiLCJhdHRhY2htZW50IiwibWltZV90eXBlcyIsInNlbGVjdEZpbGUiLCJwb3B1cCIsImlzc2V0IiwiaXNOdW1lcmljIiwidmlldyIsInNldHRpbmdzIiwiaWQiLCJyZW1vdmVGaWxlIiwiY2hhbmdlIFt0eXBlPVwicmFuZ2VcIl0iLCJtb3VzZW1vdmUgW3R5cGU9XCJyYW5nZVwiXSIsImNoYW5nZSBbdHlwZT1cIm51bWJlclwiXSIsIm1vdXNlbW92ZSBbdHlwZT1cIm51bWJlclwiXSIsImFkYXB0TnVtYmVyIiwiYWRhcHRSYW5nZSIsImxlbmd0aCIsIndyYXAiLCJkYXRlUGlja2VyQXJncyIsImRhdGVGb3JtYXQiLCJhbHRGb3JtYXQiLCJhbHRGaWVsZCIsImNoYW5nZVllYXIiLCJ5ZWFyUmFuZ2UiLCJjaGFuZ2VNb250aCIsInNob3dCdXR0b25QYW5lbCIsImZpcnN0RGF5IiwiZGF0ZXBpY2tlciIsImRhdGUiLCJwYXJzZURhdGUiLCJ0aW1lRm9ybWF0IiwiYWx0VGltZUZvcm1hdCIsImFsdEZpZWxkVGltZU9ubHkiLCJjb250cm9sVHlwZSIsIm9uZUxpbmUiLCJkYXRldGltZXBpY2tlciIsInBhcnNlRGF0ZVRpbWUiLCJmb3JtYXREYXRlIiwiZm9ybWF0VGltZSIsInRpbWVwaWNrZXIiLCJ0aW1lIiwicGFyc2VUaW1lIiwiZmlyc3QiLCJ3cENvbG9yUGlja2VyIiwib2ZmIiwid2hpY2giLCJjbGljayAuYWRkLWNob2ljZSIsImNoYW5nZSBbdHlwZT1cImNoZWNrYm94XCJdLmN1c3RvbSIsImlzQXJyYXkiLCJpZHgiLCJhZGRDaG9pY2UiLCJ0cGwiLCJ0ZW1wbGF0ZSIsImFwcGVuZCIsInJlbW92ZUNob2ljZSIsInRhcmdldCIsInJlbW92ZSIsIiRvdGhlciIsImlzX290aGVyIiwiaXMiLCJpbmxpbmVFZGl0UG9zdCIsIl93cF9pbmxpbmVfZWRpdF9wb3N0IiwiZWRpdCIsIl93cF9pbmxpbmVfZWRpdF9zYXZlIiwic2F2ZSIsIl93cF9pbmxpbmVfZWRpdF9yZXZlcnQiLCJyZXZlcnQiLCIkdHIiLCJmb3JtX2NsYXNzIiwicGFyc2VJbnQiLCJnZXRJZCIsImFjZl9xZWRfZm9ybSIsImlubGluZUVkaXRUYXgiLCJfd3BfaW5saW5lX2VkaXRfdGF4IiwidGF4IiwiJGltZyIsIngiLCJvZmZzZXRYIiwibnVtIiwic3RlcCIsIndpZHRoIiwic2hvdyIsImhpZGUiXSwibWFwcGluZ3MiOiJDQUFBLFNBQVdBLEVBQUdDLEdBQ2JBLEVBQVFDLGNBQWdCQyxJQUN2QkMsUUFDQUMsT0FDQ0MsVUFDQUMsU0FBUyxTQUFTQyxHQUVqQixNQURBTCxJQUFHRSxNQUFNQyxPQUFPRSxFQUFFQyxNQUFRTixHQUFHRSxNQUFNSyxLQUFLQyxPQUFPSCxHQUN4Q0wsR0FBR0UsTUFBTUMsT0FBT0UsRUFBRUMsT0FFMUJHLFFBQVEsU0FBU0MsRUFBR0MsR0FDbkIsR0FBSUwsR0FBT1QsRUFBRWEsR0FBSUUsS0FBSyxtQkFDckJDLEVBQVFiLEdBQUdFLE1BQU1DLE1BR2xCLE9BREFXLGFBQWNSLElBQVFPLEdBQVFBLEVBQU1QLEdBQVFOLEdBQUdFLE1BQU1LLEtBQzlDLEdBQUlPLGNBQ1ZKLEdBQU1BLEVBQ05DLFdBQVlBLE9BVWhCWCxHQUFHQyxLQUFLTSxLQUFPUSxTQUFTUixLQUFLQyxRQUM1QlEsV0FBVyxXQUVWLEdBQUlDLEdBQU9DLElBRVhBLE1BQUtDLFFBQVVDLFVBQVUsR0FFekJMLFNBQVNSLEtBQUtjLFVBQVVMLFdBQVdNLE1BQU9KLEtBQU1FLFdBRWhERixL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QUN2Q0MsRUFBdUJTLGNBQWNSLEtBQ3JDQyxFQUF5Qk8sY0FBY04sTUFFeENNLGVBQWNWLEtBQU8sU0FBVXRELEdBQzlCLEdBQUk3RSxHQUFXd0ksRUFDZE8sRUFBTW5MLEVBQUUsMEJBQTBCNkMsS0FFbkNxSSxHQUFvQnpKLE1BQU9KLEtBQU1FLFdBR2pDYSxFQUFZLEVBQ1UsZ0JBQVgsS0FDVkEsRUFBWTBJLFNBQVV6SixLQUFLMEosTUFBTzlELEtBRW5DMkQsRUFBTTVLLEVBQUUsU0FBV29DLEdBRW5CZixLQUFLMkosYUFBZSxHQUFJN0ssR0FBR0MsS0FBSzRFLFdBQy9CbkUsR0FBSStKLEVBQUl6RSxJQUFJLEdBQ1ovRCxVQUFXK0ksRUFBTSxJQUFNL0ksS0FJekI2SSxjQUFjTixPQUFTLFdBR3RCLFFBREd0SixLQUFLMkosY0FBZ0IzSixLQUFLMkosYUFBYWhJLFNBQ25DMEgsRUFBdUJqSixNQUFPSixLQUFNRSxZQUU1QzBKLGNBQWNSLEtBQU8sV0FHcEIsUUFER3BKLEtBQUsySixjQUFnQjNKLEtBQUsySixhQUFhaEksU0FDbkN3SCxFQUFxQi9JLE1BQU9KLEtBQU1FLFlBSTNDLFFBb2FHbUUsT0FBUUMsT0FBT3pGO0NDOWZuQixTQUFVRixHQUNUQSxFQUFFLHdCQUF3QnNGLEdBQUcsWUFBWSxTQUFTckMsR0FDakQsR0FDQ21JLElBRFdwTCxFQUFFcUIsTUFDTnJCLEVBQUVxQixNQUFNNEMsS0FBSyxPQUNwQm9ILEdBQUtwSSxFQUFFcUksUUFDUEMsSUFBT0gsRUFBSzNELE9BQ1orRCxLQUFPeEwsRUFBRXFCLE1BQU1vSyxRQUFVRixJQUUxQkgsRUFBS3pKLEtBQU0sU0FBU0MsRUFBRWYsR0FDakJ3SyxHQUFLRyxLQUFLNUosRUFDYjVCLEVBQUVhLEdBQUk2SyxPQUVOMUwsRUFBRWEsR0FBSThLLFlBSVBqRyIsImZpbGUiOiJhY2YtcXVpY2tlZGl0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiggJCwgZXhwb3J0cyApe1xuXHRleHBvcnRzLmFjZl9xdWlja2VkaXQgPSBxZSA9IHtcblx0XHRmb3JtOnt9LFxuXHRcdGZpZWxkOiB7XG5cdFx0XHRfdHlwZXM6IHt9LC8vIGZpZWxkIHR5cGVzXG5cdFx0XHRhZGRfdHlwZTpmdW5jdGlvbihhKSB7XG5cdFx0XHRcdHFlLmZpZWxkLl90eXBlc1thLnR5cGVdID0gcWUuZmllbGQuVmlldy5leHRlbmQoYSk7XG5cdFx0XHRcdHJldHVybiBxZS5maWVsZC5fdHlwZXNbYS50eXBlXTtcblx0XHRcdH0sXG5cdFx0XHRmYWN0b3J5OmZ1bmN0aW9uKGVsLGNvbnRyb2xsZXIpe1xuXHRcdFx0XHR2YXIgdHlwZSA9ICQoZWwpLmF0dHIoJ2RhdGEtZmllbGQtdHlwZScpLFxuXHRcdFx0XHRcdHR5cGVzID0gcWUuZmllbGQuX3R5cGVzO1xuXG5cdFx0XHRcdGZpZWxkX2NsYXNzID0gdHlwZSBpbiB0eXBlcyA/IHR5cGVzW3R5cGVdIDogcWUuZmllbGQuVmlldztcblx0XHRcdFx0cmV0dXJuIG5ldyBmaWVsZF9jbGFzcyh7XG5cdFx0XHRcdFx0ZWw6XHRcdFx0ZWwsXG5cdFx0XHRcdFx0Y29udHJvbGxlcjpcdGNvbnRyb2xsZXIsXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0sXG5cblx0fTtcblxuXG5cblxuXHRxZS5mb3JtLlZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG5cdFx0aW5pdGlhbGl6ZTpmdW5jdGlvbigpe1xuXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRcdHRoaXMub3B0aW9ucyA9IGFyZ3VtZW50c1swXTtcblxuXHRcdFx0QmFja2JvbmUuVmlldy5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cblx0XHRcdHRoaXMuZmllbGRzID0ge307XG5cblx0XHRcdHRoaXMuJCgnLmlubGluZS1lZGl0LWNvbC1xZWQgW2RhdGEta2V5XScpLmVhY2goZnVuY3Rpb24oaSxlbCl7XG5cdFx0XHRcdHZhciBmaWVsZCA9IHFlLmZpZWxkLmZhY3RvcnkoIGVsLCB0aGlzICk7XG5cdFx0XHRcdHNlbGYuZmllbGRzWyBmaWVsZC5rZXkgXSA9IGZpZWxkO1xuXHRcdFx0fSk7XG5cdFx0XHQvLyBsb2FkIHZhbHVlc1xuXHRcdFx0dGhpcy5sb2FkVmFsdWVzKCk7XG5cblx0XHR9LFxuXHRcdGxvYWRWYWx1ZXM6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdFx0JC5wb3N0KHtcblx0XHRcdFx0dXJsOmFqYXh1cmwsXG5cdFx0XHRcdGRhdGE6e1xuXHRcdFx0XHRcdCdhY3Rpb24nIDogJ2dldF9hY2ZfcG9zdF9tZXRhJyxcblx0XHRcdFx0XHQnb2JqZWN0X2lkJyA6IHRoaXMub3B0aW9ucy5vYmplY3RfaWQsXG5cdFx0XHRcdFx0J2FjZl9maWVsZF9rZXlzJyA6IE9iamVjdC5rZXlzKHRoaXMuZmllbGRzKVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRzdWNjZXNzOmZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdFx0XHRzZWxmLmxvYWRlZFZhbHVlcyggcmVzcG9uc2UgKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH0sXG5cdFx0bG9hZGVkVmFsdWVzOmZ1bmN0aW9uKHZhbHVlcykge1xuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdFx0Xy5lYWNoKHZhbHVlcyxmdW5jdGlvbiggdmFsLCBrZXkgKXtcblx0XHRcdFx0c2VsZi5maWVsZHNba2V5XS5zZXRWYWx1ZSggdmFsICk7XG5cdFx0XHR9KTtcblx0XHRcdHRoaXMuaW5pdFZhbGlkYXRpb24oKTtcblx0XHR9LFxuXHRcdHVubG9hZDpmdW5jdGlvbihlKXtcblx0XHRcdF8uZWFjaCh0aGlzLmZpZWxkcyxmdW5jdGlvbihmaWVsZCl7XG5cdFx0XHRcdGZpZWxkLnVubG9hZCgpO1xuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHR2YWxpZGF0aW9uQ29tcGxldGU6ZnVuY3Rpb24oIGpzb24sICRmb3JtICkge1xuXHRcdFx0Y29uc29sZS5sb2coanNvbik7XG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRcdGlmICggISBqc29uLnZhbGlkICkge1xuXHRcdFx0XHRfLmVhY2goanNvbi5lcnJvcnMsZnVuY3Rpb24oZXJyKXtcblx0XHRcdFx0XHQvLyBlcnIuaW5wdXQgaXMgaW4gZm9ybWF0IGBhY2ZbPEZJRUxEX0tFWT5dYFxuXHRcdFx0XHRcdHZhciBrZXkgPSBlcnIuaW5wdXQucmVwbGFjZSgvXmFjZlxcWyhbMC05YS16X10rKVxcXSQvZywnJDEnKTtcblx0XHRcdFx0XHRpZiAoIGtleSBpbiBzZWxmLmZpZWxkcyApIHtcblx0XHRcdFx0XHRcdHNlbGYuZmllbGRzW2tleV0uc2V0RXJyb3IoIGVyci5tZXNzYWdlICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBqc29uO1xuXHRcdH0sXG5cdFx0aW5pdFZhbGlkYXRpb246ZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgJGZvcm0gPSB0aGlzLiRlbC5jbG9zZXN0KCdmb3JtJyksXG5cdFx0XHRcdCRidXR0b24gPSAkZm9ybS5maW5kKCdidXR0b24uc2F2ZScpO1xuXG5cdFx0XHRhY2YudXBkYXRlKCdwb3N0X2lkJywgdGhpcy5vcHRpb25zLm9iamVjdF9pZCApO1xuXG5cdFx0XHRhY2YuYWRkX2ZpbHRlciggJ3ZhbGlkYXRpb25fY29tcGxldGUnLCB0aGlzLnZhbGlkYXRpb25Db21wbGV0ZSwgMTAsIHRoaXMgKTtcbi8vXHRcdFx0YWNmLmFkZF9hY3Rpb24oJ3ZhbGlkYXRpb25fZmFpbHVyZScsIHRoaXMudmFsaWRhdGlvbkZhaWx1cmUgKTtcblxuXHRcdFx0JGJ1dHRvbi5jbGljayggZnVuY3Rpb24oZSkge1xuXHRcdFx0XHQvLyBiYWlsIGVhcmx5IGlmIG5vdCBhY3RpdmVcblx0XHRcdFx0aWYoICFhY2YudmFsaWRhdGlvbi5hY3RpdmUgKSB7XG5cblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gaWdub3JlIHZhbGlkYXRpb24gKG9ubHkgaWdub3JlIG9uY2UpXG5cdFx0XHRcdGlmKCBhY2YudmFsaWRhdGlvbi5pZ25vcmUgKSB7XG5cdFx0XHRcdFx0YWNmLnZhbGlkYXRpb24uaWdub3JlID0gMDtcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIHN0b3AgV1AgSlMgdmFsaWRhdGlvblxuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cblxuXHRcdFx0XHQvLyBzdG9yZSBzdWJtaXQgdHJpZ2dlciBzbyBpdCB3aWxsIGJlIGNsaWNrZWQgaWYgdmFsaWRhdGlvbiBpcyBwYXNzZWRcblx0XHRcdFx0YWNmLnZhbGlkYXRpb24uJHRyaWdnZXIgPSAkKHRoaXMpO1xuXG5cdFx0XHRcdC8vIHJ1biB2YWxpZGF0aW9uXG5cdFx0XHRcdGFjZi52YWxpZGF0aW9uLmZldGNoKCAkZm9ybSApO1xuXG5cdFx0XHRcdC8vIHN0b3AgYWxsIG90aGVyIGNsaWNrIGV2ZW50cyBvbiB0aGlzIGlucHV0XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH0pO1xuXHRcdFx0Ly8gbW92ZSBvdXIgZXZlbnRzIGhhbmRsZXIgdG8gZnJvbnRcblx0XHRcdCQuX2RhdGEoJGJ1dHRvblswXSwnZXZlbnRzJykuY2xpY2sucmV2ZXJzZSgpXG5cdFx0fVxuXHR9KTtcblx0cWUuZm9ybS5RdWlja0VkaXQgPSBxZS5mb3JtLlZpZXcuZXh0ZW5kKHtcblxuXHR9KTtcblxuXHRxZS5mb3JtLkJ1bGtFZGl0ID0gcWUuZm9ybS5WaWV3LmV4dGVuZCh7XG5cdFx0Ly8gdG9kbzogZG8gbm90IGNoYW5nZVxuXHR9KTtcblxuXG5cblx0cWUuZmllbGQuVmlldyA9IHdwLm1lZGlhLlZpZXcuZXh0ZW5kKHtcblx0XHRpbml0aWFsaXplOmZ1bmN0aW9uKCl7XG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdFx0XHRCYWNrYm9uZS5WaWV3LnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdHRoaXMua2V5ID0gdGhpcy4kZWwuYXR0cignZGF0YS1rZXknKTtcblxuXHRcdFx0aWYgKCAhIHRoaXMuJGlucHV0ICkge1xuXHRcdFx0XHR0aGlzLiRpbnB1dCA9IHRoaXMuJCgnaW5wdXQnKVxuXHRcdFx0fVxuXHRcdFx0dGhpcy4kaW5wdXQucHJvcCggJ3JlYWRvbmx5JywgdHJ1ZSApO1xuXHRcdFx0dGhpcy4kKCcqJykub24oJ2NoYW5nZScsZnVuY3Rpb24oKXtzZWxmLnJlc2V0RXJyb3IoKX0pXG5cdFx0fSxcblx0XHRzZXRWYWx1ZTpmdW5jdGlvbih2YWx1ZSl7XG5cdFx0XHR0aGlzLiRpbnB1dC5wcm9wKCAncmVhZG9ubHknLCBmYWxzZSApO1xuXHRcdFx0dGhpcy4kaW5wdXQudmFsKHZhbHVlKTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH0sXG5cdFx0c2V0RXJyb3I6ZnVuY3Rpb24obWVzc2FnZSkge1xuXHRcdFx0dGhpcy4kZWwuYXR0cignZGF0YS1lcnJvci1tZXNzYWdlJyxtZXNzYWdlKTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH0sXG5cdFx0cmVzZXRFcnJvcjpmdW5jdGlvbigpIHtcblx0XHRcdHRoaXMuJGVsLnJlbW92ZUF0dHIoICdkYXRhLWVycm9yLW1lc3NhZ2UnICk7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9LFxuXHRcdHVubG9hZDpmdW5jdGlvbigpe31cblx0fSk7XG5cblxufSkoalF1ZXJ5LHdpbmRvdyk7XG4iLCIoZnVuY3Rpb24oICQsIHFlICl7XG5cdHZhciBmaWxlX3R5cGUgPSB7XG5cdFx0dHlwZTonZmlsZScsXG5cdFx0bWVkaWFGcmFtZVR5cGU6JycsXG5cdFx0ZXZlbnRzOntcblx0XHRcdCdjbGljayAuc2VsZWN0LW1lZGlhJyA6ICdzZWxlY3RGaWxlJyxcblx0XHRcdCdjbGljayAucmVtb3ZlLW1lZGlhJyA6ICdyZW1vdmVGaWxlJyxcblx0XHR9LFxuXHRcdGluaXRpYWxpemU6ZnVuY3Rpb24oKSB7XG5cblx0XHRcdHFlLmZpZWxkLlZpZXcucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO1xuXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXMsXG5cdFx0XHRcdCRoaWRkZW4gPSB0aGlzLiQoJ1t0eXBlPVwiaGlkZGVuXCJdJyksXG5cdFx0XHRcdHBvc3RfaWQgPSBhY2YuZ2V0KCdwb3N0X2lkJyk7XG5cblx0XHRcdHRoaXMubWVkaWFGcmFtZU9wdHMgPSB7XG5cdFx0XHRcdGZpZWxkXHRcdDogdGhpcy5rZXksXG5cdFx0XHRcdG11bHRpcGxlXHQ6IGZhbHNlLFxuXHRcdFx0XHRwb3N0X2lkXHRcdDogcG9zdF9pZCxcblx0XHRcdFx0bGlicmFyeVx0XHQ6ICRoaWRkZW4uYXR0cignZGF0YS1saWJyYXJ5JyksXG5cdFx0XHRcdG1vZGVcdFx0OidzZWxlY3QnLFxuXHRcdFx0XHR0eXBlXHRcdDogdGhpcy5tZWRpYUZyYW1lVHlwZSxcblx0XHRcdFx0c2VsZWN0XHRcdDogZnVuY3Rpb24gKCBhdHRhY2htZW50LCBpICkge1xuXHRcdFx0XHRcdGlmICggISBhdHRhY2htZW50ICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRzZWxmLnNldFZhbHVlKCBhdHRhY2htZW50LmdldCgnaWQnKSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdFx0aWYgKCAkaGlkZGVuLmRhdGEoJ21pbWVfdHlwZXMnKSApIHtcblx0XHRcdFx0dGhpcy5tZWRpYUZyYW1lT3B0cy5taW1lX3R5cGVzID0gJGhpZGRlbi5kYXRhKCdtaW1lX3R5cGVzJyk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIHRoaXMuJCgnLnNlbGVjdC1tZWRpYScpLm9uKCdjbGljaycsZnVuY3Rpb24oZSl7XG5cdFx0XHQvLyBcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdC8vIFx0c2VsZi5zZWxlY3RGaWxlKCk7XG5cdFx0XHQvLyBcdGNvbnNvbGUubG9nKHRoaXMpO1xuXHRcdFx0Ly8gfSk7XG4vL1x0XHRcdGNvbnNvbGUubG9nKHRoaXMuJCgnLnNlbGVjdC1tZWRpYScpKVxuXHRcdH0sXG5cdFx0c2VsZWN0RmlsZTpmdW5jdGlvbihlKXtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdC8vIENyZWF0ZSBhIG5ldyBtZWRpYSBmcmFtZVxuXHRcdFx0dmFyIG1lZGlhX2ZyYW1lID0gYWNmLm1lZGlhLnBvcHVwKCB0aGlzLm1lZGlhRnJhbWVPcHRzICk7XG5cblx0XHRcdC8vIHNldCBwb3N0IGlkLCBzbyBuZXcgdXBsb2FkcyBhcmUgYXR0YWNoZWQgdG8gZWRpdGVkIHBvc3Rcblx0XHRcdGlmICggYWNmLmlzc2V0KHdpbmRvdywnd3AnLCdtZWRpYScsJ3ZpZXcnLCdzZXR0aW5ncycsJ3Bvc3QnKSAmJiAkLmlzTnVtZXJpYyggdGhpcy5tZWRpYUZyYW1lT3B0cy5wb3N0X2lkICkgKSB7XG5cblx0XHRcdFx0d3AubWVkaWEudmlldy5zZXR0aW5ncy5wb3N0LmlkID0gdGhpcy5tZWRpYUZyYW1lT3B0cy5wb3N0X2lkO1xuXG5cdFx0XHR9XG5cblx0XHR9LFxuXHRcdHJlbW92ZUZpbGU6ZnVuY3Rpb24oZSl7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHR0aGlzLnNldFZhbHVlKCcnKTtcblx0XHR9LFxuXHRcdHNldFZhbHVlOmZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0XHR0aGlzLiQoJ1t0eXBlPVwiaGlkZGVuXCJdJykudmFsKHZhbHVlKTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblx0fTtcblxuXHQvKipcblx0ICpcdGZpZWxkIHR5cGUgZmlsZVxuXHQgKi9cblx0cWUuZmllbGQuYWRkX3R5cGUoIGZpbGVfdHlwZSApO1xuXG5cdC8qKlxuXHQgKlx0ZmllbGQgdHlwZSBpbWFnZVxuXHQgKi9cblx0cWUuZmllbGQuYWRkX3R5cGUoIF8uZXh0ZW5kKGZpbGVfdHlwZSx7dHlwZTonaW1hZ2UnLG1lZGlhRnJhbWVUeXBlOidpbWFnZSd9KSApO1xuXG5cdHFlLmZpZWxkLmFkZF90eXBlKCBmaWxlX3R5cGUgKTtcblxuXHQvKipcblx0ICpcdGZpZWxkIHR5cGUgcmFuZ2Vcblx0ICovXG5cdHFlLmZpZWxkLmFkZF90eXBlKCB7XG5cdFx0IHR5cGU6J3JhbmdlJyxcblx0XHQgZXZlbnRzOntcblx0XHRcdCAnY2hhbmdlIFt0eXBlPVwicmFuZ2VcIl0nXHRcdDogJ2FkYXB0TnVtYmVyJyxcblx0XHRcdCAnbW91c2Vtb3ZlIFt0eXBlPVwicmFuZ2VcIl0nXHRcdDogJ2FkYXB0TnVtYmVyJyxcblx0XHRcdCAnY2hhbmdlIFt0eXBlPVwibnVtYmVyXCJdJ1x0XHQ6ICdhZGFwdFJhbmdlJyxcblx0XHRcdCAnbW91c2Vtb3ZlIFt0eXBlPVwibnVtYmVyXCJdJ1x0OiAnYWRhcHRSYW5nZScsXG5cdFx0IH0sXG5cdFx0IGFkYXB0TnVtYmVyOmZ1bmN0aW9uKCl7XG5cdFx0XHQgdGhpcy4kKCdbdHlwZT1cIm51bWJlclwiXScpLnZhbCggdGhpcy4kKCdbdHlwZT1cInJhbmdlXCJdJykudmFsKCkgKTtcblx0XHQgfSxcblx0XHQgYWRhcHRSYW5nZTpmdW5jdGlvbigpe1xuXHRcdFx0IHRoaXMuJCgnW3R5cGU9XCJyYW5nZVwiXScpLnZhbCggdGhpcy4kKCdbdHlwZT1cIm51bWJlclwiXScpLnZhbCgpICk7XG5cdFx0IH1cblx0IH0gKTtcblxuXG5cdC8qKlxuICBcdCAqXHRmaWVsZCB0eXBlIGRhdGVfcGlja2VyXG4gIFx0ICovXG4gIFx0cWUuZmllbGQuYWRkX3R5cGUoIHtcbiBcdFx0dHlwZTonZGF0ZV9waWNrZXInLFxuXHRcdGluaXRpYWxpemU6ZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdFx0XHR0aGlzLiRpbnB1dFx0XHQ9IHRoaXMuJCggJ1t0eXBlPVwidGV4dFwiXScgKTtcblx0XHRcdHRoaXMuJGhpZGRlblx0PSB0aGlzLiQoICdbdHlwZT1cImhpZGRlblwiXScgKTtcblx0XHRcdHFlLmZpZWxkLlZpZXcucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO1xuXHRcdFx0aWYoICQoJ2JvZHkgPiAjdWktZGF0ZXBpY2tlci1kaXYnKS5sZW5ndGggPiAwICkge1xuXHRcdFx0XHQkKCdib2R5ID4gI3VpLWRhdGVwaWNrZXItZGl2Jykud3JhcCgnPGRpdiBjbGFzcz1cImFjZi11aS1kYXRlcGlja2VyXCIgLz4nKTtcblx0XHRcdH1cblx0XHRcdHRoaXMuZGF0ZVBpY2tlckFyZ3MgPSB7XG5cdFx0XHRcdFx0ZGF0ZUZvcm1hdFx0XHQ6IHRoaXMuJCgnW2RhdGEtZGF0ZV9mb3JtYXRdJykuZGF0YSgnZGF0ZV9mb3JtYXQnKSxcblx0XHRcdFx0XHRhbHRGb3JtYXRcdFx0OiAneXltbWRkJyxcblx0XHRcdFx0XHRhbHRGaWVsZFx0XHQ6IHRoaXMuJGhpZGRlbixcblx0XHRcdFx0XHRjaGFuZ2VZZWFyXHRcdDogdHJ1ZSxcblx0XHRcdFx0XHR5ZWFyUmFuZ2VcdFx0OiBcIi0xMDA6KzEwMFwiLFxuXHRcdFx0XHRcdGNoYW5nZU1vbnRoXHRcdDogdHJ1ZSxcblx0XHRcdFx0XHRzaG93QnV0dG9uUGFuZWxcdDogdHJ1ZSxcblx0XHRcdFx0XHRmaXJzdERheVx0XHQ6IHRoaXMuJCgnW2RhdGEtZmlyc3RfZGF5XScpLmRhdGEoJ2ZpcnN0X2RheScpXG5cdFx0XHRcdH07XG5cdFx0XHR0aGlzLiRpbnB1dC5kYXRlcGlja2VyKCB0aGlzLmRhdGVQaWNrZXJBcmdzICkub24oJ2JsdXInLGZ1bmN0aW9uKCl7XG5cdFx0XHRcdGlmICggISAkKHRoaXMpLnZhbCgpICkge1xuXHRcdFx0XHRcdHNlbGYuJGhpZGRlbi52YWwoJycpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH0sXG5cdFx0c2V0VmFsdWU6ZnVuY3Rpb24odmFsdWUpIHtcblx0XHRcdHZhciBkYXRlO1xuXG5cdFx0XHR0aGlzLiRpbnB1dC5wcm9wKCdyZWFkb25seScsZmFsc2UpO1xuXG5cdFx0XHR0cnkge1xuXHRcdFx0XHRkYXRlID0gJC5kYXRlcGlja2VyLnBhcnNlRGF0ZSggdGhpcy5kYXRlUGlja2VyQXJncy5hbHRGb3JtYXQsIHZhbHVlICk7XG5cdFx0XHR9IGNhdGNoKGVycikge1xuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH1cbi8vXHRcdFx0Y29uc29sZS5sb2codmFsdWUsdGhpcy5kYXRlUGlja2VyQXJncy5hbHRGb3JtYXQsdGhpcy5kYXRlUGlja2VyQXJncy5hbHRUaW1lRm9ybWF0LHR5cGVvZiB2YWx1ZSk7XG5cdFx0XHR0aGlzLiRpbnB1dC5kYXRlcGlja2VyKCAnc2V0RGF0ZScsIGRhdGUgKTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cbiBcdH0pO1xuXG5cdC8qKlxuIFx0ICpcdGZpZWxkIHR5cGUgZGF0ZV90aW1lX3BpY2tlclxuIFx0ICovXG4gXHRxZS5maWVsZC5hZGRfdHlwZSgge1xuXHRcdHR5cGU6J2RhdGVfdGltZV9waWNrZXInLFxuXHRcdGluaXRpYWxpemU6ZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdFx0XHR0aGlzLiRpbnB1dFx0XHQ9IHRoaXMuJCggJ1t0eXBlPVwidGV4dFwiXScgKTtcblx0XHRcdHRoaXMuJGhpZGRlblx0PSB0aGlzLiQoICdbdHlwZT1cImhpZGRlblwiXScgKTtcblx0XHRcdHFlLmZpZWxkLlZpZXcucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO1xuXHRcdFx0aWYoICQoJ2JvZHkgPiAjdWktZGF0ZXBpY2tlci1kaXYnKS5sZW5ndGggPiAwICkge1xuXHRcdFx0XHQkKCdib2R5ID4gI3VpLWRhdGVwaWNrZXItZGl2Jykud3JhcCgnPGRpdiBjbGFzcz1cImFjZi11aS1kYXRlcGlja2VyXCIgLz4nKTtcblx0XHRcdH1cblx0XHRcdHRoaXMuZGF0ZVBpY2tlckFyZ3MgPSB7XG5cdFx0XHRcdFx0YWx0RmllbGRcdFx0XHQ6IHRoaXMuJGhpZGRlbixcblx0XHRcdFx0XHRkYXRlRm9ybWF0XHRcdFx0OiB0aGlzLiQoJ1tkYXRhLWRhdGVfZm9ybWF0XScpLmRhdGEoJ2RhdGVfZm9ybWF0JyksXG5cdFx0XHRcdFx0YWx0Rm9ybWF0XHRcdFx0OiAneXktbW0tZGQnLFxuXHRcdFx0XHRcdHRpbWVGb3JtYXRcdFx0XHQ6IHRoaXMuJCgnW2RhdGEtdGltZV9mb3JtYXRdJykuZGF0YSgndGltZV9mb3JtYXQnKSxcblx0XHRcdFx0XHRhbHRUaW1lRm9ybWF0XHRcdDogJ0hIOm1tOnNzJyxcblx0XHRcdFx0XHRhbHRGaWVsZFRpbWVPbmx5XHQ6IGZhbHNlLFxuXHRcdFx0XHRcdGNoYW5nZVllYXJcdFx0XHQ6IHRydWUsXG5cdFx0XHRcdFx0eWVhclJhbmdlXHRcdFx0OiBcIi0xMDA6KzEwMFwiLFxuXHRcdFx0XHRcdGNoYW5nZU1vbnRoXHRcdFx0OiB0cnVlLFxuXHRcdFx0XHRcdHNob3dCdXR0b25QYW5lbFx0XHQ6IHRydWUsXG5cdFx0XHRcdFx0Zmlyc3REYXlcdFx0XHQ6IHRoaXMuJCgnW2RhdGEtZmlyc3RfZGF5XScpLmRhdGEoJ2ZpcnN0X2RheScpLFxuXHRcdFx0XHRcdGNvbnRyb2xUeXBlXHRcdFx0OiAnc2VsZWN0Jyxcblx0XHRcdFx0XHRvbmVMaW5lXHRcdFx0XHQ6IHRydWVcblx0XHRcdFx0fTtcblxuXHRcdFx0dGhpcy4kaW5wdXQuZGF0ZXRpbWVwaWNrZXIoIHRoaXMuZGF0ZVBpY2tlckFyZ3MgKS5vbignYmx1cicsZnVuY3Rpb24oKXtcblx0XHRcdFx0aWYgKCAhICQodGhpcykudmFsKCkgKSB7XG5cdFx0XHRcdFx0c2VsZi4kaGlkZGVuLnZhbCgnJyk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fSxcblx0XHRzZXRWYWx1ZTpmdW5jdGlvbih2YWx1ZSkge1xuXHRcdFx0dmFyIGRhdGU7XG5cblx0XHRcdHRoaXMuJGlucHV0LnByb3AoJ3JlYWRvbmx5JyxmYWxzZSk7XG5cblx0XHRcdHRyeSB7XG5cdFx0XHRcdGRhdGUgPSAkLmRhdGVwaWNrZXIucGFyc2VEYXRlVGltZShcblx0XHRcdFx0XHR0aGlzLmRhdGVQaWNrZXJBcmdzLmFsdEZvcm1hdCxcblx0XHRcdFx0XHR0aGlzLmRhdGVQaWNrZXJBcmdzLmFsdFRpbWVGb3JtYXQsXG5cdFx0XHRcdFx0dmFsdWVcblx0XHRcdFx0KTtcblx0XHRcdH0gY2F0Y2goZXJyKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoICEgZGF0ZSApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0Ly8qXG5cdFx0XHR0aGlzLiRoaWRkZW4udmFsKGRhdGUpO1xuXHRcdFx0dGhpcy4kaW5wdXQudmFsKCAkLmRhdGVwaWNrZXIuZm9ybWF0RGF0ZSh0aGlzLmRhdGVQaWNrZXJBcmdzLmRhdGVGb3JtYXQsIGRhdGUpICsgJyAnICsgJC5kYXRlcGlja2VyLmZvcm1hdFRpbWUoXG5cdFx0XHRcdHRoaXMuZGF0ZVBpY2tlckFyZ3MudGltZUZvcm1hdCxcblx0XHRcdFx0ZGF0ZVxuXHRcdFx0KSk7XG5cdFx0XHQvKi9cblx0XHRcdC8vIHdpbGwgc2V0IGZvcm0gZGlydHkgaWYgZG9uZSBsaWtlIHRoaXNcblx0XHRcdHRoaXMuJGlucHV0LmRhdGVwaWNrZXIoICdzZXREYXRlJywgZGF0ZSApO1xuXHRcdFx0Ly8qL1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXHR9KTtcblxuXHQvKipcbiBcdCAqXHRmaWVsZCB0eXBlIHRpbWVfcGlja2VyXG4gXHQgKi9cbiBcdHFlLmZpZWxkLmFkZF90eXBlKCB7XG5cdFx0dHlwZTondGltZV9waWNrZXInLFxuXHRcdGluaXRpYWxpemU6ZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdFx0XHR0aGlzLiRpbnB1dFx0XHQ9IHRoaXMuJCggJ1t0eXBlPVwidGV4dFwiXScgKTtcblx0XHRcdHRoaXMuJGhpZGRlblx0PSB0aGlzLiQoICdbdHlwZT1cImhpZGRlblwiXScgKTtcblx0XHRcdHFlLmZpZWxkLlZpZXcucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO1xuXHRcdFx0aWYoICQoJ2JvZHkgPiAjdWktZGF0ZXBpY2tlci1kaXYnKS5sZW5ndGggPiAwICkge1xuXHRcdFx0XHQkKCdib2R5ID4gI3VpLWRhdGVwaWNrZXItZGl2Jykud3JhcCgnPGRpdiBjbGFzcz1cImFjZi11aS1kYXRlcGlja2VyXCIgLz4nKTtcblx0XHRcdH1cblx0XHRcdHRoaXMuZGF0ZVBpY2tlckFyZ3MgPSB7XG4gXHRcdFx0XHRcdHRpbWVGb3JtYXRcdFx0XHQ6IHRoaXMuJCgnW2RhdGEtdGltZV9mb3JtYXRdJykuZGF0YSgndGltZV9mb3JtYXQnKSxcbiBcdFx0XHRcdFx0YWx0VGltZUZvcm1hdFx0XHQ6ICdISDptbTpzcycsXG4gXHRcdFx0XHRcdGFsdEZpZWxkXHRcdFx0OiB0aGlzLiRoaWRkZW4sXG4gXHRcdFx0XHRcdGFsdEZpZWxkVGltZU9ubHlcdDogZmFsc2UsXG4gXHRcdFx0XHRcdHNob3dCdXR0b25QYW5lbFx0XHQ6IHRydWUsXG4gXHRcdFx0XHRcdGNvbnRyb2xUeXBlXHRcdFx0OiAnc2VsZWN0JyxcbiBcdFx0XHRcdFx0b25lTGluZVx0XHRcdFx0OiB0cnVlXG4gXHRcdFx0XHR9O1xuXG4gXHRcdFx0dGhpcy4kaW5wdXQudGltZXBpY2tlciggdGhpcy5kYXRlUGlja2VyQXJncyApLm9uKCdibHVyJyxmdW5jdGlvbigpe1xuIFx0XHRcdFx0aWYgKCAhICQodGhpcykudmFsKCkgKSB7XG4gXHRcdFx0XHRcdHNlbGYuJGhpZGRlbi52YWwoJycpO1xuIFx0XHRcdFx0fVxuIFx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fSxcbiBcdFx0c2V0VmFsdWU6ZnVuY3Rpb24odmFsdWUpIHtcblx0XHRcdHZhciB0aW1lO1xuXG5cdFx0XHR0aGlzLiRpbnB1dC5wcm9wKCdyZWFkb25seScsZmFsc2UpO1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0dGltZSA9ICQuZGF0ZXBpY2tlci5wYXJzZVRpbWUoIHRoaXMuZGF0ZVBpY2tlckFyZ3MuYWx0VGltZUZvcm1hdCwgdmFsdWUgKTtcblx0XHRcdH0gY2F0Y2goZXJyKXtcblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9XG5cdFx0XHRpZiAoICEgdGltZSApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy4kaGlkZGVuLnZhbCggdmFsdWUgKTtcblx0XHRcdHRoaXMuJGlucHV0LnZhbCggJC5kYXRlcGlja2VyLmZvcm1hdFRpbWUoIHRoaXMuZGF0ZVBpY2tlckFyZ3MudGltZUZvcm1hdCwgdGltZSApIClcblx0XHRcdHJldHVybiB0aGlzO1xuIFx0XHR9XG5cdH0pO1xuXG5cdC8qKlxuIFx0ICpcdGZpZWxkIHR5cGUgdGltZV9waWNrZXJcbiBcdCAqL1xuIFx0cWUuZmllbGQuYWRkX3R5cGUoIHtcblx0XHR0eXBlOidjb2xvcl9waWNrZXInLFxuXHRcdGluaXRpYWxpemU6ZnVuY3Rpb24oKSB7XG5cdFx0XHR0aGlzLiRpbnB1dCA9IHRoaXMuJCgnW3R5cGU9XCJ0ZXh0XCJdJykuZmlyc3QoKS53cENvbG9yUGlja2VyKCk7XG5cdFx0XHRxZS5maWVsZC5WaWV3LnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtcblx0XHR9LFxuXHRcdHNldFZhbHVlOmZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdHRoaXMuJGlucHV0LnByb3AoJ3JlYWRvbmx5JyxmYWxzZSk7XG5cdFx0XHR0aGlzLiRpbnB1dC53cENvbG9yUGlja2VyKCAnY29sb3InLCB2YWx1ZSApO1xuXHRcdH0sXG5cdFx0dW5sb2FkOmZ1bmN0aW9uKCkge1xuXHRcdFx0JCggJ2JvZHknICkub2ZmKCAnY2xpY2sud3Bjb2xvcnBpY2tlcicgKTtcblx0XHR9XG5cdH0pO1xuXG5cblxuXHQvKipcbiBcdCAqXHRmaWVsZCB0eXBlIHRpbWVfcGlja2VyXG4gXHQgKi9cbiBcdHFlLmZpZWxkLmFkZF90eXBlKCB7XG5cdFx0dHlwZTondGV4dGFyZWEnLFxuXHRcdGluaXRpYWxpemU6ZnVuY3Rpb24oKSB7XG5cdFx0XHR0aGlzLiRpbnB1dCA9IHRoaXMuJCgndGV4dGFyZWEnKS5wcm9wKCAncmVhZG9ubHknLCB0cnVlICk7XG5cblx0XHRcdHFlLmZpZWxkLlZpZXcucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO1xuXG5cblx0XHRcdHRoaXMuJGlucHV0Lm9uKCdrZXlkb3duIGtleXVwJywgZnVuY3Rpb24oZSkge1xuXHRcdFx0XHRpZiAoIGUud2hpY2ggPT0gMTMgfHwgZS53aGljaCA9PSAyNyApIHtcblx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuLy9cdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdHNldFZhbHVlOmZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdHRoaXMuJGlucHV0LnByb3AoICdyZWFkb25seScsIGZhbHNlICkudmFsKHZhbHVlKTtcblx0XHR9XG5cdH0pO1xuXG5cdC8qKlxuIFx0ICpcdGZpZWxkIHR5cGUgY2hvaWNlXG4gXHQgKi9cblx0Ly8gVG9kb1xuXG5cdC8qKlxuIFx0ICpcdGZpZWxkIHR5cGUgY2hlY2tib3hcbiBcdCAqL1xuXHQvLyBUb2RvXG5cdHFlLmZpZWxkLmFkZF90eXBlKCB7XG5cdFx0dHlwZTonY2hlY2tib3gnLFxuXHRcdGV2ZW50czp7XG5cdFx0XHQnY2xpY2sgLmFkZC1jaG9pY2UnOiAnYWRkQ2hvaWNlJyxcblx0XHRcdCdjaGFuZ2UgW3R5cGU9XCJjaGVja2JveFwiXS5jdXN0b20nIDogJ3JlbW92ZUNob2ljZSdcblx0XHR9LFxuXHRcdGluaXRpYWxpemU6ZnVuY3Rpb24oKSB7XG5cdFx0XHR0aGlzLiRpbnB1dCA9IHRoaXMuJCgnW3R5cGU9XCJjaGVja2JveFwiXScpLnByb3AoICdyZWFkb25seScsIHRydWUgKTtcblx0XHRcdHFlLmZpZWxkLlZpZXcucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO1xuXG5cdFx0fSxcblx0XHRzZXRWYWx1ZTpmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdFx0XHR0aGlzLiRpbnB1dC5wcm9wKCAncmVhZG9ubHknLCBmYWxzZSApLnZhbCh2YWx1ZSk7XG5cdFx0XHRpZiAoICQuaXNBcnJheSh2YWx1ZSkgKSB7XG5cdFx0XHRcdCQuZWFjaCggdmFsdWUsIGZ1bmN0aW9uKCBpZHgsIHZhbCApIHtcblx0XHRcdFx0XHRzZWxmLiQoICdbdHlwZT1cImNoZWNrYm94XCJdW3ZhbHVlPVwiJyt2YWwrJ1wiXScgKVxuXHRcdFx0XHRcdFx0LnByb3AoICdjaGVja2VkJyx0cnVlKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLiQoICdbdHlwZT1cImNoZWNrYm94XCJdW3ZhbHVlPVwiJyt2YWx1ZSsnXCJdJyApXG5cdFx0XHRcdFx0LnByb3AoICdjaGVja2VkJyx0cnVlKTtcblx0XHRcdH1cbiBcdFx0fSxcblx0XHRhZGRDaG9pY2U6ZnVuY3Rpb24oZSl7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHR2YXIgdHBsID0gd3AudGVtcGxhdGUoJ2FjZi1xZWYtY3VzdG9tLWNob2ljZS0nICsgdGhpcy4kZWwuYXR0cignZGF0YS1rZXknKSk7XG5cdFx0XHR0aGlzLiQoJ3VsJykuYXBwZW5kKHRwbCgpKTtcblx0XHR9LFxuXHRcdHJlbW92ZUNob2ljZTpmdW5jdGlvbihlKSB7XG5cdFx0XHQkKGUudGFyZ2V0KS5jbG9zZXN0KCdsaScpLnJlbW92ZSgpO1xuXHRcdH1cblxuXHR9KTtcblxuXHQvKipcbiBcdCAqXHRmaWVsZCB0eXBlIHJhZGlvXG4gXHQgKi9cblx0cWUuZmllbGQuYWRkX3R5cGUoIHtcblx0XHR0eXBlOidyYWRpbycsXG5cdFx0aW5pdGlhbGl6ZTpmdW5jdGlvbigpIHtcblx0XHRcdHZhciAkb3RoZXIsIGlzX290aGVyO1xuXG5cdFx0XHR0aGlzLiRpbnB1dCA9IHRoaXMuJCgnW3R5cGU9XCJyYWRpb1wiXScpO1xuXG5cdFx0XHRxZS5maWVsZC5WaWV3LnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtcblxuXHRcdFx0dGhpcy4kKCdbdHlwZT1cInJhZGlvXCJdJykucHJvcCggJ3JlYWRvbmx5JywgdHJ1ZSApO1xuXG5cdFx0XHRpZiAoIHRoaXMuJCgndWwuYWNmLXJhZGlvLWxpc3Qub3RoZXInKS5sZW5ndGggKSB7XG5cdFx0XHRcdCRvdGhlciA9IHRoaXMuJCgnW3R5cGU9XCJ0ZXh0XCJdJyk7XG5cdFx0XHRcdHRoaXMuJCgnW3R5cGU9XCJyYWRpb1wiXScpLm9uKCdjaGFuZ2UnLGZ1bmN0aW9uKGUpe1xuXHRcdFx0XHRcdC8vY29uc29sZS5sb2codGhpcywkKHRoaXMpLmlzKCc6Y2hlY2tlZCcpKVxuXHRcdFx0XHRcdGlzX290aGVyID0gJCh0aGlzKS5pcygnW3ZhbHVlPVwib3RoZXJcIl06Y2hlY2tlZCcpO1xuXHRcdFx0XHRcdCRvdGhlclxuXHRcdFx0XHRcdFx0LnByb3AoJ2Rpc2FibGVkJywgISBpc19vdGhlciApXG5cdFx0XHRcdFx0XHQucHJvcCgncmVhZG9ubHknLCAhIGlzX290aGVyICk7XG5cblx0XHRcdFx0fSlcblx0XHRcdH1cblx0XHR9LFxuXHRcdHNldFZhbHVlOmZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdHRoaXMuJGlucHV0LnByb3AoICdyZWFkb25seScsIGZhbHNlICk7XG5cdFx0XHR0aGlzLiQoJ1t0eXBlPVwicmFkaW9cIl1bdmFsdWU9XCInK3ZhbHVlKydcIl0nIClcblx0XHRcdFx0LnByb3AoICdjaGVja2VkJywgdHJ1ZSApO1xuIFx0XHR9XG5cdH0pO1xuXG5cdC8qKlxuIFx0ICpcdGZpZWxkIHR5cGUgc2VsZWN0XG4gXHQgKi9cblx0cWUuZmllbGQuYWRkX3R5cGUoIHtcblx0XHR0eXBlOidzZWxlY3QnLFxuXHRcdGluaXRpYWxpemU6ZnVuY3Rpb24oKSB7XG5cdFx0XHRxZS5maWVsZC5WaWV3LnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtcblxuXHRcdFx0dGhpcy4kaW5wdXQgPSB0aGlzLiQoJ3NlbGVjdCcpLnByb3AoICdyZWFkb25seScsIHRydWUgKTtcblx0XHR9LFxuXHRcdHNldFZhbHVlOmZ1bmN0aW9uKCB2YWx1ZSApIHtcbiBcdFx0XHR0aGlzLiRpbnB1dC5wcm9wKCAncmVhZG9ubHknLCBmYWxzZSApLnZhbCh2YWx1ZSk7XG4gXHRcdH1cblx0fSk7XG5cblx0LyoqXG4gXHQgKlx0ZmllbGQgdHlwZSB0cnVlX2ZhbHNlXG4gXHQgKi9cblx0IHFlLmZpZWxkLmFkZF90eXBlKCB7XG4gXHRcdHR5cGU6J3RydWVfZmFsc2UnLFxuIFx0XHRpbml0aWFsaXplOmZ1bmN0aW9uKCkge1xuIFx0XHRcdHFlLmZpZWxkLlZpZXcucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO1xuXG4gXHRcdFx0dGhpcy4kKCdbdHlwZT1cInJhZGlvXCJdJykucHJvcCggJ3JlYWRvbmx5JywgdHJ1ZSApO1xuIFx0XHR9LFxuIFx0XHRzZXRWYWx1ZTpmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHR0aGlzLiQoJ1t0eXBlPVwicmFkaW9cIl0nKS5wcm9wKCAncmVhZG9ubHknLCBmYWxzZSApO1xuXHRcdFx0dGhpcy4kKCdbdHlwZT1cInJhZGlvXCJdW3ZhbHVlPVwiJyt2YWx1ZSsnXCJdJyApXG5cdFx0XHRcdC5wcm9wKCAnY2hlY2tlZCcsIHRydWUgKTtcbiAgXHRcdH1cbiBcdH0pO1xuXHQvLyBUb2RvXG5cbn0pKCBqUXVlcnksIGFjZl9xdWlja2VkaXQgKTtcblxuXG4vKlxucmFuZ2VcbnNlbGVjdFxuY2hlY2tib3hcbnJhZGlvXG50cnVlX2ZhbHNlXG5pbWFnZVxuZmlsZVxuZGF0ZV9waWNrZXJcbmRhdGVfdGltZV9waWNrZXJcbnRpbWVfcGlja2VyXG5jb2xvcl9waWNrZXJcblxuKi9cbiIsIi8vdmFyIGFjZl9xdWlja2VkaXQgPSB7fTtcblxuXG4oZnVuY3Rpb24oJCxxZSkge1xuXG5cblxuXHRpZiAoICd1bmRlZmluZWQnICE9PSB0eXBlb2YgaW5saW5lRWRpdFBvc3QgKSB7XG5cdFx0Ly8gd2UgY3JlYXRlIGEgY29weSBvZiB0aGUgV1AgaW5saW5lIGVkaXQgcG9zdCBmdW5jdGlvblxuXHRcdHZhciBfd3BfaW5saW5lX2VkaXRfcG9zdCA9IGlubGluZUVkaXRQb3N0LmVkaXQsXG5cdFx0XHRfd3BfaW5saW5lX2VkaXRfc2F2ZSA9IGlubGluZUVkaXRQb3N0LnNhdmUsXG5cdFx0XHRfd3BfaW5saW5lX2VkaXRfcmV2ZXJ0ID0gaW5saW5lRWRpdFBvc3QucmV2ZXJ0O1xuXHRcdC8vIGFuZCB0aGVuIHdlIG92ZXJ3cml0ZSB0aGUgZnVuY3Rpb24gd2l0aCBvdXIgb3duIGNvZGVcblx0XHRpbmxpbmVFZGl0UG9zdC5lZGl0ID0gZnVuY3Rpb24oIGlkICkge1xuXHRcdFx0dmFyIG9iamVjdF9pZCwgJHRyLCBmb3JtX2NsYXNzO1xuXG5cblx0XHRcdC8vIFwiY2FsbFwiIHRoZSBvcmlnaW5hbCBXUCBlZGl0IGZ1bmN0aW9uXG5cdFx0XHQvLyB3ZSBkb24ndCB3YW50IHRvIGxlYXZlIFdvcmRQcmVzcyBoYW5naW5nXG5cdFx0XHRfd3BfaW5saW5lX2VkaXRfcG9zdC5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cblx0XHRcdC8vIGdldCB0aGUgcG9zdCBJRFxuXHRcdFx0b2JqZWN0X2lkID0gMDtcblx0XHRcdGlmICggdHlwZW9mKCBpZCApID09PSAnb2JqZWN0JyApIHtcblx0XHRcdFx0b2JqZWN0X2lkID0gcGFyc2VJbnQoIHRoaXMuZ2V0SWQoIGlkICkgKTtcblx0XHRcdH1cblx0XHRcdCR0ciA9ICQoJyNlZGl0LScgKyBvYmplY3RfaWQgKTtcbi8vXHRcdFx0Z2V0X2FjZl9wb3N0X2RhdGEoIG9iamVjdF9pZCAsICQoJyNlZGl0LScgKyBvYmplY3RfaWQgKSApO1xuXHRcdFx0aWYgKCAkdHIuaXMoJy5xdWljay1lZGl0LXJvdycpICkge1xuXHRcdFx0XHRmb3JtX2NsYXNzID0gcWUuZm9ybS5RdWlja0VkaXQ7XG5cdFx0XHR9IGVsc2UgaWYgKCAkdHIuaXMoJy5idWxrLWVkaXQtcm93JykgKSB7XG5cdFx0XHRcdGZvcm1fY2xhc3MgPSBxZS5mb3JtLkJ1bGtFZGl0O1xuXHRcdFx0fVxuXHRcdFx0aWYgKCAhIGZvcm1fY2xhc3MgKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHRoaXMuYWNmX3FlZF9mb3JtID0gbmV3IGZvcm1fY2xhc3Moe1xuXHRcdFx0XHRlbDogJHRyLmdldCgwKSxcblx0XHRcdFx0b2JqZWN0X2lkOiBvYmplY3RfaWRcblx0XHRcdH0pO1xuXHRcdH07XG5cdFx0aW5saW5lRWRpdFBvc3QucmV2ZXJ0ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHQvLyB1bmxvYWQgZm9ybXNcblx0XHRcdCEhIHRoaXMuYWNmX3FlZF9mb3JtICYmIHRoaXMuYWNmX3FlZF9mb3JtLnVubG9hZCgpO1xuXHRcdFx0cmV0dXJuIF93cF9pbmxpbmVfZWRpdF9yZXZlcnQuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdH1cblx0XHRpbmxpbmVFZGl0UG9zdC5zYXZlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHQvLyB1bmxvYWQgZm9ybXNcblx0XHRcdCEhIHRoaXMuYWNmX3FlZF9mb3JtICYmIHRoaXMuYWNmX3FlZF9mb3JtLnVubG9hZCgpO1xuXHRcdFx0cmV0dXJuIF93cF9pbmxpbmVfZWRpdF9zYXZlLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHR9XG5cdH1cblx0Ly8gdG9kbzogaW5saW5lRWRpdFRheFxuXHRpZiAoICd1bmRlZmluZWQnICE9PSB0eXBlb2YgaW5saW5lRWRpdFRheCApIHtcblxuXHRcdHZhciBfd3BfaW5saW5lX2VkaXRfdGF4ID0gaW5saW5lRWRpdFRheC5lZGl0LFxuXHRcdFx0X3dwX2lubGluZV9lZGl0X3NhdmUgPSBpbmxpbmVFZGl0VGF4LnNhdmUsXG5cdFx0XHRfd3BfaW5saW5lX2VkaXRfcmV2ZXJ0ID0gaW5saW5lRWRpdFRheC5yZXZlcnQ7XG5cblx0XHRpbmxpbmVFZGl0VGF4LmVkaXQgPSBmdW5jdGlvbiggaWQgKSB7XG5cdFx0XHR2YXIgb2JqZWN0X2lkLCAkdHIsXG5cdFx0XHRcdHRheCA9ICQoJ2lucHV0W25hbWU9XCJ0YXhvbm9teVwiXScpLnZhbCgpO1xuXG5cdFx0XHRfd3BfaW5saW5lX2VkaXRfdGF4LmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblxuXHRcdFx0Ly8gZ2V0IHRoZSBwb3N0IElEXG5cdFx0XHRvYmplY3RfaWQgPSAwO1xuXHRcdFx0aWYgKCB0eXBlb2YoIGlkICkgPT09ICdvYmplY3QnICkge1xuXHRcdFx0XHRvYmplY3RfaWQgPSBwYXJzZUludCggdGhpcy5nZXRJZCggaWQgKSApO1xuXHRcdFx0fVxuXHRcdFx0JHRyID0gJCgnI2VkaXQtJyArIG9iamVjdF9pZCApO1xuXG5cdFx0XHR0aGlzLmFjZl9xZWRfZm9ybSA9IG5ldyBxZS5mb3JtLlF1aWNrRWRpdCh7XG5cdFx0XHRcdGVsOiAkdHIuZ2V0KDApLFxuXHRcdFx0XHRvYmplY3RfaWQ6IHRheCArICdfJyArIG9iamVjdF9pZFxuXHRcdFx0fSk7XG5cblx0XHR9O1xuXHRcdGlubGluZUVkaXRUYXgucmV2ZXJ0ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHQvLyB1bmxvYWQgZm9ybXNcblx0XHRcdCEhIHRoaXMuYWNmX3FlZF9mb3JtICYmIHRoaXMuYWNmX3FlZF9mb3JtLnVubG9hZCgpO1xuXHRcdFx0cmV0dXJuIF93cF9pbmxpbmVfZWRpdF9yZXZlcnQuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdH1cblx0XHRpbmxpbmVFZGl0VGF4LnNhdmUgPSBmdW5jdGlvbigpIHtcblx0XHRcdC8vIHVubG9hZCBmb3Jtc1xuXHRcdFx0ISEgdGhpcy5hY2ZfcWVkX2Zvcm0gJiYgdGhpcy5hY2ZfcWVkX2Zvcm0udW5sb2FkKCk7XG5cdFx0XHRyZXR1cm4gX3dwX2lubGluZV9lZGl0X3NhdmUuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybjtcblxuXHR2YXIgbWVkaWFfZnJhbWU7XG5cblx0ZnVuY3Rpb24gZ2V0X2FjZl9wb3N0X2RhdGEoIHBvc3RfaWQgLCAkcGFyZW50ICkge1xuXHRcdC8vXG5cdFx0Ly8gTG9hZCBGaWVsZCBWYWx1ZXNcblx0XHQvL1xuXHRcdHZhciByZXFfZGF0YSA9IHtcblx0XHRcdCdhY3Rpb24nIDogJ2dldF9hY2ZfcG9zdF9tZXRhJyxcblx0XHRcdCdwb3N0X2lkJyA6IHBvc3RfaWQsXG5cdFx0XHQnYWNmX2ZpZWxkX2tleXMnIDogW11cblx0XHR9O1xuXHRcdC8vIC4uLiBnYXRoZXIgZmllbGRzIC4uLlxuXHRcdCRwYXJlbnQuZmluZCgnW2RhdGEtYWNmLWZpZWxkLWtleV0nKS5lYWNoKGZ1bmN0aW9uKCl7XG5cblx0XHRcdHJlcV9kYXRhLmFjZl9maWVsZF9rZXlzLnB1c2goICQodGhpcykuYXR0cignZGF0YS1hY2YtZmllbGQta2V5JykgKTtcblxuXHRcdFx0JCh0aGlzKS5wcm9wKCAncmVhZG9ubHknLCB0cnVlICk7XG5cblx0XHRcdGlmICggISAkKHRoaXMpLmlzKCdbZGF0YS1pcy1kby1ub3QtY2hhbmdlPVwidHJ1ZVwiXScgKSApIHtcblx0XHRcdFx0aWYgKCAkKHRoaXMpLmlzKCdbdHlwZT1cInJhZGlvXCJdLFt0eXBlPVwiY2hlY2tib3hcIl0nKSApIHtcblx0XHRcdFx0XHQkKHRoaXMpLnByb3AoICdjaGVja2VkJywgZmFsc2UgKTtcblx0XHRcdFx0fSBlbHNlIGlmICggJCh0aGlzKS5wYXJlbnQoKS5pcygnLmFjZi1xdWljay1lZGl0LWRhdGVfcGlja2VyLCAuYWNmLXF1aWNrLWVkaXQtdGltZV9waWNrZXIsIC5hY2YtcXVpY2stZWRpdC1kYXRlX3RpbWVfcGlja2VyJyApICkge1xuXHRcdFx0XHRcdCQodGhpcykubmV4dCgnW3R5cGU9XCJ0ZXh0XCJdJykucHJvcCggJ3JlYWRvbmx5JywgdHJ1ZSApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCQodGhpcykudmFsKCcnKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gLi4uIHNlbmQgYSByZXF1ZXN0IC4uLlxuXHRcdCQucG9zdCggYWpheHVybCwgcmVxX2RhdGEsIGZ1bmN0aW9uKCByZXN1bHQgKSB7XG5cdFx0XHR2YXIgaSwga2V5LCB2YWx1ZSwgJHRyLCAkZmllbGQsXG5cdFx0XHRcdHNlbGVjdGVkO1xuXG5cdFx0XHQkKHdpbmRvdykub2ZmKCdiZWZvcmV1bmxvYWQnKTtcblxuXHRcdFx0dmFyIGtleXMgPSBbXTtcblx0XHRcdC8vIG9ubHkga2VlcCBrZXlzIHRoYXQgaGF2ZSBmaWVsZHNcblx0XHRcdCRwYXJlbnQuZmluZCgnW2RhdGEtYWNmLWZpZWxkLWtleV0nKS5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIga2V5O1xuXHRcdFx0XHQhJHRyICYmICgkdHIgPSAkKHRoaXMpLmNsb3Nlc3QoJ3RyLmlubGluZS1lZGl0LXBvc3QnKSk7XG5cdFx0XHRcdGtleSA9ICQodGhpcykuZGF0YSgnYWNmLWZpZWxkLWtleScpO1xuXHRcdFx0XHRpZiAoIGtleXMuaW5kZXhPZigga2V5ICkgPT09IC0xICkge1xuXHRcdFx0XHRcdGtleXMucHVzaChrZXkpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0Zm9yICggaT0wOyBpPGtleXMubGVuZ3RoOyBpKyspIHtcblxuXHRcdFx0XHRrZXkgPSBrZXlzW2ldLCB2YWx1ZSA9IHJlc3VsdFsga2V5IF07XG5cblx0XHRcdFx0JGZpZWxkID0gJCgnW2RhdGEtYWNmLWZpZWxkLWtleT1cIicra2V5KydcIl06dmlzaWJsZScpO1xuXG5cdFx0XHRcdC8vIGNvbnZlcnQgYm9vbCB0byBpbnRcblx0XHRcdFx0aWYgKHR5cGVvZih2YWx1ZSkgPT09ICdib29sZWFuJykge1xuXHRcdFx0XHRcdHZhbHVlICo9IDE7XG5cdFx0XHRcdH1cblxuXG5cdFx0XHRcdGlmICggJGZpZWxkLmlzKCAnLmFjZi1jaGVja2JveC1saXN0LCAuYWNmLXJhZGlvLWxpc3QnICkgKSB7XG5cdFx0XHRcdFx0c2VsZWN0ZWQgPSAwO1xuXHRcdFx0XHRcdGlmICggJC5pc0FycmF5KCB2YWx1ZSApICkge1xuXHRcdFx0XHRcdFx0JC5lYWNoKCB2YWx1ZSwgZnVuY3Rpb24oIGlkeCwgdmFsICkge1xuXHRcdFx0XHRcdFx0XHRzZWxlY3RlZCArPSAkZmllbGQuZmluZCggJ1t2YWx1ZT1cIicrdmFsKydcIl0nICkucHJvcCggJ2NoZWNrZWQnLHRydWUpLmxlbmd0aDtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRzZWxlY3RlZCArPSAkZmllbGQuZmluZCggJ1t2YWx1ZT1cIicrdmFsdWUrJ1wiXScgKS5wcm9wKCAnY2hlY2tlZCcsdHJ1ZSkubGVuZ3RoO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoICRmaWVsZC5pcygnLm90aGVyJykgJiYgISBzZWxlY3RlZCApIHtcblx0XHRcdFx0XHRcdGlmICggISEgdmFsdWUgKSB7XG5cdFx0XHRcdFx0XHRcdCRmaWVsZC5maW5kKCdbdmFsdWU9XCJvdGhlclwiXScpLnByb3AoICdjaGVja2VkJywgdHJ1ZSApO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0JGZpZWxkLmZpbmQoJ1t0eXBlPVwidGV4dFwiXScpLnZhbCgnJyk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH0gZWxzZSBpZiAoICEgJGZpZWxkLmlzKCAnW3R5cGU9XCJyYWRpb1wiXSxbdHlwZT1cImNoZWNrYm94XCJdJyApICkge1xuXHRcdFx0XHRcdCRmaWVsZC52YWwoIHZhbHVlICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoICEgJGZpZWxkLmlzKCAnW3R5cGU9XCJwYXNzd29yZFwiXScgKSApIHtcblx0XHRcdFx0XHQkZmllbGQucHJvcCggJ3JlYWRvbmx5JywgZmFsc2UgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIGlmICggJGZpZWxkLmlzKFwidGV4dGFyZWFcIikgKSB7XG5cdFx0XHRcdC8vIFx0JGZpZWxkLm9uKCdrZXlkb3duIGtleXVwJywgZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRcdFx0Ly8gXHRcdGlmICggZXZlbnQud2hpY2ggPT0gMTMgKSB7XG5cdFx0XHRcdC8vIFx0XHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHQvLyBcdFx0fVxuXHRcdFx0XHQvLyBcdH0pO1xuXHRcdFx0XHQvLyB9XG5cblx0XHRcdFx0aWYgKCAkZmllbGQuaXMoXCJzZWxlY3RbbXVsdGlwbGVdLnVpXCIpICkge1xuXHRcdFx0XHRcdHZhciAkb3B0ID0gJGZpZWxkLmNoaWxkcmVuKCk7XG5cblx0XHRcdFx0XHQkb3B0LnNvcnQoZnVuY3Rpb24oYSxiKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gdmFsdWUuaW5kZXhPZiggJChhKS5hdHRyKCd2YWx1ZScpICkgLSB2YWx1ZS5pbmRleE9mKCAkKGIpLmF0dHIoJ3ZhbHVlJykgKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdCRvcHQuZGV0YWNoKCkuYXBwZW5kVG8oICRmaWVsZCApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoICRmaWVsZC5wYXJlbnQoKS5pcygnLmFjZi1xdWljay1lZGl0LWRhdGVfcGlja2VyLCAuYWNmLXF1aWNrLWVkaXQtdGltZV9waWNrZXIsIC5hY2YtcXVpY2stZWRpdC1kYXRlX3RpbWVfcGlja2VyJyApICkge1xuXHRcdFx0XHRcdCRmaWVsZC5uZXh0KCdbdHlwZT1cInRleHRcIl0nKS5wcm9wKCAncmVhZG9ubHknLCBmYWxzZSApO1xuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0Ly8gaW5pdCBjb2xvcnBpY2tlclxuXHRcdFx0Ly8gJHBhcmVudC5maW5kKCdpbnB1dC5hY2YtcXVpY2stZWRpdC1jb2xvcl9waWNrZXInKS5lYWNoKCBmdW5jdGlvbiggaSwgZWwgKSB7XG5cdFx0XHQvLyBcdCQoZWwpLndwQ29sb3JQaWNrZXIoKTtcblx0XHRcdC8vIH0pXG5cblx0XHRcdC8vIGluaXQgZGF0ZXBpY2tlclxuXHRcdFx0Ly8gJHBhcmVudC5maW5kKCcuYWNmLXF1aWNrLWVkaXQtZGF0ZV9waWNrZXInKS5lYWNoKCBmdW5jdGlvbiggaSwgZWwgKSB7XG4gICAgICAgICAgICAvL1xuXHRcdFx0Ly8gXHRhY2ZfcXVpY2tlZGl0LmRhdGVwaWNrZXIuaW5pdCggJChlbCkgKTtcbiAgICAgICAgICAgIC8vXG5cdFx0XHQvLyB9KTtcblxuXHRcdFx0Ly8gaW5pdCB0aW1lcGlja2VyXG5cdFx0XHQvLyAkcGFyZW50LmZpbmQoJy5hY2YtcXVpY2stZWRpdC10aW1lX3BpY2tlcicpLmVhY2goIGZ1bmN0aW9uKCBpLCBlbCApIHtcbiAgICAgICAgICAgIC8vXG5cdFx0XHQvLyBcdGFjZl9xdWlja2VkaXQudGltZXBpY2tlci5pbml0KCAkKGVsKSApO1xuICAgICAgICAgICAgLy9cblx0XHRcdC8vIH0pO1xuXG5cdFx0XHQvLyBpbml0IGRhdGV0aW1waWNrZXJcblx0XHRcdC8vICRwYXJlbnQuZmluZCgnLmFjZi1xdWljay1lZGl0LWRhdGVfdGltZV9waWNrZXInKS5lYWNoKCBmdW5jdGlvbiggaSwgZWwgKSB7XG4gICAgICAgICAgICAvL1xuXHRcdFx0Ly8gXHRhY2ZfcXVpY2tlZGl0LmRhdGV0aW1lcGlja2VyLmluaXQoICQoZWwpICk7XG4gICAgICAgICAgICAvL1xuXHRcdFx0Ly8gfSk7XG5cblx0XHRcdC8vIGlmKCAkKCdib2R5ID4gI3VpLWRhdGVwaWNrZXItZGl2JykubGVuZ3RoID4gMCApIHtcblx0XHRcdC8vIFx0JCgnYm9keSA+ICN1aS1kYXRlcGlja2VyLWRpdicpLndyYXAoJzxkaXYgY2xhc3M9XCJhY2YtdWktZGF0ZXBpY2tlclwiIC8+Jyk7XG5cdFx0XHQvLyB9XG5cblx0XHRcdCQoJ1tkYXRhLWlzLWRvLW5vdC1jaGFuZ2U9XCJ0cnVlXCJdJykudHJpZ2dlcignY2hhbmdlJyk7XG5cdFx0fSk7XG5cdH1cblxuXHQvLyBhY2ZfcXVpY2tlZGl0LmRhdGVwaWNrZXIgPSB7XG5cdC8vIFx0aW5pdDogZnVuY3Rpb24oICR3cmFwICkge1xuXHQvLyBcdFx0dmFyICRoaWRkZW5cdFx0PSAkd3JhcC5maW5kKCAnW3R5cGU9XCJoaWRkZW5cIl0nICksXG5cdC8vIFx0XHRcdCRpbnB1dFx0XHQ9ICR3cmFwLmZpbmQoICdbdHlwZT1cInRleHRcIl0nICksXG5cdC8vIFx0XHRcdGFsdEZvcm1hdFx0PSAneXltbWRkJ1xuXHQvLyBcdFx0XHRhcmdzXHRcdD0ge1xuXHQvLyBcdFx0XHRcdGRhdGVGb3JtYXRcdFx0OiAkd3JhcC5kYXRhKCdkYXRlX2Zvcm1hdCcpLFxuXHQvLyBcdFx0XHRcdGFsdEZvcm1hdFx0XHQ6IGFsdEZvcm1hdCxcblx0Ly8gXHRcdFx0XHRhbHRGaWVsZFx0XHQ6ICRoaWRkZW4sXG5cdC8vIFx0XHRcdFx0Y2hhbmdlWWVhclx0XHQ6IHRydWUsXG5cdC8vIFx0XHRcdFx0eWVhclJhbmdlXHRcdDogXCItMTAwOisxMDBcIixcblx0Ly8gXHRcdFx0XHRjaGFuZ2VNb250aFx0XHQ6IHRydWUsXG5cdC8vIFx0XHRcdFx0c2hvd0J1dHRvblBhbmVsXHQ6IHRydWUsXG5cdC8vIFx0XHRcdFx0Zmlyc3REYXlcdFx0OiAkd3JhcC5kYXRhKCdmaXJzdF9kYXknKVxuXHQvLyBcdFx0XHR9LFxuXHQvLyBcdFx0XHRkYXRlXHRcdD0gJC5kYXRlcGlja2VyLnBhcnNlRGF0ZSggYWx0Rm9ybWF0LCAkaGlkZGVuLnZhbCgpICApO1xuICAgIC8vXG5cdC8vIFx0XHQkaW5wdXQuZGF0ZXBpY2tlciggYXJncyApLmRhdGVwaWNrZXIoICdzZXREYXRlJywgZGF0ZSApLm9uKCdibHVyJyxmdW5jdGlvbigpe1xuXHQvLyBcdFx0XHRpZiAoICEgJCh0aGlzKS52YWwoKSApIHtcblx0Ly8gXHRcdFx0XHQkaGlkZGVuLnZhbCgnJyk7XG5cdC8vIFx0XHRcdH1cblx0Ly8gXHRcdH0pO1xuXHQvLyBcdH0sXG5cdC8vIH07XG4gICAgLy9cblx0Ly8gYWNmX3F1aWNrZWRpdC50aW1lcGlja2VyID0ge1xuXHQvLyBcdGluaXQ6IGZ1bmN0aW9uKCAkd3JhcCApIHtcblx0Ly8gXHRcdHZhciAkaGlkZGVuXHRcdFx0PSAkd3JhcC5maW5kKCAnW3R5cGU9XCJoaWRkZW5cIl0nICksXG5cdC8vIFx0XHRcdCRpbnB1dFx0XHRcdD0gJHdyYXAuZmluZCggJ1t0eXBlPVwidGV4dFwiXScgKSxcblx0Ly8gXHRcdFx0YWx0VGltZUZvcm1hdFx0PSAnSEg6bW06c3MnLFxuXHQvLyBcdFx0XHRhcmdzXHRcdFx0PSB7XG5cdC8vIFx0XHRcdFx0dGltZUZvcm1hdFx0XHRcdDogJHdyYXAuZGF0YSgndGltZV9mb3JtYXQnKSxcblx0Ly8gXHRcdFx0XHRhbHRUaW1lRm9ybWF0XHRcdDogYWx0VGltZUZvcm1hdCxcblx0Ly8gXHRcdFx0XHRhbHRGaWVsZFx0XHRcdDogJGhpZGRlbixcblx0Ly8gXHRcdFx0XHRhbHRGaWVsZFRpbWVPbmx5XHQ6IGZhbHNlLFxuXHQvLyBcdFx0XHRcdHNob3dCdXR0b25QYW5lbFx0XHQ6IHRydWUsXG5cdC8vIFx0XHRcdFx0Y29udHJvbFR5cGVcdFx0XHQ6ICdzZWxlY3QnLFxuXHQvLyBcdFx0XHRcdG9uZUxpbmVcdFx0XHRcdDogdHJ1ZVxuXHQvLyBcdFx0XHR9LFxuXHQvLyBcdFx0XHR0aW1lIFx0XHRcdD0gJC5kYXRlcGlja2VyLnBhcnNlVGltZSggYWx0VGltZUZvcm1hdCwgJGhpZGRlbi52YWwoKSApO1xuICAgIC8vXG5cdC8vIFx0XHQkaW5wdXQudGltZXBpY2tlciggYXJncyApLm9uKCdibHVyJyxmdW5jdGlvbigpe1xuXHQvLyBcdFx0XHRpZiAoICEgJCh0aGlzKS52YWwoKSApIHtcblx0Ly8gXHRcdFx0XHQkaGlkZGVuLnZhbCgnJyk7XG5cdC8vIFx0XHRcdH1cblx0Ly8gXHRcdH0pO1xuXHQvLyBcdFx0aWYgKCAkaGlkZGVuLnZhbCgpICkge1xuXHQvLyBcdFx0XHQkaW5wdXQudmFsKCAkLmRhdGVwaWNrZXIuZm9ybWF0VGltZSggJHdyYXAuZGF0YSgndGltZV9mb3JtYXQnKSwgdGltZSApIClcblx0Ly8gXHRcdH1cblx0Ly8gXHR9LFxuICAgIC8vXG5cdC8vIH07XG4gICAgLy9cbiAgICAvL1xuXHQvLyBhY2ZfcXVpY2tlZGl0LmRhdGV0aW1lcGlja2VyID0ge1xuXHQvLyBcdGluaXQ6IGZ1bmN0aW9uKCAkd3JhcCApIHtcblx0Ly8gXHRcdHZhciAkaGlkZGVuXHRcdFx0PSAkd3JhcC5maW5kKCAnW3R5cGU9XCJoaWRkZW5cIl0nICksXG5cdC8vIFx0XHRcdCRpbnB1dFx0XHRcdD0gJHdyYXAuZmluZCggJ1t0eXBlPVwidGV4dFwiXScgKSxcblx0Ly8gXHRcdFx0YWx0Rm9ybWF0XHRcdD0gJ3l5LW1tLWRkJ1xuXHQvLyBcdFx0XHRhbHRUaW1lRm9ybWF0XHQ9ICdISDptbTpzcycsXG5cdC8vIFx0XHRcdGFyZ3NcdFx0XHQ9IHtcblx0Ly8gXHRcdFx0XHRhbHRGaWVsZFx0XHRcdDogJGhpZGRlbixcblx0Ly8gXHRcdFx0XHRkYXRlRm9ybWF0XHRcdFx0OiAkd3JhcC5kYXRhKCdkYXRlX2Zvcm1hdCcpLFxuXHQvLyBcdFx0XHRcdGFsdEZvcm1hdFx0XHRcdDogYWx0Rm9ybWF0LFxuXHQvLyBcdFx0XHRcdHRpbWVGb3JtYXRcdFx0XHQ6ICR3cmFwLmRhdGEoJ3RpbWVfZm9ybWF0JyksXG5cdC8vIFx0XHRcdFx0YWx0VGltZUZvcm1hdFx0XHQ6IGFsdFRpbWVGb3JtYXQsXG5cdC8vIFx0XHRcdFx0YWx0RmllbGRUaW1lT25seVx0OiBmYWxzZSxcblx0Ly8gXHRcdFx0XHRjaGFuZ2VZZWFyXHRcdFx0OiB0cnVlLFxuXHQvLyBcdFx0XHRcdHllYXJSYW5nZVx0XHRcdDogXCItMTAwOisxMDBcIixcblx0Ly8gXHRcdFx0XHRjaGFuZ2VNb250aFx0XHRcdDogdHJ1ZSxcblx0Ly8gXHRcdFx0XHRzaG93QnV0dG9uUGFuZWxcdFx0OiB0cnVlLFxuXHQvLyBcdFx0XHRcdGZpcnN0RGF5XHRcdFx0OiAkd3JhcC5kYXRhKCdmaXJzdF9kYXknKSxcblx0Ly8gXHRcdFx0XHRjb250cm9sVHlwZVx0XHRcdDogJ3NlbGVjdCcsXG5cdC8vIFx0XHRcdFx0b25lTGluZVx0XHRcdFx0OiB0cnVlXG5cdC8vIFx0XHRcdH0sXG5cdC8vIFx0XHRcdGRhdGV0aW1lIFx0XHRcdD0gJC5kYXRlcGlja2VyLnBhcnNlRGF0ZVRpbWUoIGFsdEZvcm1hdCwgYWx0VGltZUZvcm1hdCwgJGhpZGRlbi52YWwoKSApO1xuICAgIC8vXG5cdC8vIFx0XHQkaW5wdXQuZGF0ZXRpbWVwaWNrZXIoIGFyZ3MgKS5kYXRlcGlja2VyKCAnc2V0RGF0ZScsIGRhdGV0aW1lICkub24oJ2JsdXInLGZ1bmN0aW9uKCl7XG5cdC8vIFx0XHRcdGlmICggISAkKHRoaXMpLnZhbCgpICkge1xuXHQvLyBcdFx0XHRcdCRoaWRkZW4udmFsKCcnKTtcblx0Ly8gXHRcdFx0fVxuXHQvLyBcdFx0fSk7XG5cdC8vIFx0fSxcbiAgICAvL1xuXHQvLyB9O1xuXG5cblx0Ly8gaWYgKCAndW5kZWZpbmVkJyAhPT0gdHlwZW9mIGlubGluZUVkaXRQb3N0ICkge1xuXHQvLyBcdC8vIHdlIGNyZWF0ZSBhIGNvcHkgb2YgdGhlIFdQIGlubGluZSBlZGl0IHBvc3QgZnVuY3Rpb25cblx0Ly8gXHR2YXIgX3dwX2lubGluZV9lZGl0X3Bvc3QgPSBpbmxpbmVFZGl0UG9zdC5lZGl0LFxuXHQvLyBcdFx0dW5sb2FkX2NiO1xuXHQvLyBcdC8vIGFuZCB0aGVuIHdlIG92ZXJ3cml0ZSB0aGUgZnVuY3Rpb24gd2l0aCBvdXIgb3duIGNvZGVcblx0Ly8gXHRpbmxpbmVFZGl0UG9zdC5lZGl0ID0gZnVuY3Rpb24oIGlkICkge1xuXHQvLyBcdFx0dmFyIG9iamVjdF9pZCwgJHRyO1xuICAgIC8vXG4gICAgLy9cblx0Ly8gXHRcdC8vIFwiY2FsbFwiIHRoZSBvcmlnaW5hbCBXUCBlZGl0IGZ1bmN0aW9uXG5cdC8vIFx0XHQvLyB3ZSBkb24ndCB3YW50IHRvIGxlYXZlIFdvcmRQcmVzcyBoYW5naW5nXG5cdC8vIFx0XHRfd3BfaW5saW5lX2VkaXRfcG9zdC5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG4gICAgLy9cblx0Ly8gXHRcdC8vIGdldCB0aGUgcG9zdCBJRFxuXHQvLyBcdFx0b2JqZWN0X2lkID0gMDtcblx0Ly8gXHRcdGlmICggdHlwZW9mKCBpZCApID09PSAnb2JqZWN0JyApIHtcblx0Ly8gXHRcdFx0b2JqZWN0X2lkID0gcGFyc2VJbnQoIHRoaXMuZ2V0SWQoIGlkICkgKTtcblx0Ly8gXHRcdH1cblx0Ly8gXHRcdCR0ciA9ICQoJyNlZGl0LScgKyBvYmplY3RfaWQgKTtcblx0Ly8gXHRcdGdldF9hY2ZfcG9zdF9kYXRhKCBvYmplY3RfaWQgLCAkKCcjZWRpdC0nICsgb2JqZWN0X2lkICkgKTtcbiAgICAvL1xuXHQvLyBcdFx0YmluZFZhbGlkYXRpb24oICR0ci5maW5kKCdidXR0b24uc2F2ZScpLCBvYmplY3RfaWQgKTtcblx0Ly8gXHR9O1xuXHQvLyB9XG4gICAgLy9cblx0Ly8gaWYgKCAndW5kZWZpbmVkJyAhPT0gdHlwZW9mIGlubGluZUVkaXRUYXggKSB7XG4gICAgLy9cblx0Ly8gXHR2YXIgX3dwX2lubGluZV9lZGl0X3RheCA9IGlubGluZUVkaXRUYXguZWRpdDtcbiAgICAvL1xuXHQvLyBcdGlubGluZUVkaXRUYXguZWRpdCA9IGZ1bmN0aW9uKCBpZCApIHtcblx0Ly8gXHRcdHZhciBvYmplY3RfaWQsICR0cixcblx0Ly8gXHRcdFx0dGF4ID0gJCgnaW5wdXRbbmFtZT1cInRheG9ub215XCJdJykudmFsKCk7XG4gICAgLy9cblx0Ly8gXHRcdF93cF9pbmxpbmVfZWRpdF90YXguYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuICAgIC8vXG5cdC8vIFx0XHQvLyBnZXQgdGhlIHBvc3QgSURcblx0Ly8gXHRcdG9iamVjdF9pZCA9IDA7XG5cdC8vIFx0XHRpZiAoIHR5cGVvZiggaWQgKSA9PT0gJ29iamVjdCcgKSB7XG5cdC8vIFx0XHRcdG9iamVjdF9pZCA9IHBhcnNlSW50KCB0aGlzLmdldElkKCBpZCApICk7XG5cdC8vIFx0XHR9XG5cdC8vIFx0XHQkdHIgPSAkKCcjZWRpdC0nICsgb2JqZWN0X2lkICk7XG5cdC8vIFx0XHRnZXRfYWNmX3Bvc3RfZGF0YSggdGF4ICsgJ18nICsgb2JqZWN0X2lkICwgJHRyICk7XG4gICAgLy9cblx0Ly8gXHRcdGJpbmRWYWxpZGF0aW9uKCAkdHIuZmluZCgnYnV0dG9uLnNhdmUnKSwgb2JqZWN0X2lkICk7XG5cdC8vIFx0fTtcblx0Ly8gfVxuXG5cdGFjZi52YWxpZGF0aW9uLmVycm9yX2NsYXNzID0gJ2Zvcm0taW52YWxpZCc7XG5cblx0ZnVuY3Rpb24gYmluZFZhbGlkYXRpb24oICRidXR0b24sIG9iamVjdF9pZCApIHtcblx0XHR2YXIgJGZvcm0gPSAkYnV0dG9uLmNsb3Nlc3QoJ2Zvcm0nKTtcblxuLy8gXHRcdGFjZi51cGRhdGUoJ2FqYXh1cmwnLCBhamF4dXJsICk7XG4vLyBcdFx0YWNmLnVwZGF0ZSgnbm9uY2UnLCAkZm9ybS5maW5kKCdbbmFtZT1cIm5vbmNlXCJdJykudmFsKCkgKTtcbiBcdFx0YWNmLnVwZGF0ZSgncG9zdF9pZCcsIG9iamVjdF9pZCApO1xuXG5cdFx0JGJ1dHRvbi5jbGljayggZnVuY3Rpb24oZSkge1xuXG5cdFx0XHQvLyBiYWlsIGVhcmx5IGlmIG5vdCBhY3RpdmVcblx0XHRcdGlmKCAhYWNmLnZhbGlkYXRpb24uYWN0aXZlICkge1xuXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXG5cdFx0XHR9XG5cblx0XHRcdC8vIGlnbm9yZSB2YWxpZGF0aW9uIChvbmx5IGlnbm9yZSBvbmNlKVxuXHRcdFx0aWYoIGFjZi52YWxpZGF0aW9uLmlnbm9yZSApIHtcblx0XHRcdFx0YWNmLnZhbGlkYXRpb24uaWdub3JlID0gMDtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cblx0XHRcdC8vIHN0b3AgV1AgSlMgdmFsaWRhdGlvblxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cblxuXHRcdFx0Ly8gc3RvcmUgc3VibWl0IHRyaWdnZXIgc28gaXQgd2lsbCBiZSBjbGlja2VkIGlmIHZhbGlkYXRpb24gaXMgcGFzc2VkXG5cdFx0XHRhY2YudmFsaWRhdGlvbi4kdHJpZ2dlciA9ICQodGhpcyk7XG5cblx0XHRcdC8vIHJ1biB2YWxpZGF0aW9uXG5cdFx0XHRhY2YudmFsaWRhdGlvbi5mZXRjaCggJGZvcm0gKTtcblxuXHRcdFx0Ly8gc3RvcCBhbGwgb3RoZXIgY2xpY2sgZXZlbnRzIG9uIHRoaXMgaW5wdXRcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9KTtcblxuXHRcdCRidXR0b24uZGF0YSgnZXZlbnRzJykuY2xpY2sucmV2ZXJzZSgpO1xuXHR9XG5cblx0JChkb2N1bWVudCkub24oICdjbGljaycgLCAnLmJ1bGthY3Rpb25zIC5idXR0b24uYWN0aW9uJyAsIGZ1bmN0aW9uKCBlICkge1xuXHRcdHZhciBwb3N0X2lkcyA9IFtdO1xuXG5cdFx0JCggJyNidWxrLWVkaXQgI2J1bGstdGl0bGVzJyApLmNoaWxkcmVuKCkuZWFjaCggZnVuY3Rpb24oKSB7XG5cblx0XHRcdHBvc3RfaWRzLnB1c2goICQoIHRoaXMgKS5hdHRyKCAnaWQnICkucmVwbGFjZSggL14odHRsZSkvaSwgJycgKSApO1xuXG5cdFx0fSk7XG5cblx0XHRnZXRfYWNmX3Bvc3RfZGF0YSggcG9zdF9pZHMgLCAkKCAnI2J1bGstZWRpdCcgKSApO1xuXG5cdH0pXG5cdC8vIC5vbignY2hhbmdlJywgJy5hY2YtcmFkaW8tbGlzdC5vdGhlciBpbnB1dFt0eXBlPVwicmFkaW9cIl0nLCBmdW5jdGlvbihlKSB7XG4gICAgLy9cblx0Ly8gXHR2YXIgJHRoaXMgPSAkKHRoaXMpLFxuXHQvLyBcdFx0JGxpc3QgPSAkdGhpcy5jbG9zZXN0KCcuYWNmLXJhZGlvLWxpc3QnKSxcblx0Ly8gXHRcdGlzX290aGVyID0gJHRoaXMudmFsKCkgPT0gJ290aGVyJyxcblx0Ly8gXHRcdCRvdGhlciA9ICRsaXN0LmZpbmQoJ1t0eXBlPVwidGV4dFwiXScpLnByb3AoJ2Rpc2FibGVkJywgISBpc19vdGhlciApO1xuICAgIC8vXG5cdC8vIFx0ISEgaXNfb3RoZXIgJiYgJG90aGVyLmZvY3VzKCk7XG4gICAgLy9cblx0Ly8gfSlcblx0Ly8gLm9uKCdjaGFuZ2UgbW91c2Vtb3ZlJywgJy5hY2YtcmFuZ2Utd3JhcCBpbnB1dFt0eXBlPVwicmFuZ2VcIl0nLCBmdW5jdGlvbihlKSB7XG4gICAgLy9cblx0Ly8gXHQkKHRoaXMpLm5leHQoJ1t0eXBlPVwibnVtYmVyXCJdJykudmFsKCAkKHRoaXMpLnZhbCgpICk7XG4gICAgLy9cblx0Ly8gfSlcblx0Ly8gLm9uKCdjaGFuZ2Uga2V5dXAnLCAnLmFjZi1yYW5nZS13cmFwIGlucHV0W3R5cGU9XCJudW1iZXJcIl0nLCBmdW5jdGlvbihlKSB7XG4gICAgLy9cblx0Ly8gXHQkKHRoaXMpLnByZXYoJ1t0eXBlPVwicmFuZ2VcIl0nKS52YWwoICQodGhpcykudmFsKCkgKTtcbiAgICAvL1xuXHQvLyB9KVxuXHQub24oICdjaGFuZ2UnLCAnW2RhdGEtaXMtZG8tbm90LWNoYW5nZT1cInRydWVcIl0nLCBmdW5jdGlvbigpe1xuXHRcdHZhciAkc2VsZiA9ICQodGhpcyksXG5cdFx0XHRuYW1lID0gJHNlbGYuYXR0cignbmFtZScpLFxuXHRcdFx0JGxpc3QgPSAkc2VsZi5jbG9zZXN0KCcuYWNmLWNoZWNrYm94LWxpc3QnKSxcblx0XHRcdCRpdGVtcztcblx0XHRpZiAoICRsaXN0Lmxlbmd0aCApIHtcblx0XHRcdCRpdGVtcyA9ICRsaXN0LmZpbmQoJ1t0eXBlPVwiY2hlY2tib3hcIl06bm90KFtkYXRhLWlzLWRvLW5vdC1jaGFuZ2VdKScpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkaXRlbXMgPSAkc2VsZi5jbG9zZXN0KCcuYWNmLWZpZWxkJykuZmluZCgnaW5wdXQsc2VsZWN0LFtuYW1lPVwiJytuYW1lKydcIl0nKS5ub3QodGhpcylcblx0XHR9XG5cblx0XHQkaXRlbXMucHJvcCggJ2Rpc2FibGVkJywgJHNlbGYucHJvcCgnY2hlY2tlZCcpICk7XG5cdH0pXG5cdC8vIC5vbiggJ2NsaWNrJywgJy5pbmxpbmUtZWRpdC1jb2wgLnNlbGVjdC1tZWRpYScsIGZ1bmN0aW9uKGUpIHtcblx0Ly8gXHR2YXIgc2VsZiA9IHRoaXMsXG5cdC8vIFx0XHQkaGlkZGVuID0gJChzZWxmKS5wYXJlbnQoJy5hY2YtaW5wdXQtd3JhcCcpLmZpbmQoJ1t0eXBlPVwiaGlkZGVuXCJdJyksXG5cdC8vIFx0XHQkZmllbGQgPSAkKHRoaXMpLmNsb3Nlc3QoJy5hY2YtZmllbGQnKSxcblx0Ly8gXHRcdHBvc3RfaWQgPSBhY2YuZ2V0KCdwb3N0X2lkJyksXG5cdC8vIFx0XHRtZWRpYUZyYW1lT3B0cztcbiAgICAvL1xuXHQvLyBcdG1lZGlhRnJhbWVPcHRzID0ge1xuXHQvLyBcdFx0ZmllbGRcdFx0OiAkaGlkZGVuLmF0dHIoJ2RhdGEtYWNmLWZpZWxkLWtleScpLFxuXHQvLyBcdFx0bXVsdGlwbGVcdDogZmFsc2UsXG5cdC8vIFx0XHRwb3N0X2lkXHRcdDogcG9zdF9pZCxcblx0Ly8gXHRcdGxpYnJhcnlcdFx0OiAkaGlkZGVuLmF0dHIoJ2RhdGEtbGlicmFyeScpLFxuXHQvLyBcdFx0bW9kZVx0XHQ6J3NlbGVjdCcsXG5cdC8vIFx0XHRzZWxlY3RcdFx0OiBmdW5jdGlvbiAoIGF0dGFjaG1lbnQsIGkgKSB7XG5cdC8vIFx0XHRcdGlmICggISBhdHRhY2htZW50ICkge1xuXHQvLyBcdFx0XHRcdHJldHVybjtcblx0Ly8gXHRcdFx0fVxuXHQvLyBcdFx0XHR2YXIgJGhpZGRlbiA9ICQoc2VsZikucGFyZW50KCcuYWNmLWlucHV0LXdyYXAnKS5maW5kKCdbdHlwZT1cImhpZGRlblwiXScpLFxuXHQvLyBcdFx0XHRcdG1lZGlhX2lkID0gYXR0YWNobWVudC5nZXQoJ2lkJyk7XG4gICAgLy9cblx0Ly8gXHRcdFx0JGhpZGRlbi52YWwoIG1lZGlhX2lkICk7XG5cdC8vIFx0XHR9XG5cdC8vIFx0fTtcbiAgICAvL1xuICAgIC8vXG5cdC8vIFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIC8vXG4gICAgLy9cblx0Ly8gXHRpZiAoICRoaWRkZW4uZGF0YSgnbWltZV90eXBlcycpICkge1xuXHQvLyBcdFx0bWVkaWFGcmFtZU9wdHMubWltZV90eXBlcyA9ICRoaWRkZW4uZGF0YSgnbWltZV90eXBlcycpO1xuXHQvLyBcdH1cblx0Ly8gXHRpZiAoICRmaWVsZC5pcygnW2RhdGEtZmllbGQtdHlwZT1cImltYWdlXCJdJykgKSB7XG5cdC8vIFx0XHRtZWRpYUZyYW1lT3B0cy50eXBlID0gJ2ltYWdlJztcblx0Ly8gXHR9IGVsc2Uge1xuXHQvLyBcdFx0bWVkaWFGcmFtZU9wdHMudHlwZSA9ICcnO1xuXHQvLyBcdH1cbiAgICAvL1xuXHQvLyBcdC8vIENyZWF0ZSBhIG5ldyBtZWRpYSBmcmFtZVxuXHQvLyBcdG1lZGlhX2ZyYW1lID0gYWNmLm1lZGlhLnBvcHVwKCBtZWRpYUZyYW1lT3B0cyApO1xuICAgIC8vXG4gICAgLy9cblx0Ly8gXHQvLyBzZXQgcG9zdCBpZCwgc28gbmV3IHVwbG9hZHMgYXJlIGF0dGFjaGVkIHRvIGVkaXRlZCBwb3N0XG5cdC8vIFx0aWYgKCBhY2YuaXNzZXQod2luZG93LCd3cCcsJ21lZGlhJywndmlldycsJ3NldHRpbmdzJywncG9zdCcpICYmICQuaXNOdW1lcmljKHBvc3RfaWQpICkge1xuICAgIC8vXG5cdC8vIFx0XHR3cC5tZWRpYS52aWV3LnNldHRpbmdzLnBvc3QuaWQgPSBwb3N0X2lkO1xuICAgIC8vXG5cdC8vIFx0fVxuICAgIC8vXG5cdC8vIH0pXG5cdC8vIC5vbiggJ2NsaWNrJywgJy5pbmxpbmUtZWRpdC1jb2wgLnJlbW92ZS1tZWRpYScsIGZ1bmN0aW9uKGUpIHtcblx0Ly8gXHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdC8vIFx0dmFyICRoaWRkZW4gPSAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJ1t0eXBlPVwiaGlkZGVuXCJdJyk7XG5cdC8vIFx0JGhpZGRlbi52YWwoJycpO1xuXHQvLyB9KTtcbn0pKCBqUXVlcnksIHdpbmRvdy5hY2ZfcXVpY2tlZGl0ICk7XG4iLCIoZnVuY3Rpb24oJCkge1xuXHQkKCcuYWNmLXFlZi1nYWxsZXJ5LWNvbCcpLm9uKCdtb3VzZW1vdmUnLGZ1bmN0aW9uKGUpe1xuXHRcdHZhciAkdGhpc1x0PSAkKHRoaXMpLFxuXHRcdFx0JGltZ1x0PSAkKHRoaXMpLmZpbmQoJ2ltZycpXG5cdFx0XHR4XHRcdD0gZS5vZmZzZXRYLFxuXHRcdFx0bnVtXHRcdD0gJGltZy5sZW5ndGgsXG5cdFx0XHRzdGVwXHQ9ICQodGhpcykud2lkdGgoKSAvIG51bTtcblxuXHRcdCRpbWcuZWFjaCggZnVuY3Rpb24oaSxlbCkge1xuXHRcdFx0aWYgKHggPj0gc3RlcCppKSB7XG5cdFx0XHRcdCQoZWwpLnNob3coKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdCQoZWwpLmhpZGUoKTtcblx0XHRcdH1cblx0XHR9ICk7XG5cdH0pO1xufSkoalF1ZXJ5KTsiXX0=
