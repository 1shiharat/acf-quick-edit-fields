!function(e,i){i.acf_quickedit=qe={form:{},field:{_types:{},add_type:function(e){return qe.field._types[e.type]=qe.field.View.extend(e),qe.field._types[e.type]},factory:function(i,t){var n=e(i).attr("data-field-type"),a=qe.field._types;return field_class=n in a?a[n]:qe.field.View,new field_class({el:i,controller:t})}}},qe.form.View=Backbone.View.extend({initialize:function(){var e=this;this.options=arguments[0],Backbone.View.prototype.initialize.apply(this,arguments),this.fields={},this.$(".inline-edit-col-qed [data-key]").each(function(i,t){var n=qe.field.factory(t,this);e.fields[n.key]=n}),this.loadValues()},loadValues:function(){var i=this;return e.post({url:ajaxurl,data:{action:"get_acf_post_meta",object_id:this.options.object_id,acf_field_keys:Object.keys(this.fields)},success:function(e){_.each(e,function(e,t){i.fields[t].setValue(e)})}}),this},unload:function(e){_.each(this.fields,function(e){e.unload()})}}),qe.form.QuickEdit=qe.form.View.extend({}),qe.form.BulkEdit=qe.form.View.extend({}),qe.field.View=wp.media.View.extend({initialize:function(){Backbone.View.prototype.initialize.apply(this,arguments),this.key=this.$el.attr("data-key"),this.$("input").prop("readonly",!0)},setValue:function(e){return this.$("input").prop("readonly",!1),this.$("input").val(e),this},unload:function(){}})}(jQuery,window);
!function(e,t){var i={type:"file",mediaFrameType:"",events:{"click .select-media":"selectFile","click .remove-media":"removeFile"},initialize:function(){t.field.View.prototype.initialize.apply(this,arguments);var e=this,i=this.$('[type="hidden"]'),a=acf.get("post_id");this.mediaFrameOpts={field:this.key,multiple:!1,post_id:a,library:i.attr("data-library"),mode:"select",type:this.mediaFrameType,select:function(t,i){t&&e.setValue(t.get("id"))}},i.data("mime_types")&&(this.mediaFrameOpts.mime_types=i.data("mime_types"))},selectFile:function(t){t.preventDefault();acf.media.popup(this.mediaFrameOpts);acf.isset(window,"wp","media","view","settings","post")&&e.isNumeric(this.mediaFrameOpts.post_id)&&(wp.media.view.settings.post.id=this.mediaFrameOpts.post_id)},removeFile:function(e){e.preventDefault(),this.setValue("")},setValue:function(e){return this.$('[type="hidden"]').val(e),this}};t.field.add_type(i),t.field.add_type(_.extend(i,{type:"image",mediaFrameType:"image"})),t.field.add_type(i),t.field.add_type({type:"range",events:{'change [type="range"]':"adaptNumber",'mousemove [type="range"]':"adaptNumber",'change [type="number"]':"adaptRange",'mousemove [type="number"]':"adaptRange"},adaptNumber:function(){this.$('[type="number"]').val(this.$('[type="range"]').val())},adaptRange:function(){this.$('[type="range"]').val(this.$('[type="number"]').val())}}),t.field.add_type({type:"date_picker",initialize:function(){t.field.View.prototype.initialize.apply(this,arguments),e("body > #ui-datepicker-div").length>0&&e("body > #ui-datepicker-div").wrap('<div class="acf-ui-datepicker" />');var i=this.$('[type="hidden"]'),a=this.$('[type="text"]');args={dateFormat:this.$el.data("date_format"),altFormat:"yymmdd",altField:i,changeYear:!0,yearRange:"-100:+100",changeMonth:!0,showButtonPanel:!0,firstDay:this.$el.data("first_day")},date=e.datepicker.parseDate("yymmdd",i.val()),a.datepicker(args).datepicker("setDate",date).on("blur",function(){e(this).val()||i.val("")})}}),t.field.add_type({type:"date_time_picker",initialize:function(){t.field.View.prototype.initialize.apply(this,arguments),e("body > #ui-datepicker-div").length>0&&e("body > #ui-datepicker-div").wrap('<div class="acf-ui-datepicker" />');var i=this.$('[type="hidden"]'),a=this.$('[type="text"]');altTimeFormat="HH:mm:ss",args={altField:i,dateFormat:this.$el.data("date_format"),altFormat:"yy-mm-dd",timeFormat:this.$el.data("time_format"),altTimeFormat:altTimeFormat,altFieldTimeOnly:!1,changeYear:!0,yearRange:"-100:+100",changeMonth:!0,showButtonPanel:!0,firstDay:this.$el.data("first_day"),controlType:"select",oneLine:!0},datetime=e.datepicker.parseDateTime("yy-mm-dd",altTimeFormat,i.val()),a.datetimepicker(args).datepicker("setDate",datetime).on("blur",function(){e(this).val()||i.val("")})}}),t.field.add_type({type:"time_picker",initialize:function(){t.field.View.prototype.initialize.apply(this,arguments),e("body > #ui-datepicker-div").length>0&&e("body > #ui-datepicker-div").wrap('<div class="acf-ui-datepicker" />');var i=this,a=this.$('[type="hidden"]'),d=this.$('[type="text"]'),p={timeFormat:this.$el.data("time_format"),altTimeFormat:"HH:mm:ss",altField:a,altFieldTimeOnly:!1,showButtonPanel:!0,controlType:"select",oneLine:!0},r=e.datepicker.parseTime("HH:mm:ss",a.val());d.timepicker(p).on("blur",function(){e(this).val()||a.val("")}),a.val()&&d.val(e.datepicker.formatTime(i.$el.data("time_format"),r))}}),t.field.add_type({type:"color_picker",initialize:function(){t.field.View.prototype.initialize.apply(this,arguments),this.$input=this.$('[type="text"]').first().wpColorPicker()},setValue:function(e){this.$input.prop("readonly",!1),this.$input.wpColorPicker("color",e)},unload:function(){try{this.$input.wpColorPicker("close")}catch(e){}}})}(jQuery,acf_quickedit);
!function(i,t){if("undefined"!=typeof inlineEditPost){var e=inlineEditPost.edit,n=inlineEditPost.save,d=inlineEditPost.revert;inlineEditPost.edit=function(n){var d,o,r;e.apply(this,arguments),d=0,"object"==typeof n&&(d=parseInt(this.getId(n))),o=i("#edit-"+d),o.is(".quick-edit-row")?r=t.form.QuickEdit:o.is(".bulk-edit-row")&&(r=t.form.BulkEdit),r&&(this.acf_qed_form=new r({el:o.get(0),object_id:d}))},inlineEditPost.revert=function(){return!!this.acf_qed_form&&this.acf_qed_form.unload(),d.apply(this,arguments)},inlineEditPost.save=function(){return!!this.acf_qed_form&&this.acf_qed_form.unload(),n.apply(this,arguments)}}return;var e}(jQuery,window.acf_quickedit);
!function(e){e(".acf-qef-gallery-col").on("mousemove",function(n){var t=(e(this),e(this).find("img"));x=n.offsetX,num=t.length,step=e(this).width()/num,t.each(function(n,t){x>=step*n?e(t).show():e(t).hide()})})}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjZi1xdWlja2VkaXQtYmFzZS5qcyIsImFjZi1xdWlja2VkaXQtZmllbGRzLmpzIiwiYWNmLXF1aWNrZWRpdC5qcyIsInRodW1ibmFpbC1jb2wuanMiXSwibmFtZXMiOlsiJCIsImV4cG9ydHMiLCJhY2ZfcXVpY2tlZGl0IiwicWUiLCJmb3JtIiwiZmllbGQiLCJfdHlwZXMiLCJhZGRfdHlwZSIsImEiLCJ0eXBlIiwiVmlldyIsImV4dGVuZCIsImZhY3RvcnkiLCJlbCIsImNvbnRyb2xsZXIiLCJhdHRyIiwidHlwZXMiLCJmaWVsZF9jbGFzcyIsIkJhY2tib25lIiwiaW5pdGlhbGl6ZSIsInNlbGYiLCJ0aGlzIiwib3B0aW9ucyIsImFyZ3VtZW50cyIsInByb3RvdHlwZSIsImFwcGx5IiwiZmllbGRzIiwiZWFjaCIsImkiLCJrZXkiLCJsb2FkVmFsdWVzIiwicG9zdCIsInVybCIsImFqYXh1cmwiLCJkYXRhIiwiYWN0aW9uIiwib2JqZWN0X2lkIiwiYWNmX2ZpZWxkX2tleXMiLCJPYmplY3QiLCJrZXlzIiwic3VjY2VzcyIsInJlc3BvbnNlIiwiXyIsInZhbCIsInNldFZhbHVlIiwidW5sb2FkIiwiZSIsIlF1aWNrRWRpdCIsIkJ1bGtFZGl0Iiwid3AiLCJtZWRpYSIsIiRlbCIsInByb3AiLCJ2YWx1ZSIsImpRdWVyeSIsIndpbmRvdyIsImZpbGVfdHlwZSIsIm1lZGlhRnJhbWVUeXBlIiwiZXZlbnRzIiwiY2xpY2sgLnNlbGVjdC1tZWRpYSIsImNsaWNrIC5yZW1vdmUtbWVkaWEiLCIkaGlkZGVuIiwicG9zdF9pZCIsImFjZiIsImdldCIsIm1lZGlhRnJhbWVPcHRzIiwibXVsdGlwbGUiLCJsaWJyYXJ5IiwibW9kZSIsInNlbGVjdCIsImF0dGFjaG1lbnQiLCJtaW1lX3R5cGVzIiwic2VsZWN0RmlsZSIsInByZXZlbnREZWZhdWx0IiwicG9wdXAiLCJpc3NldCIsImlzTnVtZXJpYyIsInZpZXciLCJzZXR0aW5ncyIsImlkIiwicmVtb3ZlRmlsZSIsImNoYW5nZSBbdHlwZT1cInJhbmdlXCJdIiwibW91c2Vtb3ZlIFt0eXBlPVwicmFuZ2VcIl0iLCJjaGFuZ2UgW3R5cGU9XCJudW1iZXJcIl0iLCJtb3VzZW1vdmUgW3R5cGU9XCJudW1iZXJcIl0iLCJhZGFwdE51bWJlciIsImFkYXB0UmFuZ2UiLCJsZW5ndGgiLCJ3cmFwIiwiJGlucHV0IiwiYXJncyIsImRhdGVGb3JtYXQiLCJhbHRGb3JtYXQiLCJhbHRGaWVsZCIsImNoYW5nZVllYXIiLCJ5ZWFyUmFuZ2UiLCJjaGFuZ2VNb250aCIsInNob3dCdXR0b25QYW5lbCIsImZpcnN0RGF5IiwiZGF0ZSIsImRhdGVwaWNrZXIiLCJwYXJzZURhdGUiLCJvbiIsImFsdFRpbWVGb3JtYXQiLCJ0aW1lRm9ybWF0IiwiYWx0RmllbGRUaW1lT25seSIsImNvbnRyb2xUeXBlIiwib25lTGluZSIsImRhdGV0aW1lIiwicGFyc2VEYXRlVGltZSIsImRhdGV0aW1lcGlja2VyIiwidGltZSIsInBhcnNlVGltZSIsInRpbWVwaWNrZXIiLCJmb3JtYXRUaW1lIiwiZmlyc3QiLCJ3cENvbG9yUGlja2VyIiwiZXJyIiwiaW5saW5lRWRpdFBvc3QiLCJfd3BfaW5saW5lX2VkaXRfcG9zdCIsImVkaXQiLCJfd3BfaW5saW5lX2VkaXRfc2F2ZSIsInNhdmUiLCJfd3BfaW5saW5lX2VkaXRfcmV2ZXJ0IiwicmV2ZXJ0IiwiJHRyIiwiZm9ybV9jbGFzcyIsInBhcnNlSW50IiwiZ2V0SWQiLCJpcyIsImFjZl9xZWRfZm9ybSIsIiRpbWciLCJmaW5kIiwieCIsIm9mZnNldFgiLCJudW0iLCJzdGVwIiwid2lkdGgiLCJzaG93IiwiaGlkZSJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBV0EsRUFBR0MsR0FDYkEsRUFBUUMsY0FBZ0JDLElBQ3ZCQyxRQUNBQyxPQUNDQyxVQUNBQyxTQUFTLFNBQVNDLEdBRWpCLE1BREFMLElBQUdFLE1BQU1DLE9BQU9FLEVBQUVDLE1BQVFOLEdBQUdFLE1BQU1LLEtBQUtDLE9BQU9ILEdBQ3hDTCxHQUFHRSxNQUFN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LEdBRWR5RixFQUFJSSxHQUFHLG1CQUNYSCxFQUFhM0gsRUFBR0MsS0FBSzJDLFVBQ1Y4RSxFQUFJSSxHQUFHLG9CQUNsQkgsRUFBYTNILEVBQUdDLEtBQUs0QyxVQUVmOEUsSUFHUHpHLEtBQUs2RyxhQUFlLEdBQUlKLElBQ3ZCakgsR0FBSWdILEVBQUk3RCxJQUFJLEdBQ1o1QixVQUFXQSxNQUtia0YsZUFBZU0sT0FBUyxXQUV2QixRQURHdkcsS0FBSzZHLGNBQWdCN0csS0FBSzZHLGFBQWFyRixTQUNuQzhFLEVBQXVCbEcsTUFBT0osS0FBTUUsWUFFNUMrRixlQUFlSSxLQUFPLFdBRXJCLFFBREdyRyxLQUFLNkcsY0FBZ0I3RyxLQUFLNkcsYUFBYXJGLFNBQ25DNEUsRUFBcUJoRyxNQUFPSixLQUFNRSxZQUszQyxNQUNBLElBdU9LZ0csSUEyTEZqRSxPQUFRQyxPQUFPckQ7Q0MxZG5CLFNBQVVGLEdBQ1RBLEVBQUUsd0JBQXdCc0csR0FBRyxZQUFZLFNBQVN4RCxHQUNqRCxHQUNDcUYsSUFEV25JLEVBQUVxQixNQUNOckIsRUFBRXFCLE1BQU0rRyxLQUFLLE9BQ3BCQyxHQUFLdkYsRUFBRXdGLFFBQ1BDLElBQU9KLEVBQUs1QyxPQUNaaUQsS0FBT3hJLEVBQUVxQixNQUFNb0gsUUFBVUYsSUFFMUJKLEVBQUt4RyxLQUFNLFNBQVNDLEVBQUVmLEdBQ2pCd0gsR0FBS0csS0FBSzVHLEVBQ2I1QixFQUFFYSxHQUFJNkgsT0FFTjFJLEVBQUVhLEdBQUk4SCxZQUlQckYiLCJmaWxlIjoiYWNmLXF1aWNrZWRpdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oICQsIGV4cG9ydHMgKXtcblx0ZXhwb3J0cy5hY2ZfcXVpY2tlZGl0ID0gcWUgPSB7XG5cdFx0Zm9ybTp7fSxcblx0XHRmaWVsZDoge1xuXHRcdFx0X3R5cGVzOiB7fSwvLyBmaWVsZCB0eXBlc1xuXHRcdFx0YWRkX3R5cGU6ZnVuY3Rpb24oYSkge1xuXHRcdFx0XHRxZS5maWVsZC5fdHlwZXNbYS50eXBlXSA9IHFlLmZpZWxkLlZpZXcuZXh0ZW5kKGEpO1xuXHRcdFx0XHRyZXR1cm4gcWUuZmllbGQuX3R5cGVzW2EudHlwZV07XG5cdFx0XHR9LFxuXHRcdFx0ZmFjdG9yeTpmdW5jdGlvbihlbCxjb250cm9sbGVyKXtcblx0XHRcdFx0dmFyIHR5cGUgPSAkKGVsKS5hdHRyKCdkYXRhLWZpZWxkLXR5cGUnKSxcblx0XHRcdFx0XHR0eXBlcyA9IHFlLmZpZWxkLl90eXBlcztcblxuXHRcdFx0XHRmaWVsZF9jbGFzcyA9IHR5cGUgaW4gdHlwZXMgPyB0eXBlc1t0eXBlXSA6IHFlLmZpZWxkLlZpZXc7XG5cdFx0XHRcdHJldHVybiBuZXcgZmllbGRfY2xhc3Moe1xuXHRcdFx0XHRcdGVsOlx0XHRcdGVsLFxuXHRcdFx0XHRcdGNvbnRyb2xsZXI6XHRjb250cm9sbGVyLFxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9LFxuXHR9O1xuXHRxZS5mb3JtLlZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG5cdFx0aW5pdGlhbGl6ZTpmdW5jdGlvbigpe1xuXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRcdHRoaXMub3B0aW9ucyA9IGFyZ3VtZW50c1swXTtcblxuXHRcdFx0QmFja2JvbmUuVmlldy5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cblx0XHRcdHRoaXMuZmllbGRzID0ge307XG5cblx0XHRcdHRoaXMuJCgnLmlubGluZS1lZGl0LWNvbC1xZWQgW2RhdGEta2V5XScpLmVhY2goZnVuY3Rpb24oaSxlbCl7XG5cdFx0XHRcdHZhciBmaWVsZCA9IHFlLmZpZWxkLmZhY3RvcnkoIGVsLCB0aGlzICk7XG5cdFx0XHRcdHNlbGYuZmllbGRzWyBmaWVsZC5rZXkgXSA9IGZpZWxkO1xuXHRcdFx0fSk7XG5cdFx0XHQvLyBsb2FkIHZhbHVlc1xuXHRcdFx0dGhpcy5sb2FkVmFsdWVzKCk7XG5cblx0XHR9LFxuXHRcdGxvYWRWYWx1ZXM6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdFx0JC5wb3N0KHtcblx0XHRcdFx0dXJsOmFqYXh1cmwsXG5cdFx0XHRcdGRhdGE6e1xuXHRcdFx0XHRcdCdhY3Rpb24nIDogJ2dldF9hY2ZfcG9zdF9tZXRhJyxcblx0XHRcdFx0XHQnb2JqZWN0X2lkJyA6IHRoaXMub3B0aW9ucy5vYmplY3RfaWQsXG5cdFx0XHRcdFx0J2FjZl9maWVsZF9rZXlzJyA6IE9iamVjdC5rZXlzKHRoaXMuZmllbGRzKVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRzdWNjZXNzOmZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdFx0XHRfLmVhY2gocmVzcG9uc2UsZnVuY3Rpb24oIHZhbCwga2V5ICl7XG5cdFx0XHRcdFx0XHRzZWxmLmZpZWxkc1trZXldLnNldFZhbHVlKCB2YWwgKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9LFxuXHRcdHVubG9hZDpmdW5jdGlvbihlKXtcblx0XHRcdF8uZWFjaCh0aGlzLmZpZWxkcyxmdW5jdGlvbihmaWVsZCl7XG5cdFx0XHRcdGZpZWxkLnVubG9hZCgpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9KTtcblx0cWUuZm9ybS5RdWlja0VkaXQgPSBxZS5mb3JtLlZpZXcuZXh0ZW5kKHtcblxuXHR9KTtcblxuXHRxZS5mb3JtLkJ1bGtFZGl0ID0gcWUuZm9ybS5WaWV3LmV4dGVuZCh7XG5cblx0fSk7XG5cblxuXG5cdHFlLmZpZWxkLlZpZXcgPSB3cC5tZWRpYS5WaWV3LmV4dGVuZCh7XG5cdFx0aW5pdGlhbGl6ZTpmdW5jdGlvbigpe1xuXHRcdFx0QmFja2JvbmUuVmlldy5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0XHR0aGlzLmtleSA9IHRoaXMuJGVsLmF0dHIoJ2RhdGEta2V5Jyk7XG5cdFx0XHR0aGlzLiQoJ2lucHV0JykucHJvcCggJ3JlYWRvbmx5JywgdHJ1ZSApO1xuXG5cdFx0fSxcblx0XHRzZXRWYWx1ZTpmdW5jdGlvbih2YWx1ZSl7XG5cdFx0XHR0aGlzLiQoJ2lucHV0JykucHJvcCggJ3JlYWRvbmx5JywgZmFsc2UgKTtcblx0XHRcdHRoaXMuJCgnaW5wdXQnKS52YWwodmFsdWUpO1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fSxcblx0XHR1bmxvYWQ6ZnVuY3Rpb24oKXt9XG5cdH0pO1xuXG5cblxufSkoalF1ZXJ5LHdpbmRvdyk7XG4iLCIoZnVuY3Rpb24oICQsIHFlICl7XG5cdHZhciBmaWxlX3R5cGUgPSB7XG5cdFx0dHlwZTonZmlsZScsXG5cdFx0bWVkaWFGcmFtZVR5cGU6JycsXG5cdFx0ZXZlbnRzOntcblx0XHRcdCdjbGljayAuc2VsZWN0LW1lZGlhJyA6ICdzZWxlY3RGaWxlJyxcblx0XHRcdCdjbGljayAucmVtb3ZlLW1lZGlhJyA6ICdyZW1vdmVGaWxlJyxcblx0XHR9LFxuXHRcdGluaXRpYWxpemU6ZnVuY3Rpb24oKSB7XG5cblx0XHRcdHFlLmZpZWxkLlZpZXcucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO1xuXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXMsXG5cdFx0XHRcdCRoaWRkZW4gPSB0aGlzLiQoJ1t0eXBlPVwiaGlkZGVuXCJdJyksXG5cdFx0XHRcdHBvc3RfaWQgPSBhY2YuZ2V0KCdwb3N0X2lkJyk7XG5cblx0XHRcdHRoaXMubWVkaWFGcmFtZU9wdHMgPSB7XG5cdFx0XHRcdGZpZWxkXHRcdDogdGhpcy5rZXksXG5cdFx0XHRcdG11bHRpcGxlXHQ6IGZhbHNlLFxuXHRcdFx0XHRwb3N0X2lkXHRcdDogcG9zdF9pZCxcblx0XHRcdFx0bGlicmFyeVx0XHQ6ICRoaWRkZW4uYXR0cignZGF0YS1saWJyYXJ5JyksXG5cdFx0XHRcdG1vZGVcdFx0OidzZWxlY3QnLFxuXHRcdFx0XHR0eXBlXHRcdDogdGhpcy5tZWRpYUZyYW1lVHlwZSxcblx0XHRcdFx0c2VsZWN0XHRcdDogZnVuY3Rpb24gKCBhdHRhY2htZW50LCBpICkge1xuXHRcdFx0XHRcdGlmICggISBhdHRhY2htZW50ICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRzZWxmLnNldFZhbHVlKCBhdHRhY2htZW50LmdldCgnaWQnKSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdFx0aWYgKCAkaGlkZGVuLmRhdGEoJ21pbWVfdHlwZXMnKSApIHtcblx0XHRcdFx0dGhpcy5tZWRpYUZyYW1lT3B0cy5taW1lX3R5cGVzID0gJGhpZGRlbi5kYXRhKCdtaW1lX3R5cGVzJyk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIHRoaXMuJCgnLnNlbGVjdC1tZWRpYScpLm9uKCdjbGljaycsZnVuY3Rpb24oZSl7XG5cdFx0XHQvLyBcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdC8vIFx0c2VsZi5zZWxlY3RGaWxlKCk7XG5cdFx0XHQvLyBcdGNvbnNvbGUubG9nKHRoaXMpO1xuXHRcdFx0Ly8gfSk7XG4vL1x0XHRcdGNvbnNvbGUubG9nKHRoaXMuJCgnLnNlbGVjdC1tZWRpYScpKVxuXHRcdH0sXG5cdFx0c2VsZWN0RmlsZTpmdW5jdGlvbihlKXtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdC8vIENyZWF0ZSBhIG5ldyBtZWRpYSBmcmFtZVxuXHRcdFx0dmFyIG1lZGlhX2ZyYW1lID0gYWNmLm1lZGlhLnBvcHVwKCB0aGlzLm1lZGlhRnJhbWVPcHRzICk7XG5cblx0XHRcdC8vIHNldCBwb3N0IGlkLCBzbyBuZXcgdXBsb2FkcyBhcmUgYXR0YWNoZWQgdG8gZWRpdGVkIHBvc3Rcblx0XHRcdGlmICggYWNmLmlzc2V0KHdpbmRvdywnd3AnLCdtZWRpYScsJ3ZpZXcnLCdzZXR0aW5ncycsJ3Bvc3QnKSAmJiAkLmlzTnVtZXJpYyggdGhpcy5tZWRpYUZyYW1lT3B0cy5wb3N0X2lkICkgKSB7XG5cblx0XHRcdFx0d3AubWVkaWEudmlldy5zZXR0aW5ncy5wb3N0LmlkID0gdGhpcy5tZWRpYUZyYW1lT3B0cy5wb3N0X2lkO1xuXG5cdFx0XHR9XG5cblx0XHR9LFxuXHRcdHJlbW92ZUZpbGU6ZnVuY3Rpb24oZSl7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHR0aGlzLnNldFZhbHVlKCcnKTtcblx0XHR9LFxuXHRcdHNldFZhbHVlOmZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0XHR0aGlzLiQoJ1t0eXBlPVwiaGlkZGVuXCJdJykudmFsKHZhbHVlKTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblx0fTtcblxuXHQvKipcblx0ICpcdGZpZWxkIHR5cGUgZmlsZVxuXHQgKi9cblx0cWUuZmllbGQuYWRkX3R5cGUoIGZpbGVfdHlwZSApO1xuXG5cdC8qKlxuXHQgKlx0ZmllbGQgdHlwZSBpbWFnZVxuXHQgKi9cblx0cWUuZmllbGQuYWRkX3R5cGUoIF8uZXh0ZW5kKGZpbGVfdHlwZSx7dHlwZTonaW1hZ2UnLG1lZGlhRnJhbWVUeXBlOidpbWFnZSd9KSApO1xuXG5cdHFlLmZpZWxkLmFkZF90eXBlKCBmaWxlX3R5cGUgKTtcblxuXHQvKipcblx0ICpcdGZpZWxkIHR5cGUgcmFuZ2Vcblx0ICovXG5cdHFlLmZpZWxkLmFkZF90eXBlKCB7XG5cdFx0IHR5cGU6J3JhbmdlJyxcblx0XHQgZXZlbnRzOntcblx0XHRcdCAnY2hhbmdlIFt0eXBlPVwicmFuZ2VcIl0nXHRcdDogJ2FkYXB0TnVtYmVyJyxcblx0XHRcdCAnbW91c2Vtb3ZlIFt0eXBlPVwicmFuZ2VcIl0nXHRcdDogJ2FkYXB0TnVtYmVyJyxcblx0XHRcdCAnY2hhbmdlIFt0eXBlPVwibnVtYmVyXCJdJ1x0XHQ6ICdhZGFwdFJhbmdlJyxcblx0XHRcdCAnbW91c2Vtb3ZlIFt0eXBlPVwibnVtYmVyXCJdJ1x0OiAnYWRhcHRSYW5nZScsXG5cdFx0IH0sXG5cdFx0IGFkYXB0TnVtYmVyOmZ1bmN0aW9uKCl7XG5cdFx0XHQgdGhpcy4kKCdbdHlwZT1cIm51bWJlclwiXScpLnZhbCggdGhpcy4kKCdbdHlwZT1cInJhbmdlXCJdJykudmFsKCkgKTtcblx0XHQgfSxcblx0XHQgYWRhcHRSYW5nZTpmdW5jdGlvbigpe1xuXHRcdFx0IHRoaXMuJCgnW3R5cGU9XCJyYW5nZVwiXScpLnZhbCggdGhpcy4kKCdbdHlwZT1cIm51bWJlclwiXScpLnZhbCgpICk7XG5cdFx0IH1cblx0IH0gKTtcblxuXG5cdC8qKlxuICBcdCAqXHRmaWVsZCB0eXBlIGRhdGVfcGlja2VyXG4gIFx0ICovXG4gIFx0cWUuZmllbGQuYWRkX3R5cGUoIHtcbiBcdFx0dHlwZTonZGF0ZV9waWNrZXInLFxuXHRcdGluaXRpYWxpemU6ZnVuY3Rpb24oKSB7XG5cdFx0XHRxZS5maWVsZC5WaWV3LnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtcblx0XHRcdGlmKCAkKCdib2R5ID4gI3VpLWRhdGVwaWNrZXItZGl2JykubGVuZ3RoID4gMCApIHtcblx0XHRcdFx0JCgnYm9keSA+ICN1aS1kYXRlcGlja2VyLWRpdicpLndyYXAoJzxkaXYgY2xhc3M9XCJhY2YtdWktZGF0ZXBpY2tlclwiIC8+Jyk7XG5cdFx0XHR9XG5cdFx0XHR2YXIgJGhpZGRlblx0XHQ9IHRoaXMuJCggJ1t0eXBlPVwiaGlkZGVuXCJdJyApLFxuXHRcdFx0XHQkaW5wdXRcdFx0PSB0aGlzLiQoICdbdHlwZT1cInRleHRcIl0nICksXG5cdFx0XHRcdGFsdEZvcm1hdFx0PSAneXltbWRkJ1xuXHRcdFx0XHRhcmdzXHRcdD0ge1xuXHRcdFx0XHRcdGRhdGVGb3JtYXRcdFx0OiB0aGlzLiRlbC5kYXRhKCdkYXRlX2Zvcm1hdCcpLFxuXHRcdFx0XHRcdGFsdEZvcm1hdFx0XHQ6IGFsdEZvcm1hdCxcblx0XHRcdFx0XHRhbHRGaWVsZFx0XHQ6ICRoaWRkZW4sXG5cdFx0XHRcdFx0Y2hhbmdlWWVhclx0XHQ6IHRydWUsXG5cdFx0XHRcdFx0eWVhclJhbmdlXHRcdDogXCItMTAwOisxMDBcIixcblx0XHRcdFx0XHRjaGFuZ2VNb250aFx0XHQ6IHRydWUsXG5cdFx0XHRcdFx0c2hvd0J1dHRvblBhbmVsXHQ6IHRydWUsXG5cdFx0XHRcdFx0Zmlyc3REYXlcdFx0OiB0aGlzLiRlbC5kYXRhKCdmaXJzdF9kYXknKVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRkYXRlXHRcdD0gJC5kYXRlcGlja2VyLnBhcnNlRGF0ZSggYWx0Rm9ybWF0LCAkaGlkZGVuLnZhbCgpICApO1xuXG5cdFx0XHQkaW5wdXQuZGF0ZXBpY2tlciggYXJncyApLmRhdGVwaWNrZXIoICdzZXREYXRlJywgZGF0ZSApLm9uKCdibHVyJyxmdW5jdGlvbigpe1xuXHRcdFx0XHRpZiAoICEgJCh0aGlzKS52YWwoKSApIHtcblx0XHRcdFx0XHQkaGlkZGVuLnZhbCgnJyk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cbiBcdH0pO1xuXG5cdC8qKlxuIFx0ICpcdGZpZWxkIHR5cGUgZGF0ZV90aW1lX3BpY2tlclxuIFx0ICovXG4gXHRxZS5maWVsZC5hZGRfdHlwZSgge1xuXHRcdHR5cGU6J2RhdGVfdGltZV9waWNrZXInLFxuXHRcdGluaXRpYWxpemU6ZnVuY3Rpb24oKSB7XG5cdFx0XHRxZS5maWVsZC5WaWV3LnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtcblx0XHRcdGlmKCAkKCdib2R5ID4gI3VpLWRhdGVwaWNrZXItZGl2JykubGVuZ3RoID4gMCApIHtcblx0XHRcdFx0JCgnYm9keSA+ICN1aS1kYXRlcGlja2VyLWRpdicpLndyYXAoJzxkaXYgY2xhc3M9XCJhY2YtdWktZGF0ZXBpY2tlclwiIC8+Jyk7XG5cdFx0XHR9XG5cdFx0XHR2YXIgJGhpZGRlblx0XHRcdD0gdGhpcy4kKCAnW3R5cGU9XCJoaWRkZW5cIl0nICksXG5cdFx0XHRcdCRpbnB1dFx0XHRcdD0gdGhpcy4kKCAnW3R5cGU9XCJ0ZXh0XCJdJyApLFxuXHRcdFx0XHRhbHRGb3JtYXRcdFx0PSAneXktbW0tZGQnXG5cdFx0XHRcdGFsdFRpbWVGb3JtYXRcdD0gJ0hIOm1tOnNzJyxcblx0XHRcdFx0YXJnc1x0XHRcdD0ge1xuXHRcdFx0XHRcdGFsdEZpZWxkXHRcdFx0OiAkaGlkZGVuLFxuXHRcdFx0XHRcdGRhdGVGb3JtYXRcdFx0XHQ6IHRoaXMuJGVsLmRhdGEoJ2RhdGVfZm9ybWF0JyksXG5cdFx0XHRcdFx0YWx0Rm9ybWF0XHRcdFx0OiBhbHRGb3JtYXQsXG5cdFx0XHRcdFx0dGltZUZvcm1hdFx0XHRcdDogdGhpcy4kZWwuZGF0YSgndGltZV9mb3JtYXQnKSxcblx0XHRcdFx0XHRhbHRUaW1lRm9ybWF0XHRcdDogYWx0VGltZUZvcm1hdCxcblx0XHRcdFx0XHRhbHRGaWVsZFRpbWVPbmx5XHQ6IGZhbHNlLFxuXHRcdFx0XHRcdGNoYW5nZVllYXJcdFx0XHQ6IHRydWUsXG5cdFx0XHRcdFx0eWVhclJhbmdlXHRcdFx0OiBcIi0xMDA6KzEwMFwiLFxuXHRcdFx0XHRcdGNoYW5nZU1vbnRoXHRcdFx0OiB0cnVlLFxuXHRcdFx0XHRcdHNob3dCdXR0b25QYW5lbFx0XHQ6IHRydWUsXG5cdFx0XHRcdFx0Zmlyc3REYXlcdFx0XHQ6IHRoaXMuJGVsLmRhdGEoJ2ZpcnN0X2RheScpLFxuXHRcdFx0XHRcdGNvbnRyb2xUeXBlXHRcdFx0OiAnc2VsZWN0Jyxcblx0XHRcdFx0XHRvbmVMaW5lXHRcdFx0XHQ6IHRydWVcblx0XHRcdFx0fSxcblx0XHRcdFx0ZGF0ZXRpbWUgXHRcdFx0PSAkLmRhdGVwaWNrZXIucGFyc2VEYXRlVGltZSggYWx0Rm9ybWF0LCBhbHRUaW1lRm9ybWF0LCAkaGlkZGVuLnZhbCgpICk7XG5cblx0XHRcdCRpbnB1dC5kYXRldGltZXBpY2tlciggYXJncyApLmRhdGVwaWNrZXIoICdzZXREYXRlJywgZGF0ZXRpbWUgKS5vbignYmx1cicsZnVuY3Rpb24oKXtcblx0XHRcdFx0aWYgKCAhICQodGhpcykudmFsKCkgKSB7XG5cdFx0XHRcdFx0JGhpZGRlbi52YWwoJycpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cdH0pO1xuXG5cdC8qKlxuIFx0ICpcdGZpZWxkIHR5cGUgdGltZV9waWNrZXJcbiBcdCAqL1xuIFx0cWUuZmllbGQuYWRkX3R5cGUoIHtcblx0XHR0eXBlOid0aW1lX3BpY2tlcicsXG5cdFx0aW5pdGlhbGl6ZTpmdW5jdGlvbigpIHtcblx0XHRcdHFlLmZpZWxkLlZpZXcucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO1xuXHRcdFx0aWYoICQoJ2JvZHkgPiAjdWktZGF0ZXBpY2tlci1kaXYnKS5sZW5ndGggPiAwICkge1xuXHRcdFx0XHQkKCdib2R5ID4gI3VpLWRhdGVwaWNrZXItZGl2Jykud3JhcCgnPGRpdiBjbGFzcz1cImFjZi11aS1kYXRlcGlja2VyXCIgLz4nKTtcblx0XHRcdH1cblx0XHRcdHZhciBzZWxmXHRcdFx0PSB0aGlzLFxuXHRcdFx0XHQkaGlkZGVuXHRcdFx0PSB0aGlzLiQoICdbdHlwZT1cImhpZGRlblwiXScgKSxcbiBcdFx0XHRcdCRpbnB1dFx0XHRcdD0gdGhpcy4kKCAnW3R5cGU9XCJ0ZXh0XCJdJyApLFxuIFx0XHRcdFx0YWx0VGltZUZvcm1hdFx0PSAnSEg6bW06c3MnLFxuIFx0XHRcdFx0YXJnc1x0XHRcdD0ge1xuIFx0XHRcdFx0XHR0aW1lRm9ybWF0XHRcdFx0OiB0aGlzLiRlbC5kYXRhKCd0aW1lX2Zvcm1hdCcpLFxuIFx0XHRcdFx0XHRhbHRUaW1lRm9ybWF0XHRcdDogYWx0VGltZUZvcm1hdCxcbiBcdFx0XHRcdFx0YWx0RmllbGRcdFx0XHQ6ICRoaWRkZW4sXG4gXHRcdFx0XHRcdGFsdEZpZWxkVGltZU9ubHlcdDogZmFsc2UsXG4gXHRcdFx0XHRcdHNob3dCdXR0b25QYW5lbFx0XHQ6IHRydWUsXG4gXHRcdFx0XHRcdGNvbnRyb2xUeXBlXHRcdFx0OiAnc2VsZWN0JyxcbiBcdFx0XHRcdFx0b25lTGluZVx0XHRcdFx0OiB0cnVlXG4gXHRcdFx0XHR9LFxuIFx0XHRcdFx0dGltZSBcdFx0XHQ9ICQuZGF0ZXBpY2tlci5wYXJzZVRpbWUoIGFsdFRpbWVGb3JtYXQsICRoaWRkZW4udmFsKCkgKTtcblxuIFx0XHRcdCRpbnB1dC50aW1lcGlja2VyKCBhcmdzICkub24oJ2JsdXInLGZ1bmN0aW9uKCl7XG4gXHRcdFx0XHRpZiAoICEgJCh0aGlzKS52YWwoKSApIHtcbiBcdFx0XHRcdFx0JGhpZGRlbi52YWwoJycpO1xuIFx0XHRcdFx0fVxuIFx0XHRcdH0pO1xuIFx0XHRcdGlmICggJGhpZGRlbi52YWwoKSApIHtcbiBcdFx0XHRcdCRpbnB1dC52YWwoICQuZGF0ZXBpY2tlci5mb3JtYXRUaW1lKCBzZWxmLiRlbC5kYXRhKCd0aW1lX2Zvcm1hdCcpLCB0aW1lICkgKVxuIFx0XHRcdH1cblxuXHRcdCB9XG5cdH0pO1xuXHQvKipcbiBcdCAqXHRmaWVsZCB0eXBlIHRpbWVfcGlja2VyXG4gXHQgKi9cbiBcdHFlLmZpZWxkLmFkZF90eXBlKCB7XG5cdFx0dHlwZTonY29sb3JfcGlja2VyJyxcblx0XHRpbml0aWFsaXplOmZ1bmN0aW9uKCkge1xuXHRcdFx0cWUuZmllbGQuVmlldy5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7XG5cdFx0XHR0aGlzLiRpbnB1dCA9IHRoaXMuJCgnW3R5cGU9XCJ0ZXh0XCJdJykuZmlyc3QoKS53cENvbG9yUGlja2VyKCk7XG5cdFx0fSxcblx0XHRzZXRWYWx1ZTpmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHR0aGlzLiRpbnB1dC5wcm9wKCdyZWFkb25seScsZmFsc2UpO1xuXHRcdFx0dGhpcy4kaW5wdXQud3BDb2xvclBpY2tlciggJ2NvbG9yJywgdmFsdWUgKTtcblx0XHR9LFxuXHRcdHVubG9hZDpmdW5jdGlvbigpIHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdHRoaXMuJGlucHV0LndwQ29sb3JQaWNrZXIoJ2Nsb3NlJyk7XG5cdFx0XHR9IGNhdGNoKGVycil7fVxuXHRcdH1cblx0fSk7XG5cbn0pKCBqUXVlcnksIGFjZl9xdWlja2VkaXQgKTtcblxuXG4vKlxucmFuZ2VcbnNlbGVjdFxuY2hlY2tib3hcbnJhZGlvXG50cnVlX2ZhbHNlXG5pbWFnZVxuZmlsZVxuZGF0ZV9waWNrZXJcbmRhdGVfdGltZV9waWNrZXJcbnRpbWVfcGlja2VyXG5jb2xvcl9waWNrZXJcblxuKi9cbiIsIi8vdmFyIGFjZl9xdWlja2VkaXQgPSB7fTtcblxuXG4oZnVuY3Rpb24oJCxxZSkge1xuXG5cblxuXHRpZiAoICd1bmRlZmluZWQnICE9PSB0eXBlb2YgaW5saW5lRWRpdFBvc3QgKSB7XG5cdFx0Ly8gd2UgY3JlYXRlIGEgY29weSBvZiB0aGUgV1AgaW5saW5lIGVkaXQgcG9zdCBmdW5jdGlvblxuXHRcdHZhciBfd3BfaW5saW5lX2VkaXRfcG9zdCA9IGlubGluZUVkaXRQb3N0LmVkaXQsXG5cdFx0XHRfd3BfaW5saW5lX2VkaXRfc2F2ZSA9IGlubGluZUVkaXRQb3N0LnNhdmUsXG5cdFx0XHRfd3BfaW5saW5lX2VkaXRfcmV2ZXJ0ID0gaW5saW5lRWRpdFBvc3QucmV2ZXJ0LFxuXHRcdFx0dW5sb2FkX2NiO1xuXHRcdC8vIGFuZCB0aGVuIHdlIG92ZXJ3cml0ZSB0aGUgZnVuY3Rpb24gd2l0aCBvdXIgb3duIGNvZGVcblx0XHRpbmxpbmVFZGl0UG9zdC5lZGl0ID0gZnVuY3Rpb24oIGlkICkge1xuXHRcdFx0dmFyIG9iamVjdF9pZCwgJHRyLCBmb3JtX2NsYXNzO1xuXG5cblx0XHRcdC8vIFwiY2FsbFwiIHRoZSBvcmlnaW5hbCBXUCBlZGl0IGZ1bmN0aW9uXG5cdFx0XHQvLyB3ZSBkb24ndCB3YW50IHRvIGxlYXZlIFdvcmRQcmVzcyBoYW5naW5nXG5cdFx0XHRfd3BfaW5saW5lX2VkaXRfcG9zdC5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cblx0XHRcdC8vIGdldCB0aGUgcG9zdCBJRFxuXHRcdFx0b2JqZWN0X2lkID0gMDtcblx0XHRcdGlmICggdHlwZW9mKCBpZCApID09PSAnb2JqZWN0JyApIHtcblx0XHRcdFx0b2JqZWN0X2lkID0gcGFyc2VJbnQoIHRoaXMuZ2V0SWQoIGlkICkgKTtcblx0XHRcdH1cblx0XHRcdCR0ciA9ICQoJyNlZGl0LScgKyBvYmplY3RfaWQgKTtcbi8vXHRcdFx0Z2V0X2FjZl9wb3N0X2RhdGEoIG9iamVjdF9pZCAsICQoJyNlZGl0LScgKyBvYmplY3RfaWQgKSApO1xuXHRcdFx0aWYgKCAkdHIuaXMoJy5xdWljay1lZGl0LXJvdycpICkge1xuXHRcdFx0XHRmb3JtX2NsYXNzID0gcWUuZm9ybS5RdWlja0VkaXQ7XG5cdFx0XHR9IGVsc2UgaWYgKCAkdHIuaXMoJy5idWxrLWVkaXQtcm93JykgKSB7XG5cdFx0XHRcdGZvcm1fY2xhc3MgPSBxZS5mb3JtLkJ1bGtFZGl0O1xuXHRcdFx0fVxuXHRcdFx0aWYgKCAhIGZvcm1fY2xhc3MgKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHRoaXMuYWNmX3FlZF9mb3JtID0gbmV3IGZvcm1fY2xhc3Moe1xuXHRcdFx0XHRlbDogJHRyLmdldCgwKSxcblx0XHRcdFx0b2JqZWN0X2lkOiBvYmplY3RfaWRcblx0XHRcdH0pO1xuXG4vL1x0XHRcdGJpbmRWYWxpZGF0aW9uKCAkdHIuZmluZCgnYnV0dG9uLnNhdmUnKSwgb2JqZWN0X2lkICk7XG5cdFx0fTtcblx0XHRpbmxpbmVFZGl0UG9zdC5yZXZlcnQgPSBmdW5jdGlvbigpIHtcblx0XHRcdCEhIHRoaXMuYWNmX3FlZF9mb3JtICYmIHRoaXMuYWNmX3FlZF9mb3JtLnVubG9hZCgpO1xuXHRcdFx0cmV0dXJuIF93cF9pbmxpbmVfZWRpdF9yZXZlcnQuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdH1cblx0XHRpbmxpbmVFZGl0UG9zdC5zYXZlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHQhISB0aGlzLmFjZl9xZWRfZm9ybSAmJiB0aGlzLmFjZl9xZWRfZm9ybS51bmxvYWQoKTtcblx0XHRcdHJldHVybiBfd3BfaW5saW5lX2VkaXRfc2F2ZS5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0fVxuXHR9XG5cblxuXHRyZXR1cm47XG5cdHZhciBtZWRpYV9mcmFtZTtcblxuXHRmdW5jdGlvbiBnZXRfYWNmX3Bvc3RfZGF0YSggcG9zdF9pZCAsICRwYXJlbnQgKSB7XG5cdFx0Ly9cblx0XHQvLyBMb2FkIEZpZWxkIFZhbHVlc1xuXHRcdC8vXG5cdFx0dmFyIHJlcV9kYXRhID0ge1xuXHRcdFx0J2FjdGlvbicgOiAnZ2V0X2FjZl9wb3N0X21ldGEnLFxuXHRcdFx0J3Bvc3RfaWQnIDogcG9zdF9pZCxcblx0XHRcdCdhY2ZfZmllbGRfa2V5cycgOiBbXVxuXHRcdH07XG5cdFx0Ly8gLi4uIGdhdGhlciBmaWVsZHMgLi4uXG5cdFx0JHBhcmVudC5maW5kKCdbZGF0YS1hY2YtZmllbGQta2V5XScpLmVhY2goZnVuY3Rpb24oKXtcblxuXHRcdFx0cmVxX2RhdGEuYWNmX2ZpZWxkX2tleXMucHVzaCggJCh0aGlzKS5hdHRyKCdkYXRhLWFjZi1maWVsZC1rZXknKSApO1xuXG5cdFx0XHQkKHRoaXMpLnByb3AoICdyZWFkb25seScsIHRydWUgKTtcblxuXHRcdFx0aWYgKCAhICQodGhpcykuaXMoJ1tkYXRhLWlzLWRvLW5vdC1jaGFuZ2U9XCJ0cnVlXCJdJyApICkge1xuXHRcdFx0XHRpZiAoICQodGhpcykuaXMoJ1t0eXBlPVwicmFkaW9cIl0sW3R5cGU9XCJjaGVja2JveFwiXScpICkge1xuXHRcdFx0XHRcdCQodGhpcykucHJvcCggJ2NoZWNrZWQnLCBmYWxzZSApO1xuXHRcdFx0XHR9IGVsc2UgaWYgKCAkKHRoaXMpLnBhcmVudCgpLmlzKCcuYWNmLXF1aWNrLWVkaXQtZGF0ZV9waWNrZXIsIC5hY2YtcXVpY2stZWRpdC10aW1lX3BpY2tlciwgLmFjZi1xdWljay1lZGl0LWRhdGVfdGltZV9waWNrZXInICkgKSB7XG5cdFx0XHRcdFx0JCh0aGlzKS5uZXh0KCdbdHlwZT1cInRleHRcIl0nKS5wcm9wKCAncmVhZG9ubHknLCB0cnVlICk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0JCh0aGlzKS52YWwoJycpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyAuLi4gc2VuZCBhIHJlcXVlc3QgLi4uXG5cdFx0JC5wb3N0KCBhamF4dXJsLCByZXFfZGF0YSwgZnVuY3Rpb24oIHJlc3VsdCApIHtcblx0XHRcdHZhciBpLCBrZXksIHZhbHVlLCAkdHIsICRmaWVsZCxcblx0XHRcdFx0c2VsZWN0ZWQ7XG5cblx0XHRcdCQod2luZG93KS5vZmYoJ2JlZm9yZXVubG9hZCcpO1xuXG5cdFx0XHR2YXIga2V5cyA9IFtdO1xuXHRcdFx0Ly8gb25seSBrZWVwIGtleXMgdGhhdCBoYXZlIGZpZWxkc1xuXHRcdFx0JHBhcmVudC5maW5kKCdbZGF0YS1hY2YtZmllbGQta2V5XScpLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBrZXk7XG5cdFx0XHRcdCEkdHIgJiYgKCR0ciA9ICQodGhpcykuY2xvc2VzdCgndHIuaW5saW5lLWVkaXQtcG9zdCcpKTtcblx0XHRcdFx0a2V5ID0gJCh0aGlzKS5kYXRhKCdhY2YtZmllbGQta2V5Jyk7XG5cdFx0XHRcdGlmICgga2V5cy5pbmRleE9mKCBrZXkgKSA9PT0gLTEgKSB7XG5cdFx0XHRcdFx0a2V5cy5wdXNoKGtleSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHRmb3IgKCBpPTA7IGk8a2V5cy5sZW5ndGg7IGkrKykge1xuXG5cdFx0XHRcdGtleSA9IGtleXNbaV0sIHZhbHVlID0gcmVzdWx0WyBrZXkgXTtcblxuXHRcdFx0XHQkZmllbGQgPSAkKCdbZGF0YS1hY2YtZmllbGQta2V5PVwiJytrZXkrJ1wiXTp2aXNpYmxlJyk7XG5cblx0XHRcdFx0Ly8gY29udmVydCBib29sIHRvIGludFxuXHRcdFx0XHRpZiAodHlwZW9mKHZhbHVlKSA9PT0gJ2Jvb2xlYW4nKSB7XG5cdFx0XHRcdFx0dmFsdWUgKj0gMTtcblx0XHRcdFx0fVxuXG5cblx0XHRcdFx0aWYgKCAkZmllbGQuaXMoICcuYWNmLWNoZWNrYm94LWxpc3QsIC5hY2YtcmFkaW8tbGlzdCcgKSApIHtcblx0XHRcdFx0XHRzZWxlY3RlZCA9IDA7XG5cdFx0XHRcdFx0aWYgKCAkLmlzQXJyYXkoIHZhbHVlICkgKSB7XG5cdFx0XHRcdFx0XHQkLmVhY2goIHZhbHVlLCBmdW5jdGlvbiggaWR4LCB2YWwgKSB7XG5cdFx0XHRcdFx0XHRcdHNlbGVjdGVkICs9ICRmaWVsZC5maW5kKCAnW3ZhbHVlPVwiJyt2YWwrJ1wiXScgKS5wcm9wKCAnY2hlY2tlZCcsdHJ1ZSkubGVuZ3RoO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHNlbGVjdGVkICs9ICRmaWVsZC5maW5kKCAnW3ZhbHVlPVwiJyt2YWx1ZSsnXCJdJyApLnByb3AoICdjaGVja2VkJyx0cnVlKS5sZW5ndGg7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICggJGZpZWxkLmlzKCcub3RoZXInKSAmJiAhIHNlbGVjdGVkICkge1xuXHRcdFx0XHRcdFx0aWYgKCAhISB2YWx1ZSApIHtcblx0XHRcdFx0XHRcdFx0JGZpZWxkLmZpbmQoJ1t2YWx1ZT1cIm90aGVyXCJdJykucHJvcCggJ2NoZWNrZWQnLCB0cnVlICk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQkZmllbGQuZmluZCgnW3R5cGU9XCJ0ZXh0XCJdJykudmFsKCcnKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fSBlbHNlIGlmICggISAkZmllbGQuaXMoICdbdHlwZT1cInJhZGlvXCJdLFt0eXBlPVwiY2hlY2tib3hcIl0nICkgKSB7XG5cdFx0XHRcdFx0JGZpZWxkLnZhbCggdmFsdWUgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICggISAkZmllbGQuaXMoICdbdHlwZT1cInBhc3N3b3JkXCJdJyApICkge1xuXHRcdFx0XHRcdCRmaWVsZC5wcm9wKCAncmVhZG9ubHknLCBmYWxzZSApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCAkZmllbGQuaXMoXCJ0ZXh0YXJlYVwiKSApIHtcblx0XHRcdFx0XHQkZmllbGQub24oJ2tleWRvd24ga2V5dXAnLCBmdW5jdGlvbihldmVudCkge1xuXHRcdFx0XHRcdFx0aWYgKCBldmVudC53aGljaCA9PSAxMyApIHtcblx0XHRcdFx0XHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoICRmaWVsZC5pcyhcInNlbGVjdFttdWx0aXBsZV0udWlcIikgKSB7XG5cdFx0XHRcdFx0dmFyICRvcHQgPSAkZmllbGQuY2hpbGRyZW4oKTtcblxuXHRcdFx0XHRcdCRvcHQuc29ydChmdW5jdGlvbihhLGIpIHtcblx0XHRcdFx0XHRcdHJldHVybiB2YWx1ZS5pbmRleE9mKCAkKGEpLmF0dHIoJ3ZhbHVlJykgKSAtIHZhbHVlLmluZGV4T2YoICQoYikuYXR0cigndmFsdWUnKSApO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0JG9wdC5kZXRhY2goKS5hcHBlbmRUbyggJGZpZWxkICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICggJGZpZWxkLnBhcmVudCgpLmlzKCcuYWNmLXF1aWNrLWVkaXQtZGF0ZV9waWNrZXIsIC5hY2YtcXVpY2stZWRpdC10aW1lX3BpY2tlciwgLmFjZi1xdWljay1lZGl0LWRhdGVfdGltZV9waWNrZXInICkgKSB7XG5cdFx0XHRcdFx0JGZpZWxkLm5leHQoJ1t0eXBlPVwidGV4dFwiXScpLnByb3AoICdyZWFkb25seScsIGZhbHNlICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHQvLyBpbml0IGNvbG9ycGlja2VyXG5cdFx0XHQkcGFyZW50LmZpbmQoJ2lucHV0LmFjZi1xdWljay1lZGl0LWNvbG9yX3BpY2tlcicpLmVhY2goIGZ1bmN0aW9uKCBpLCBlbCApIHtcblx0XHRcdFx0JChlbCkud3BDb2xvclBpY2tlcigpO1xuXHRcdFx0fSlcblxuXHRcdFx0Ly8gaW5pdCBkYXRlcGlja2VyXG5cdFx0XHQkcGFyZW50LmZpbmQoJy5hY2YtcXVpY2stZWRpdC1kYXRlX3BpY2tlcicpLmVhY2goIGZ1bmN0aW9uKCBpLCBlbCApIHtcblxuXHRcdFx0XHRhY2ZfcXVpY2tlZGl0LmRhdGVwaWNrZXIuaW5pdCggJChlbCkgKTtcblxuXHRcdFx0fSk7XG5cblx0XHRcdC8vIGluaXQgdGltZXBpY2tlclxuXHRcdFx0JHBhcmVudC5maW5kKCcuYWNmLXF1aWNrLWVkaXQtdGltZV9waWNrZXInKS5lYWNoKCBmdW5jdGlvbiggaSwgZWwgKSB7XG5cblx0XHRcdFx0YWNmX3F1aWNrZWRpdC50aW1lcGlja2VyLmluaXQoICQoZWwpICk7XG5cblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBpbml0IGRhdGV0aW1waWNrZXJcblx0XHRcdCRwYXJlbnQuZmluZCgnLmFjZi1xdWljay1lZGl0LWRhdGVfdGltZV9waWNrZXInKS5lYWNoKCBmdW5jdGlvbiggaSwgZWwgKSB7XG5cblx0XHRcdFx0YWNmX3F1aWNrZWRpdC5kYXRldGltZXBpY2tlci5pbml0KCAkKGVsKSApO1xuXG5cdFx0XHR9KTtcblxuXHRcdFx0aWYoICQoJ2JvZHkgPiAjdWktZGF0ZXBpY2tlci1kaXYnKS5sZW5ndGggPiAwICkge1xuXHRcdFx0XHQkKCdib2R5ID4gI3VpLWRhdGVwaWNrZXItZGl2Jykud3JhcCgnPGRpdiBjbGFzcz1cImFjZi11aS1kYXRlcGlja2VyXCIgLz4nKTtcblx0XHRcdH1cblxuXHRcdFx0JCgnW2RhdGEtaXMtZG8tbm90LWNoYW5nZT1cInRydWVcIl0nKS50cmlnZ2VyKCdjaGFuZ2UnKTtcblx0XHR9KTtcblx0fVxuXG5cdGFjZl9xdWlja2VkaXQuZGF0ZXBpY2tlciA9IHtcblx0XHRpbml0OiBmdW5jdGlvbiggJHdyYXAgKSB7XG5cdFx0XHR2YXIgJGhpZGRlblx0XHQ9ICR3cmFwLmZpbmQoICdbdHlwZT1cImhpZGRlblwiXScgKSxcblx0XHRcdFx0JGlucHV0XHRcdD0gJHdyYXAuZmluZCggJ1t0eXBlPVwidGV4dFwiXScgKSxcblx0XHRcdFx0YWx0Rm9ybWF0XHQ9ICd5eW1tZGQnXG5cdFx0XHRcdGFyZ3NcdFx0PSB7XG5cdFx0XHRcdFx0ZGF0ZUZvcm1hdFx0XHQ6ICR3cmFwLmRhdGEoJ2RhdGVfZm9ybWF0JyksXG5cdFx0XHRcdFx0YWx0Rm9ybWF0XHRcdDogYWx0Rm9ybWF0LFxuXHRcdFx0XHRcdGFsdEZpZWxkXHRcdDogJGhpZGRlbixcblx0XHRcdFx0XHRjaGFuZ2VZZWFyXHRcdDogdHJ1ZSxcblx0XHRcdFx0XHR5ZWFyUmFuZ2VcdFx0OiBcIi0xMDA6KzEwMFwiLFxuXHRcdFx0XHRcdGNoYW5nZU1vbnRoXHRcdDogdHJ1ZSxcblx0XHRcdFx0XHRzaG93QnV0dG9uUGFuZWxcdDogdHJ1ZSxcblx0XHRcdFx0XHRmaXJzdERheVx0XHQ6ICR3cmFwLmRhdGEoJ2ZpcnN0X2RheScpXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGRhdGVcdFx0PSAkLmRhdGVwaWNrZXIucGFyc2VEYXRlKCBhbHRGb3JtYXQsICRoaWRkZW4udmFsKCkgICk7XG5cblx0XHRcdCRpbnB1dC5kYXRlcGlja2VyKCBhcmdzICkuZGF0ZXBpY2tlciggJ3NldERhdGUnLCBkYXRlICkub24oJ2JsdXInLGZ1bmN0aW9uKCl7XG5cdFx0XHRcdGlmICggISAkKHRoaXMpLnZhbCgpICkge1xuXHRcdFx0XHRcdCRoaWRkZW4udmFsKCcnKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSxcblx0fTtcblxuXHRhY2ZfcXVpY2tlZGl0LnRpbWVwaWNrZXIgPSB7XG5cdFx0aW5pdDogZnVuY3Rpb24oICR3cmFwICkge1xuXHRcdFx0dmFyICRoaWRkZW5cdFx0XHQ9ICR3cmFwLmZpbmQoICdbdHlwZT1cImhpZGRlblwiXScgKSxcblx0XHRcdFx0JGlucHV0XHRcdFx0PSAkd3JhcC5maW5kKCAnW3R5cGU9XCJ0ZXh0XCJdJyApLFxuXHRcdFx0XHRhbHRUaW1lRm9ybWF0XHQ9ICdISDptbTpzcycsXG5cdFx0XHRcdGFyZ3NcdFx0XHQ9IHtcblx0XHRcdFx0XHR0aW1lRm9ybWF0XHRcdFx0OiAkd3JhcC5kYXRhKCd0aW1lX2Zvcm1hdCcpLFxuXHRcdFx0XHRcdGFsdFRpbWVGb3JtYXRcdFx0OiBhbHRUaW1lRm9ybWF0LFxuXHRcdFx0XHRcdGFsdEZpZWxkXHRcdFx0OiAkaGlkZGVuLFxuXHRcdFx0XHRcdGFsdEZpZWxkVGltZU9ubHlcdDogZmFsc2UsXG5cdFx0XHRcdFx0c2hvd0J1dHRvblBhbmVsXHRcdDogdHJ1ZSxcblx0XHRcdFx0XHRjb250cm9sVHlwZVx0XHRcdDogJ3NlbGVjdCcsXG5cdFx0XHRcdFx0b25lTGluZVx0XHRcdFx0OiB0cnVlXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHRpbWUgXHRcdFx0PSAkLmRhdGVwaWNrZXIucGFyc2VUaW1lKCBhbHRUaW1lRm9ybWF0LCAkaGlkZGVuLnZhbCgpICk7XG5cblx0XHRcdCRpbnB1dC50aW1lcGlja2VyKCBhcmdzICkub24oJ2JsdXInLGZ1bmN0aW9uKCl7XG5cdFx0XHRcdGlmICggISAkKHRoaXMpLnZhbCgpICkge1xuXHRcdFx0XHRcdCRoaWRkZW4udmFsKCcnKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRpZiAoICRoaWRkZW4udmFsKCkgKSB7XG5cdFx0XHRcdCRpbnB1dC52YWwoICQuZGF0ZXBpY2tlci5mb3JtYXRUaW1lKCAkd3JhcC5kYXRhKCd0aW1lX2Zvcm1hdCcpLCB0aW1lICkgKVxuXHRcdFx0fVxuXHRcdH0sXG5cblx0fTtcblxuXG5cdGFjZl9xdWlja2VkaXQuZGF0ZXRpbWVwaWNrZXIgPSB7XG5cdFx0aW5pdDogZnVuY3Rpb24oICR3cmFwICkge1xuXHRcdFx0dmFyICRoaWRkZW5cdFx0XHQ9ICR3cmFwLmZpbmQoICdbdHlwZT1cImhpZGRlblwiXScgKSxcblx0XHRcdFx0JGlucHV0XHRcdFx0PSAkd3JhcC5maW5kKCAnW3R5cGU9XCJ0ZXh0XCJdJyApLFxuXHRcdFx0XHRhbHRGb3JtYXRcdFx0PSAneXktbW0tZGQnXG5cdFx0XHRcdGFsdFRpbWVGb3JtYXRcdD0gJ0hIOm1tOnNzJyxcblx0XHRcdFx0YXJnc1x0XHRcdD0ge1xuXHRcdFx0XHRcdGFsdEZpZWxkXHRcdFx0OiAkaGlkZGVuLFxuXHRcdFx0XHRcdGRhdGVGb3JtYXRcdFx0XHQ6ICR3cmFwLmRhdGEoJ2RhdGVfZm9ybWF0JyksXG5cdFx0XHRcdFx0YWx0Rm9ybWF0XHRcdFx0OiBhbHRGb3JtYXQsXG5cdFx0XHRcdFx0dGltZUZvcm1hdFx0XHRcdDogJHdyYXAuZGF0YSgndGltZV9mb3JtYXQnKSxcblx0XHRcdFx0XHRhbHRUaW1lRm9ybWF0XHRcdDogYWx0VGltZUZvcm1hdCxcblx0XHRcdFx0XHRhbHRGaWVsZFRpbWVPbmx5XHQ6IGZhbHNlLFxuXHRcdFx0XHRcdGNoYW5nZVllYXJcdFx0XHQ6IHRydWUsXG5cdFx0XHRcdFx0eWVhclJhbmdlXHRcdFx0OiBcIi0xMDA6KzEwMFwiLFxuXHRcdFx0XHRcdGNoYW5nZU1vbnRoXHRcdFx0OiB0cnVlLFxuXHRcdFx0XHRcdHNob3dCdXR0b25QYW5lbFx0XHQ6IHRydWUsXG5cdFx0XHRcdFx0Zmlyc3REYXlcdFx0XHQ6ICR3cmFwLmRhdGEoJ2ZpcnN0X2RheScpLFxuXHRcdFx0XHRcdGNvbnRyb2xUeXBlXHRcdFx0OiAnc2VsZWN0Jyxcblx0XHRcdFx0XHRvbmVMaW5lXHRcdFx0XHQ6IHRydWVcblx0XHRcdFx0fSxcblx0XHRcdFx0ZGF0ZXRpbWUgXHRcdFx0PSAkLmRhdGVwaWNrZXIucGFyc2VEYXRlVGltZSggYWx0Rm9ybWF0LCBhbHRUaW1lRm9ybWF0LCAkaGlkZGVuLnZhbCgpICk7XG5cblx0XHRcdCRpbnB1dC5kYXRldGltZXBpY2tlciggYXJncyApLmRhdGVwaWNrZXIoICdzZXREYXRlJywgZGF0ZXRpbWUgKS5vbignYmx1cicsZnVuY3Rpb24oKXtcblx0XHRcdFx0aWYgKCAhICQodGhpcykudmFsKCkgKSB7XG5cdFx0XHRcdFx0JGhpZGRlbi52YWwoJycpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdH07XG5cblxuXHRpZiAoICd1bmRlZmluZWQnICE9PSB0eXBlb2YgaW5saW5lRWRpdFBvc3QgKSB7XG5cdFx0Ly8gd2UgY3JlYXRlIGEgY29weSBvZiB0aGUgV1AgaW5saW5lIGVkaXQgcG9zdCBmdW5jdGlvblxuXHRcdHZhciBfd3BfaW5saW5lX2VkaXRfcG9zdCA9IGlubGluZUVkaXRQb3N0LmVkaXQsXG5cdFx0XHR1bmxvYWRfY2I7XG5cdFx0Ly8gYW5kIHRoZW4gd2Ugb3ZlcndyaXRlIHRoZSBmdW5jdGlvbiB3aXRoIG91ciBvd24gY29kZVxuXHRcdGlubGluZUVkaXRQb3N0LmVkaXQgPSBmdW5jdGlvbiggaWQgKSB7XG5cdFx0XHR2YXIgb2JqZWN0X2lkLCAkdHI7XG5cblxuXHRcdFx0Ly8gXCJjYWxsXCIgdGhlIG9yaWdpbmFsIFdQIGVkaXQgZnVuY3Rpb25cblx0XHRcdC8vIHdlIGRvbid0IHdhbnQgdG8gbGVhdmUgV29yZFByZXNzIGhhbmdpbmdcblx0XHRcdF93cF9pbmxpbmVfZWRpdF9wb3N0LmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblxuXHRcdFx0Ly8gZ2V0IHRoZSBwb3N0IElEXG5cdFx0XHRvYmplY3RfaWQgPSAwO1xuXHRcdFx0aWYgKCB0eXBlb2YoIGlkICkgPT09ICdvYmplY3QnICkge1xuXHRcdFx0XHRvYmplY3RfaWQgPSBwYXJzZUludCggdGhpcy5nZXRJZCggaWQgKSApO1xuXHRcdFx0fVxuXHRcdFx0JHRyID0gJCgnI2VkaXQtJyArIG9iamVjdF9pZCApO1xuXHRcdFx0Z2V0X2FjZl9wb3N0X2RhdGEoIG9iamVjdF9pZCAsICQoJyNlZGl0LScgKyBvYmplY3RfaWQgKSApO1xuXG5cdFx0XHRiaW5kVmFsaWRhdGlvbiggJHRyLmZpbmQoJ2J1dHRvbi5zYXZlJyksIG9iamVjdF9pZCApO1xuXHRcdH07XG5cdH1cblxuXHRpZiAoICd1bmRlZmluZWQnICE9PSB0eXBlb2YgaW5saW5lRWRpdFRheCApIHtcblxuXHRcdHZhciBfd3BfaW5saW5lX2VkaXRfdGF4ID0gaW5saW5lRWRpdFRheC5lZGl0O1xuXG5cdFx0aW5saW5lRWRpdFRheC5lZGl0ID0gZnVuY3Rpb24oIGlkICkge1xuXHRcdFx0dmFyIG9iamVjdF9pZCwgJHRyLFxuXHRcdFx0XHR0YXggPSAkKCdpbnB1dFtuYW1lPVwidGF4b25vbXlcIl0nKS52YWwoKTtcblxuXHRcdFx0X3dwX2lubGluZV9lZGl0X3RheC5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cblx0XHRcdC8vIGdldCB0aGUgcG9zdCBJRFxuXHRcdFx0b2JqZWN0X2lkID0gMDtcblx0XHRcdGlmICggdHlwZW9mKCBpZCApID09PSAnb2JqZWN0JyApIHtcblx0XHRcdFx0b2JqZWN0X2lkID0gcGFyc2VJbnQoIHRoaXMuZ2V0SWQoIGlkICkgKTtcblx0XHRcdH1cblx0XHRcdCR0ciA9ICQoJyNlZGl0LScgKyBvYmplY3RfaWQgKTtcblx0XHRcdGdldF9hY2ZfcG9zdF9kYXRhKCB0YXggKyAnXycgKyBvYmplY3RfaWQgLCAkdHIgKTtcblxuXHRcdFx0YmluZFZhbGlkYXRpb24oICR0ci5maW5kKCdidXR0b24uc2F2ZScpLCBvYmplY3RfaWQgKTtcblx0XHR9O1xuXHR9XG5cblx0YWNmLnZhbGlkYXRpb24uZXJyb3JfY2xhc3MgPSAnZm9ybS1pbnZhbGlkJztcblxuXHRmdW5jdGlvbiBiaW5kVmFsaWRhdGlvbiggJGJ1dHRvbiwgb2JqZWN0X2lkICkge1xuXHRcdHZhciAkZm9ybSA9ICRidXR0b24uY2xvc2VzdCgnZm9ybScpO1xuXG4vLyBcdFx0YWNmLnVwZGF0ZSgnYWpheHVybCcsIGFqYXh1cmwgKTtcbi8vIFx0XHRhY2YudXBkYXRlKCdub25jZScsICRmb3JtLmZpbmQoJ1tuYW1lPVwibm9uY2VcIl0nKS52YWwoKSApO1xuIFx0XHRhY2YudXBkYXRlKCdwb3N0X2lkJywgb2JqZWN0X2lkICk7XG5cblx0XHQkYnV0dG9uLmNsaWNrKCBmdW5jdGlvbihlKSB7XG5cblx0XHRcdC8vIGJhaWwgZWFybHkgaWYgbm90IGFjdGl2ZVxuXHRcdFx0aWYoICFhY2YudmFsaWRhdGlvbi5hY3RpdmUgKSB7XG5cblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cblx0XHRcdH1cblxuXHRcdFx0Ly8gaWdub3JlIHZhbGlkYXRpb24gKG9ubHkgaWdub3JlIG9uY2UpXG5cdFx0XHRpZiggYWNmLnZhbGlkYXRpb24uaWdub3JlICkge1xuXHRcdFx0XHRhY2YudmFsaWRhdGlvbi5pZ25vcmUgPSAwO1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gc3RvcCBXUCBKUyB2YWxpZGF0aW9uXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcblxuXG5cdFx0XHQvLyBzdG9yZSBzdWJtaXQgdHJpZ2dlciBzbyBpdCB3aWxsIGJlIGNsaWNrZWQgaWYgdmFsaWRhdGlvbiBpcyBwYXNzZWRcblx0XHRcdGFjZi52YWxpZGF0aW9uLiR0cmlnZ2VyID0gJCh0aGlzKTtcblxuXHRcdFx0Ly8gcnVuIHZhbGlkYXRpb25cblx0XHRcdGFjZi52YWxpZGF0aW9uLmZldGNoKCAkZm9ybSApO1xuXG5cdFx0XHQvLyBzdG9wIGFsbCBvdGhlciBjbGljayBldmVudHMgb24gdGhpcyBpbnB1dFxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH0pO1xuXG5cdFx0JGJ1dHRvbi5kYXRhKCdldmVudHMnKS5jbGljay5yZXZlcnNlKCk7XG5cdH1cblxuXHQkKGRvY3VtZW50KS5vbiggJ2NsaWNrJyAsICcuYnVsa2FjdGlvbnMgLmJ1dHRvbi5hY3Rpb24nICwgZnVuY3Rpb24oIGUgKSB7XG5cdFx0dmFyIHBvc3RfaWRzID0gW107XG5cblx0XHQkKCAnI2J1bGstZWRpdCAjYnVsay10aXRsZXMnICkuY2hpbGRyZW4oKS5lYWNoKCBmdW5jdGlvbigpIHtcblxuXHRcdFx0cG9zdF9pZHMucHVzaCggJCggdGhpcyApLmF0dHIoICdpZCcgKS5yZXBsYWNlKCAvXih0dGxlKS9pLCAnJyApICk7XG5cblx0XHR9KTtcblxuXHRcdGdldF9hY2ZfcG9zdF9kYXRhKCBwb3N0X2lkcyAsICQoICcjYnVsay1lZGl0JyApICk7XG5cblx0fSlcblx0Lm9uKCdjaGFuZ2UnLCAnLmFjZi1yYWRpby1saXN0Lm90aGVyIGlucHV0W3R5cGU9XCJyYWRpb1wiXScsIGZ1bmN0aW9uKGUpIHtcblxuXHRcdHZhciAkdGhpcyA9ICQodGhpcyksXG5cdFx0XHQkbGlzdCA9ICR0aGlzLmNsb3Nlc3QoJy5hY2YtcmFkaW8tbGlzdCcpLFxuXHRcdFx0aXNfb3RoZXIgPSAkdGhpcy52YWwoKSA9PSAnb3RoZXInLFxuXHRcdFx0JG90aGVyID0gJGxpc3QuZmluZCgnW3R5cGU9XCJ0ZXh0XCJdJykucHJvcCgnZGlzYWJsZWQnLCAhIGlzX290aGVyICk7XG5cblx0XHQhISBpc19vdGhlciAmJiAkb3RoZXIuZm9jdXMoKTtcblxuXHR9KVxuXHQvLyAub24oJ2NoYW5nZSBtb3VzZW1vdmUnLCAnLmFjZi1yYW5nZS13cmFwIGlucHV0W3R5cGU9XCJyYW5nZVwiXScsIGZ1bmN0aW9uKGUpIHtcbiAgICAvL1xuXHQvLyBcdCQodGhpcykubmV4dCgnW3R5cGU9XCJudW1iZXJcIl0nKS52YWwoICQodGhpcykudmFsKCkgKTtcbiAgICAvL1xuXHQvLyB9KVxuXHQvLyAub24oJ2NoYW5nZSBrZXl1cCcsICcuYWNmLXJhbmdlLXdyYXAgaW5wdXRbdHlwZT1cIm51bWJlclwiXScsIGZ1bmN0aW9uKGUpIHtcbiAgICAvL1xuXHQvLyBcdCQodGhpcykucHJldignW3R5cGU9XCJyYW5nZVwiXScpLnZhbCggJCh0aGlzKS52YWwoKSApO1xuICAgIC8vXG5cdC8vIH0pXG5cdC5vbiggJ2NoYW5nZScsICdbZGF0YS1pcy1kby1ub3QtY2hhbmdlPVwidHJ1ZVwiXScsIGZ1bmN0aW9uKCl7XG5cdFx0dmFyICRzZWxmID0gJCh0aGlzKSxcblx0XHRcdG5hbWUgPSAkc2VsZi5hdHRyKCduYW1lJyksXG5cdFx0XHQkbGlzdCA9ICRzZWxmLmNsb3Nlc3QoJy5hY2YtY2hlY2tib3gtbGlzdCcpLFxuXHRcdFx0JGl0ZW1zO1xuXHRcdGlmICggJGxpc3QubGVuZ3RoICkge1xuXHRcdFx0JGl0ZW1zID0gJGxpc3QuZmluZCgnW3R5cGU9XCJjaGVja2JveFwiXTpub3QoW2RhdGEtaXMtZG8tbm90LWNoYW5nZV0pJyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCRpdGVtcyA9ICRzZWxmLmNsb3Nlc3QoJy5hY2YtZmllbGQnKS5maW5kKCdpbnB1dCxzZWxlY3QsW25hbWU9XCInK25hbWUrJ1wiXScpLm5vdCh0aGlzKVxuXHRcdH1cblxuXHRcdCRpdGVtcy5wcm9wKCAnZGlzYWJsZWQnLCAkc2VsZi5wcm9wKCdjaGVja2VkJykgKTtcblx0fSlcblx0Ly8gLm9uKCAnY2xpY2snLCAnLmlubGluZS1lZGl0LWNvbCAuc2VsZWN0LW1lZGlhJywgZnVuY3Rpb24oZSkge1xuXHQvLyBcdHZhciBzZWxmID0gdGhpcyxcblx0Ly8gXHRcdCRoaWRkZW4gPSAkKHNlbGYpLnBhcmVudCgnLmFjZi1pbnB1dC13cmFwJykuZmluZCgnW3R5cGU9XCJoaWRkZW5cIl0nKSxcblx0Ly8gXHRcdCRmaWVsZCA9ICQodGhpcykuY2xvc2VzdCgnLmFjZi1maWVsZCcpLFxuXHQvLyBcdFx0cG9zdF9pZCA9IGFjZi5nZXQoJ3Bvc3RfaWQnKSxcblx0Ly8gXHRcdG1lZGlhRnJhbWVPcHRzO1xuICAgIC8vXG5cdC8vIFx0bWVkaWFGcmFtZU9wdHMgPSB7XG5cdC8vIFx0XHRmaWVsZFx0XHQ6ICRoaWRkZW4uYXR0cignZGF0YS1hY2YtZmllbGQta2V5JyksXG5cdC8vIFx0XHRtdWx0aXBsZVx0OiBmYWxzZSxcblx0Ly8gXHRcdHBvc3RfaWRcdFx0OiBwb3N0X2lkLFxuXHQvLyBcdFx0bGlicmFyeVx0XHQ6ICRoaWRkZW4uYXR0cignZGF0YS1saWJyYXJ5JyksXG5cdC8vIFx0XHRtb2RlXHRcdDonc2VsZWN0Jyxcblx0Ly8gXHRcdHNlbGVjdFx0XHQ6IGZ1bmN0aW9uICggYXR0YWNobWVudCwgaSApIHtcblx0Ly8gXHRcdFx0aWYgKCAhIGF0dGFjaG1lbnQgKSB7XG5cdC8vIFx0XHRcdFx0cmV0dXJuO1xuXHQvLyBcdFx0XHR9XG5cdC8vIFx0XHRcdHZhciAkaGlkZGVuID0gJChzZWxmKS5wYXJlbnQoJy5hY2YtaW5wdXQtd3JhcCcpLmZpbmQoJ1t0eXBlPVwiaGlkZGVuXCJdJyksXG5cdC8vIFx0XHRcdFx0bWVkaWFfaWQgPSBhdHRhY2htZW50LmdldCgnaWQnKTtcbiAgICAvL1xuXHQvLyBcdFx0XHQkaGlkZGVuLnZhbCggbWVkaWFfaWQgKTtcblx0Ly8gXHRcdH1cblx0Ly8gXHR9O1xuICAgIC8vXG4gICAgLy9cblx0Ly8gXHRlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgLy9cbiAgICAvL1xuXHQvLyBcdGlmICggJGhpZGRlbi5kYXRhKCdtaW1lX3R5cGVzJykgKSB7XG5cdC8vIFx0XHRtZWRpYUZyYW1lT3B0cy5taW1lX3R5cGVzID0gJGhpZGRlbi5kYXRhKCdtaW1lX3R5cGVzJyk7XG5cdC8vIFx0fVxuXHQvLyBcdGlmICggJGZpZWxkLmlzKCdbZGF0YS1maWVsZC10eXBlPVwiaW1hZ2VcIl0nKSApIHtcblx0Ly8gXHRcdG1lZGlhRnJhbWVPcHRzLnR5cGUgPSAnaW1hZ2UnO1xuXHQvLyBcdH0gZWxzZSB7XG5cdC8vIFx0XHRtZWRpYUZyYW1lT3B0cy50eXBlID0gJyc7XG5cdC8vIFx0fVxuICAgIC8vXG5cdC8vIFx0Ly8gQ3JlYXRlIGEgbmV3IG1lZGlhIGZyYW1lXG5cdC8vIFx0bWVkaWFfZnJhbWUgPSBhY2YubWVkaWEucG9wdXAoIG1lZGlhRnJhbWVPcHRzICk7XG4gICAgLy9cbiAgICAvL1xuXHQvLyBcdC8vIHNldCBwb3N0IGlkLCBzbyBuZXcgdXBsb2FkcyBhcmUgYXR0YWNoZWQgdG8gZWRpdGVkIHBvc3Rcblx0Ly8gXHRpZiAoIGFjZi5pc3NldCh3aW5kb3csJ3dwJywnbWVkaWEnLCd2aWV3Jywnc2V0dGluZ3MnLCdwb3N0JykgJiYgJC5pc051bWVyaWMocG9zdF9pZCkgKSB7XG4gICAgLy9cblx0Ly8gXHRcdHdwLm1lZGlhLnZpZXcuc2V0dGluZ3MucG9zdC5pZCA9IHBvc3RfaWQ7XG4gICAgLy9cblx0Ly8gXHR9XG4gICAgLy9cblx0Ly8gfSlcblx0Ly8gLm9uKCAnY2xpY2snLCAnLmlubGluZS1lZGl0LWNvbCAucmVtb3ZlLW1lZGlhJywgZnVuY3Rpb24oZSkge1xuXHQvLyBcdGUucHJldmVudERlZmF1bHQoKTtcblx0Ly8gXHR2YXIgJGhpZGRlbiA9ICQodGhpcykucGFyZW50KCkuZmluZCgnW3R5cGU9XCJoaWRkZW5cIl0nKTtcblx0Ly8gXHQkaGlkZGVuLnZhbCgnJyk7XG5cdC8vIH0pO1xufSkoIGpRdWVyeSwgd2luZG93LmFjZl9xdWlja2VkaXQgKTtcbiIsIihmdW5jdGlvbigkKSB7XG5cdCQoJy5hY2YtcWVmLWdhbGxlcnktY29sJykub24oJ21vdXNlbW92ZScsZnVuY3Rpb24oZSl7XG5cdFx0dmFyICR0aGlzXHQ9ICQodGhpcyksXG5cdFx0XHQkaW1nXHQ9ICQodGhpcykuZmluZCgnaW1nJylcblx0XHRcdHhcdFx0PSBlLm9mZnNldFgsXG5cdFx0XHRudW1cdFx0PSAkaW1nLmxlbmd0aCxcblx0XHRcdHN0ZXBcdD0gJCh0aGlzKS53aWR0aCgpIC8gbnVtO1xuXG5cdFx0JGltZy5lYWNoKCBmdW5jdGlvbihpLGVsKSB7XG5cdFx0XHRpZiAoeCA+PSBzdGVwKmkpIHtcblx0XHRcdFx0JChlbCkuc2hvdygpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0JChlbCkuaGlkZSgpO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0fSk7XG59KShqUXVlcnkpOyJdfQ==
